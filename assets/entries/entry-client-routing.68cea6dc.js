function ln(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function Se(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return ln()&&(n.stack=un(n.stack,t)),n}function un(e,t){if(!e)return e;const n=fn(e);let r=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:r<t&&cn(o)?(r++,!1):!0).join(`
`)}function cn(e){return e.startsWith("    at ")}function fn(e){return e.split(/\r?\n/)}function O(e,t){const n=globalThis.__vike=globalThis.__vike||{};return n[e]=n[e]||t}function S(e){return typeof e=="object"&&e!==null}function Ee(e){return Array.from(new Set(e))}const I=O("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),dn="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vike.dev/client-runtimes-conflict",it="Two vike client runtime instances are being loaded. Make sure your client-side bundles don't include vike twice. (In order to reduce the size of your client-side JavaScript bundles.)";function ot(){{const e=Ee(I.instances);pn(e.length<=1,`Both vike@${e[0]} and vike@${e[1]} loaded. Only one version should be loaded.`)}I.checkSingleInstance&&I.instances.length>1&&ye(!1,it,{onlyOnce:!0,showStackTrace:!0})}function hn(e){ye(I.isClientRouting!==!1,dn,{onlyOnce:!0,showStackTrace:!0}),ye(I.isClientRouting===void 0,it,{onlyOnce:!0,showStackTrace:!0}),I.isClientRouting=!0,e&&(I.checkSingleInstance=!0),ot()}function gn(e){I.instances.push(e),ot()}function pn(e,t){if(e)return;const n=`[vike][Wrong Usage] ${t}`;throw new Error(n)}function ye(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vike][Warning] ${t}`;if(n){const{alreadyLogged:o}=I,s=n===!0?i:n;if(o.has(s))return;o.add(s)}console.warn(r?new Error(i):i)}const mn="0.4.143",L={projectName:"Vike",projectVersion:mn,npmPackageName:"vike",githubRepository:"https://github.com/vikejs/vike"};gn(L.projectVersion);const st=new Proxy(e=>e,{get:()=>st}),g=st,P=O("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),yn=`[${L.npmPackageName}]`,bn=`[${L.npmPackageName}@${L.projectVersion}]`,_e=2;function a(e,t){var s;if(e)return;const n=(()=>{if(!t)return null;const l=typeof t=="string"?t:JSON.stringify(t);return g.dim(`Debug info (for ${L.projectName} maintainers; you can ignore this): ${l}`)})(),r=`${L.githubRepository}/issues/new`;let i=[`You stumbled upon a bug in ${L.projectName}'s source code.`,`Go to ${g.blue(r)} and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");i=Y(i),i=ae(i,"Bug"),i=J(i,!0);const o=Se(i,_e);throw(s=P.onBeforeLog)==null||s.call(P),o}function d(e,t,{showStackTrace:n}={}){var i;if(e)return;t=Y(t),t=ae(t,"Wrong Usage"),t=J(t);const r=Se(t,_e);throw n&&P.showStackTraceList.add(r),(i=P.onBeforeLog)==null||i.call(P),r}function at(e){return e=Y(e),e=ae(e,"Error"),e=J(e),Se(e,_e)}function R(e,t,{onlyOnce:n,showStackTrace:r}){var i;if(!e){if(t=Y(t),t=ae(t,"Warning"),t=J(t),n){const{alreadyLogged:o}=P,s=n===!0?t:n;if(o.has(s))return;o.add(s)}if((i=P.onBeforeLog)==null||i.call(P),r){const o=new Error(t);P.showStackTraceList.add(o),P.logger(o,"warn")}else P.logger(t,"warn")}}function $e(e,t,{onlyOnce:n}){var r;if(!e){if(t=Y(t),t=J(t),n){const{alreadyLogged:i}=P,o=t;if(i.has(o))return;i.add(o)}(r=P.onBeforeLog)==null||r.call(P),P.logger(t,"info")}}function ae(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=g.bold(g[r](n)),`${n}${e}`}function Y(e){return e.startsWith("[")?e:` ${e}`}function J(e,t=!1){return`${t?bn:yn}${e}`}function N(){return typeof window<"u"&&typeof window.scrollY=="number"}const lt=O("utils/assertRouterType.ts",{});function z(){vn(ut()),lt.isClientRouting=!0}function ut(){return lt.isClientRouting!==!1}function vn(e){d(N(),`${g.cyan("import { something } from 'vike/client/router'")} is forbidden on the server-side`,{showStackTrace:!0}),R(e,"You shouldn't `import { something } from 'vike/client/router'` when using Server Routing. The 'vike/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}const wn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ct=["vue","svelte","marko","md","mdx"],Rn=[...wn,...ct];function ft(e){const t=Rn.some(n=>e.endsWith("."+n));return a(!Pn(e)||t),t}function Pn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function Sn(e){return ct.some(t=>e.endsWith("."+t))}function F(e,t,n){return typeof e=="string"?We(e.split(""),t,n).join(""):We(e,t,n)}function We(e,t,n){const r=[];let i=t>=0?t:e.length+t;a(i>=0&&i<=e.length);let o=n>=0?n:e.length+n;for(a(o>=0&&o<=e.length);!(i===o||(i===e.length&&(i=0),i===o));){const s=e[i];a(s!==void 0),r.push(s),i++}return r}const dt=["http://","https://","tauri://"];function ke(e){return dt.some(t=>e.startsWith(t))||e.startsWith("/")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function En(e,t){a(t.includes(" but ")),d(typeof e=="string",`${t} should be a string`),!ke(e)&&(!e.startsWith("/")&&!e.includes(":")?d(!1,`${t} is ${g.cyan(e)} and it should be /${g.cyan(e)} instead (URL pathnames should start with a leading slash)`):d(!1,`${t} isn't a valid URL`))}function M(e,t){a(ke(e)),a(t.startsWith("/"));const[n,...r]=e.split("#");a(n!==void 0);const i=["",...r].join("#")||null;a(i===null||i.startsWith("#"));const o=i===null?"":be(i.slice(1)),[s,...l]=n.split("?");a(s!==void 0);const c=["",...l].join("?")||null;a(c===null||c.startsWith("?"));const u={},h={};Array.from(new URLSearchParams(c||"")).forEach(([b,U])=>{u[b]=U,h[b]=[...h[b]||[],U]});const{origin:f,pathname:v}=$n(s,t);a(f===null||f===be(f)),a(v.startsWith("/")),a(f===null||e.startsWith(f));const m=s.slice((f||"").length);In(e,f,m,c,i);let{pathname:w,hasBaseServer:k}=Cn(v,t);return w=_n(w),a(w.startsWith("/")),{origin:f,pathname:w,pathnameOriginal:m,hasBaseServer:k,search:u,searchAll:h,searchOriginal:c,hash:o,hashOriginal:i}}function be(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function _n(e){return e=e.split("/").map(t=>be(t).split("/").join("%2F")).join("/"),e=e.replace(/\s/g,""),e}function $n(e,t){var n;{const{origin:r,pathname:i}=fe(e);if(r)return{origin:r,pathname:i};a(i===e)}if(e.startsWith("/"))return{origin:null,pathname:e};{let r=typeof window<"u"&&((n=window==null?void 0:window.document)==null?void 0:n.baseURI);r&&(r=fe(r).pathname);const o=kn(e,r||t);return fe(o)}}function fe(e){if(dt.some(t=>e.startsWith(t))){const[t,n,r,...i]=e.split("/"),o=[t,n,r].join("/"),s=["",...i].join("/")||"/";return{origin:o,pathname:s}}else return{pathname:e,origin:null}}function kn(e,t){const n=t.split("/"),r=e.split("/");let i=t.endsWith("/");e.startsWith(".")&&n.pop();for(const s in r){const l=r[s];l==""&&s==="0"||l!="."&&(l==".."?n.pop():(i=!1,n.push(l)))}let o=n.join("/");return i&&!o.endsWith("/")&&(o+="/"),o.startsWith("/")||(o="/"+o),o}function On(e){a(e.startsWith("/")),a(!e.includes("?")),a(!e.includes("#"))}function Cn(e,t){On(e),a(Oe(t));let n=e;if(a(n.startsWith("/")),a(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===F(t,0,-1)&&(r=F(t,0,-1),a(n===r)),n.startsWith(r)?(a(n.startsWith("/")||n.startsWith("http")),a(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),a(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Oe(e){return e.startsWith("/")}function In(e,t,n,r,i){const o=Fn(t,n,r,i);a(e===o)}function Fn(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function y(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function W(e){return e instanceof Function||typeof e=="function"}function ne(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function Tn(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r<i?-1:1}}function A(e){return(t,n)=>{const r=e(t),i=e(n);if(a([!0,!1,null].includes(r)),a([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;a(!1)}}function xn(e){return A(t=>{const n=e(t);return n===null?null:!n})}function p(e,t,n="unknown"){if(!S(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?S(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?W(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function x(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function An(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const jn=e=>e!=null;function Be(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function ht(e){const t=n=>`Not a posix path: ${n}`;a(e!==null,t("null")),a(typeof e=="string",t(`typeof path === ${JSON.stringify(typeof e)}`)),a(e!=="",t("(empty string)")),a(e),a(!e.includes("\\"),t(e))}function de(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function Ln(e){return typeof e=="object"&&e!==null&&"then"in e&&W(e.then)}const Nn=["$$registrations","_rerender_only"],Wn=[".md",".mdx"];function Bn(e,t){Hn(e,t,!0)}function Hn(e,t,n){const i=Object.keys(e).filter(l=>!Nn.includes(l)),o=i.filter(l=>l!=="default"),s=i.includes("default");if(o.length===0){if(s)return;a(i.length===0),d(!1,`${t} doesn't export any value, but it should have a ${g.cyan("export default")} instead`)}else if(!Wn.some(l=>t.endsWith(l)))if(n)o.forEach(l=>{R(o.length===0,`${t} should only have a default export: move ${g.cyan(`export { ${l} }`)} to +config.h.js or its own +${o}.js`,{onlyOnce:!0})});else{const l=o.join(", ");R(o.length===0,`${t} replace ${g.cyan(`export { ${l} }`)} with ${g.cyan(`export default { ${l} }`)}`,{onlyOnce:!0})}}function Dn(e){return[null,void 0].includes(e)?String(e):["undefined","boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}function zn(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const Un=["clientRouting"];function Vn(e){Un.forEach(t=>{if(a(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;d(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),d(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const gt=["render","clientRouting","prerender","doNotPrerender"];function Gn(e,t){d(!gt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Yn(e){let t="",n="",[r,...i]=e;return r?r==="*"?(a(i.length===0),"export *"):(r==="default"?t="export default":(t="export",i=[r,...i]),i.forEach(s=>{t=`${t} { ${s}`,n=` }${n}`}),t+n):null}function H(e,t,n){const r=pt(e,t);if(r===null)return null;const{value:i,definedAtInfo:o}=r;return n&&Mn(i,n,t,o),{value:i}}function Jn(e,t){const n=pt(e,t);a(n);const{definedAtInfo:r}=n;return a(r),r}function pt(e,t){const n=e.configValues[t];if(!n)return null;const{value:r,definedAtInfo:i}=n;return r===null?null:{value:r,definedAtInfo:i}}function mt(e,t){const n=t.find(r=>r.pageId===e);return a(t.length>0),a(n),n}function Mn(e,t,n,r){a(e!==null);const i=typeof e;if(i===t)return;const o=Dn(e),s=o!==null?`value ${g.cyan(o)}`:`type ${g.cyan(i)}`,l=yt(n,{definedAtInfo:r},!0);d(!1,`${l} has an invalid ${s}: it should be a ${g.cyan(t)} instead`)}function yt(e,{definedAtInfo:t},n,r){let i=`${n?"Config":"config"} ${g.cyan(e)}`;return t!==null&&(i=`${i} defined at ${bt(t,r)}`),i}function bt(e,t){const{filePath:n,fileExportPath:r}=e;let i=n;const o=Yn(r);return o&&(i=`${i} > ${g.cyan(o)}`),t&&(i=`${i} > (${g.blue(t)})`),i}function Kn(e,t){const n={},r={},i={};e.forEach(l=>{qn(l).forEach(({exportName:u,exportValue:h,isFromDefaultExport:f})=>{a(u!=="default"),i[u]=i[u]??[],i[u].push({exportValue:h,exportSource:`${l.filePath} > ${f?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t&&Object.entries(t.configValues).forEach(([l,c])=>{const{value:u,definedAtInfo:h}=c;let f=null;h&&(f=h.filePath);const v=yt(l,c,!0);r[l]=r[l]??u,n[l]=n[l]??[],a(n[l].length===0),n[l].push({configValue:u,configDefinedAt:v,configDefinedByFile:f});const m=l;i[m]=i[m]??[],i[m].push({exportValue:u,exportSource:v,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})});const o=Xn(),s={};return Object.entries(i).forEach(([l,c])=>{c.forEach(({exportValue:u,_fileType:h,_isFromDefaultExport:f})=>{s[l]=s[l]??u,h===".page"&&!f&&(l in o||(o[l]=u))})}),a(!("default"in s)),a(!("default"in i)),{config:r,configEntries:n,exports:s,exportsAll:i,pageExports:o}}function qn(e){const{filePath:t,fileExports:n}=e;a(n),a(ft(t));const r=[];return Object.entries(n).sort(xn(([i])=>i==="default")).forEach(([i,o])=>{let s=i==="default";if(s)if(Sn(t))i="Page";else{d(S(o),`The ${g.cyan("export default")} of ${t} should be an object.`),Object.entries(o).forEach(([l,c])=>{Gn(l,t),r.push({exportName:l,exportValue:c,isFromDefaultExport:s})});return}r.push({exportName:i,exportValue:o,isFromDefaultExport:s})}),r.forEach(({exportName:i,isFromDefaultExport:o})=>{a(!(o&&gt.includes(i)))}),r}function Xn(){return new Proxy({},{get(...e){return N()||R(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vike.dev/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function Qn(e){const t=".page.",n=F(e.split(t),0,-1).join(t);return a(!n.includes("\\")),n}function D(e){ht(e)}function vt(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(d(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=Ee(e.map(({pageId:r})=>r).filter(r=>K(r)));if(d(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return a(r),r}return null}function K(e,t){return a(!e.includes("\\")),e.includes("/_error")}function Zn(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return a(n),n.isErrorPage}else return K(e)}const er=[".page",".page.server",".page.route",".page.client",".css"];function tr(e){if(ht(e),e.endsWith(".css"))return".css";a(ft(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(a(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";a(!1,e)}function wt(e){const t=o=>i.pageId===o||i.isDefaultPageFile&&(He(i.filePath)||nr(o,i.filePath)),n=tr(e),i={filePath:e,fileType:n,isEnv:o=>{if(a(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";a(!1)},isRelevant:t,isDefaultPageFile:ve(e),isRendererPageFile:n!==".css"&&ve(e)&&He(e),isErrorPageFile:K(e),pageId:Qn(e)};return i}function ve(e){return D(e),K(e)?!1:e.includes("/_default")}function He(e){return D(e),e.includes("/renderer/")}function nr(e,t){D(e),D(t),a(!e.endsWith("/")),a(!t.endsWith("/")),a(ve(t));const n=F(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function rr(e){a(Array.isArray(e)),e.forEach(t=>{a(S(t)),a(p(t,"pageId","string")),a(p(t,"routeFilesystem"))})}function ir(e){a(e),a(p(e,"onBeforeRoute")),a(p(e,"onPrerenderStart"))}const or=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function le(e){const t=JSON.parse(e);return Rt(t)}function Rt(e){return typeof e=="string"?sr(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=Rt(n)}),e)}function sr(e){for(const{match:t,deserialize:n}of or)if(t(e))return n(e,le);return e}function ar(e){a(p(e,"isGeneratedFile")),a(e.isGeneratedFile!==!1,"vike was re-installed(/re-built). Restart your app."),a(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),a(p(e,"pageFilesLazy","object")),a(p(e,"pageFilesEager","object")),a(p(e,"pageFilesExportNamesLazy","object")),a(p(e,"pageFilesExportNamesEager","object")),a(p(e.pageFilesLazy,".page")),a(p(e.pageFilesLazy,".page.client")||p(e.pageFilesLazy,".page.server")),a(p(e,"pageFilesList","string[]")),a(p(e,"pageConfigs")),a(p(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;rr(t),lr(t),ir(n);const r={};Q(e.pageFilesLazy).forEach(({filePath:o,pageFile:s,globValue:l})=>{s=r[o]=r[o]??s;const c=l;De(c),s.loadFile=async()=>{"fileExports"in s||(s.fileExports=await c(),Vn(s))}}),Q(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:s,globValue:l})=>{s=r[o]=r[o]??s;const c=l;De(c),s.loadExportNames=async()=>{if(!("exportNames"in s)){const u=await c();d("exportNames"in u,"You seem to be using Vite 2 but the latest vike versions only work with Vite 3"),a(p(u,"exportNames","string[]"),s.filePath),s.exportNames=u.exportNames}}}),Q(e.pageFilesEager).forEach(({filePath:o,pageFile:s,globValue:l})=>{s=r[o]=r[o]??s;const c=l;a(S(c)),s.fileExports=c}),Q(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:s,globValue:l})=>{s=r[o]=r[o]??s;const c=l;a(S(c)),a(p(c,"exportNames","string[]"),s.filePath),s.exportNames=c.exportNames}),e.pageFilesList.forEach(o=>{r[o]=r[o]??wt(o)});const i=Object.values(r);return i.forEach(({filePath:o})=>{a(!o.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function Q(e){const t=[];return Object.entries(e).forEach(([n,r])=>{a(er.includes(n)),a(S(r)),Object.entries(r).forEach(([i,o])=>{const s=wt(i);a(s.fileType===n),t.push({filePath:i,pageFile:s,globValue:o})})}),t}function De(e){a(W(e))}function lr(e){e.forEach(t=>{Object.entries(t.configValues).forEach(([n,r])=>{{const{valueSerialized:i}=r;i!==void 0&&(r.value=le(i))}})})}const T=O("setPageFiles.ts",{});function ur(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=ar(e);T.pageFilesAll=t,T.pageConfigs=n,T.pageConfigGlobal=r}async function cr(e,t){e?(a(!T.pageFilesGetter),a(t===void 0)):(a(T.pageFilesGetter),a(typeof t=="boolean"),(!T.pageFilesAll||!t)&&await T.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=T;a(n&&r&&i);const o=fr(n,r);return{pageFilesAll:n,allPageIds:o,pageConfigs:r,pageConfigGlobal:i}}function fr(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),r=Ee(n),i=t.map(o=>o.pageId);return[...r,...i]}function Ce(e,t){return St(e,t,!0)}function Pt(e,t){return St(e,t,!1)}function St(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(m=>m.isRelevant(t)&&m.fileType!==".page.route").sort(dr(n,t)),o=m=>{const w=i.filter(b=>b.pageId===t&&b.isEnv(m?"CLIENT_AND_SERVER":r));d(w.length<=1,`Merge the following files into a single file: ${w.map(b=>b.filePath).join(" ")}`);const k=w[0];return a(k===void 0||!k.isDefaultPageFile),k},s=o(!1),l=o(!0),c=m=>i.filter(w=>w.isRendererPageFile&&w.isEnv(m?"CLIENT_AND_SERVER":r))[0],u=c(!1),h=c(!0),f=i.filter(m=>m.isDefaultPageFile&&!m.isRendererPageFile&&(m.isEnv(r)||m.isEnv("CLIENT_AND_SERVER")));return[s,l,...f,u,h].filter(jn)}function dr(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,o=0;return(s,l)=>{if(!s.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&s.isDefaultPageFile)return i;{const c=s.isRendererPageFile,u=l.isRendererPageFile;if(!c&&u)return r;if(!u&&c)return i;a(c===u)}{const c=ze(t,s.filePath),u=ze(t,l.filePath);if(c<u)return r;if(u<c)return i;a(c===u)}{if(s.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&s.isEnv("CLIENT_AND_SERVER"))return i}return o}}function ze(e,t){D(e),D(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),o=r.split("/").length,s=i.split("/").length;return o+s}const hr="modulepreload",gr=function(e){return"/"+e},Ue={},Ve=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=gr(o),o in Ue)return;Ue[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":hr,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Ie={},Et={},pr={},ue={},mr=[],_t={},yr=!0,br=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,loadConfigValuesAll:async()=>(await Ve(()=>import("./pages_error.28a4bb83.js"),["assets/entries/pages_error.28a4bb83.js","assets/chunks/chunk-5250db91.js","assets/static/LayoutDefault.8d098874.css"])).default,configValues:{clientRouting:{definedAtInfo:{filePath:"/home/runner/work/bati/bati/node_modules/.pnpm/vike-solid@0.2.1_solid-js@1.8.1_vike@0.4.143_vite@4.4.11/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","clientRouting"]},valueSerialized:"true"},hydrationCanBeAborted:{definedAtInfo:{filePath:"/home/runner/work/bati/bati/node_modules/.pnpm/vike-solid@0.2.1_solid-js@1.8.1_vike@0.4.143_vite@4.4.11/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","hydrationCanBeAborted"]},valueSerialized:"true"},title:{definedAtInfo:{filePath:"/pages/+config.h.ts",fileExportPath:["default","title"]},valueSerialized:'"Bati"'},isClientSideRenderable:{definedAtInfo:null,valueSerialized:"true"},onBeforeRenderEnv:{definedAtInfo:null,valueSerialized:"null"}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:{routeString:"/",definedBy:"/pages/index/"},loadConfigValuesAll:async()=>(await Ve(()=>import("./pages_index.81aa621c.js"),["assets/entries/pages_index.81aa621c.js","assets/chunks/chunk-5250db91.js","assets/static/LayoutDefault.8d098874.css"])).default,configValues:{clientRouting:{definedAtInfo:{filePath:"/home/runner/work/bati/bati/node_modules/.pnpm/vike-solid@0.2.1_solid-js@1.8.1_vike@0.4.143_vite@4.4.11/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","clientRouting"]},valueSerialized:"true"},hydrationCanBeAborted:{definedAtInfo:{filePath:"/home/runner/work/bati/bati/node_modules/.pnpm/vike-solid@0.2.1_solid-js@1.8.1_vike@0.4.143_vite@4.4.11/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","hydrationCanBeAborted"]},valueSerialized:"true"},title:{definedAtInfo:{filePath:"/pages/+config.h.ts",fileExportPath:["default","title"]},valueSerialized:'"Bati"'},isClientSideRenderable:{definedAtInfo:null,valueSerialized:"true"},onBeforeRenderEnv:{definedAtInfo:null,valueSerialized:"null"}}}],vr={onBeforeRoute:null,onPrerenderStart:null},wr=Object.assign({}),Rr={...wr};Ie[".page"]=Rr;const Pr=Object.assign({}),Sr={...Pr};ue[".page"]=Sr;const Er=Object.assign({}),_r={...Er};ue[".page.server"]=_r;const $r=Object.assign({}),kr={...$r};Et[".page.route"]=kr;const Or=Object.assign({}),Cr={...Or};Ie[".page.client"]=Cr;const Ir=Object.assign({}),Fr={...Ir};ue[".page.client"]=Fr;const Tr=Object.assign({}),xr={...Tr};_t[".page.server"]=xr;const Ar=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:yr,neverLoaded:_t,pageConfigGlobal:vr,pageConfigs:br,pageFilesEager:Et,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:pr,pageFilesLazy:Ie,pageFilesList:mr},Symbol.toStringTag,{value:"Module"}));ur(Ar);function $t(){a(N())}function jr(){$t(),z()}function Lr(){$t()}function Ge(e){const t=e/1e3;if(t<120){const n=Ye(t);return`${n} second${Je(n)}`}{const n=t/60,r=Ye(n);return`${r} minute${Je(r)}`}}function Ye(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Je(e){return e==="1"?"":"s"}const Nr=O("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:r,timeoutWarn:i}=Wr(t);let o,s;const l=new Promise((f,v)=>{o=m=>{c(),f(m)},s=m=>{c(),v(m)}}),c=()=>{clearTimeout(u),clearTimeout(h)},u=setTimeout(()=>{R(!1,`The ${t}() hook defined by ${n} is taking more than ${Ge(i)}`,{onlyOnce:!1})},i),h=setTimeout(()=>{const f=at(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ge(r)}`);s(f)},r);return(async()=>{try{const f=await e();o(f)}catch(f){S(f)&&Nr.userHookErrors.set(f,{hookName:t,hookFilePath:n}),s(f)}})(),l}function Wr(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function q(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=M(t,"/");let o;return e!=null&&e.withoutHash?o=`${i}${n||""}`:o=`${i}${n||""}${r||""}`,a(o.startsWith("/")),o}Lr();function Br(){var r,i,o,s;const e=!!((i=(r=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:r.renderers)!=null&&i.size),t=!!((s=(o=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:o.rendererInterfaces)!=null&&s.size),n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function kt(e,t){const n=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?n(e).length===n(t).length&&n(e).every(o=>kt(e[o],t[o])):e===t}function Hr(e,t){return S(e)&&S(t)&&e.constructor===t.constructor&&kt({...e,stack:null},{...t,stack:null})&&t.message===t.message}function re(e){window.location.href=e}function Dr(e){return new Promise(t=>setTimeout(t,e))}function zr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}jr();const Me=O("navigationState.ts",{}),Ur=q(),Ot={markNavigationChange(){Me.navigationChanged=!0},get noNavigationChangeYet(){return!Me.navigationChanged&&this.isFirstUrl(q())},isFirstUrl(e){return e===Ur}};function Vr(){const e="vike_pageContext",t=document.getElementById(e);d(t,`The element #${e} (which vike automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;a(n);const r=le(n);return a(p(r,"_pageId","string")),y(r,{_hasPageContextFromServer:!0}),r}async function Gr(e,t){const r=Pt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(a(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(a(o),o.includes("onBeforeRender")))}}function Yr(e,t){if(!x(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Jr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Mr(e,t){if(a(e.length>0),e.length===1)return e[0];const n=e.slice(0,e.length-1),r=e[e.length-1];return n.join(", ")+` ${t} `+r}N()&&z();function Ct(e,t=!0){a(e.urlOriginal),"urlPathname"in e&&a(de(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:Ft,enumerable:t,configurable:!0}),"url"in e&&a(de(e,"url")),Object.defineProperty(e,"url",{get:Kr,enumerable:!1,configurable:!0}),"urlParsed"in e&&a(de(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:qr,enumerable:t,configurable:!0})}function It(e){let t=e._urlHandler;t||(t=o=>o);const n=e._urlRewrite??e.urlOriginal;a(n&&typeof n=="string");const r=t(n),i=e._baseServer;return a(i.startsWith("/")),M(r,i)}function Ft(){const{pathname:e}=It(this),t=e;return a(t.startsWith("/")),t}function Kr(){return R(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Ft.call(this)}function qr(){const e=It(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:s,hash:l,hashOriginal:c}=e,u=N(),h=v=>{R(u,`pageContext.urlParsed.${v} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:s,get hash(){return h("hash"),l},get hashOriginal(){return h("hashOriginal"),c},get hashString(){return R(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),h("hashString"),c},get searchString(){return R(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),s}};return Z(f,"hashString"),Z(f,"searchString"),u||(Z(f,"hash"),Z(f,"hashOriginal")),f}function Z(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function Xr(e){a(typeof e.urlOriginal=="string"),a(typeof e.urlPathname=="string"),a(x(e.urlParsed)),a(e.urlPathname===e.urlParsed.pathname)}const Tt="@",we=":";function Qr(e,t="Invalid"){let n=`${t} Route String ${j(e)}`;d(e!=="",`${n} (empty string): set it to ${j("/")} instead`),d(["/","*"].includes(e[0]),`${n}: it should start with ${j("/")} or ${j("*")}`),d(!e.includes("**"),`${n}: set it to ${j(e.split("**").join("*"))} instead`)}function Re(e,t){Qr(e);const n=xt(e),r=n.map(f=>f.param?"[^/]+":f.glob?f.isLastDir?"|/.*":".*":zn(f.static)).map(f=>`(${f})`).join(""),i=new RegExp(`^${r}/?$`),o=t.match(i);if(!o)return null;const s={},[l,...c]=o;let u=0;const h=n.filter(f=>f.glob).length>1;return n.forEach((f,v)=>{let m=c[v];if(f.param&&(s[f.param]=m),f.glob){const w=`*${h?++u:""}`;f.isLastDir&&(m=m.slice(1)),s[w]=m}}),{routeParams:s}}function xt(e){const t=[],n=i=>{const o=t[t.length-1];o!=null&&o.static?o.static+=i:t.push({static:i})},r=e.split("/");return r.forEach((i,o)=>{const s=o===0,l=o===r.length-1;Zr(i)?(R(!i.startsWith(we),`Outdated Route String ${j(e)}, use ${j(e.split(we).join(Tt))} instead`,{onlyOnce:!0}),s||n("/"),t.push({param:i.slice(1)})):i==="*"&&l&&e!=="*"&&e!=="/*"?t.push({glob:!0,isLastDir:!0}):(s||n("/"),i.split("*").forEach((c,u)=>{u!==0&&t.push({glob:!0}),c!==""&&n(c)}))}),t}function ee(e){const t=xt(e),n=l=>(l==null?void 0:l.split("/").filter(Boolean).length)||0;let r=0;for(const l of t){if(!l.static)break;r+=n(l.static)}const i=t.map(l=>n(l.static)).reduce((l,c)=>l+c,0),o=t.filter(l=>l.param).length,s=t.filter(l=>l.glob).length;return{numberOfStaticPartsBeginning:r,numberOfStaticParts:i,numberOfParams:o,numberOfGlobs:s}}function Zr(e){return e.startsWith(Tt)||e.startsWith(we)}function Ke(e){const n=Re(e,e);return a(n),Object.keys(n.routeParams).length===0}function j(e){return N()?`'${e}'`:(e===""&&(e="''"),g.cyan(e))}function ei(e){e.sort(ti).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(A(t=>t.routeType==="STRING"&&Ke(t.routeString)===!1)).sort(A(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(A(t=>t.routeType==="STRING"&&Ke(t.routeString)===!0)).sort(A(t=>t.routeType==="FILESYSTEM")).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function ti(e,t){{const n=e.precedence??0,r=t.precedence??0;if(n!==r)return n>r?-1:1}if(!t.routeString||!e.routeString)return 0;{const r=ne(i=>ee(i).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>ee(i).numberOfStaticParts)(e.routeString,t.routeString);if(r!==0)return r}{const r=Tn(i=>ee(i).numberOfGlobs)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>ee(i).numberOfParams)(e.routeString,t.routeString);if(r!==0)return r}return 0}async function ni(e,t,n){Xr(t);let r=e(t);if(At(r,`The Route Function ${n}`),r=await r,r===!1)return null;if(r===!0&&(r={}),d(x(r),`The Route Function ${n} should return a boolean or a plain JavaScript object (but it's ${g.cyan(`typeof result === ${JSON.stringify(typeof r)}`)} instead)`),"match"in r){const{match:s}=r;if(d(typeof s=="boolean",`The ${g.cyan("match")} value returned by the Route Function ${n} should be a boolean.`),!s)return null}let i=null;"precedence"in r&&(i=r.precedence,d(typeof i=="number",`The ${g.cyan("precedence")} value returned by the Route Function ${n} should be a number.`)),jt(r,`The ${g.cyan("routeParams")} object returned by the Route Function ${n} should`);const o=r.routeParams||{};return d(!("pageContext"in r),`Providing ${g.cyan("pageContext")} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),a(x(o)),Object.keys(r).forEach(s=>{d(s==="match"||s==="routeParams"||s==="precedence",`The Route Function ${n} returned an object with an unknown property ${g.cyan(s)} (the known properties are ${g.cyan("match")}, ${g.cyan("routeParams")}, and ${g.cyan("precedence")})`)}),{precedence:i,routeParams:o}}function At(e,t){R(!Ln(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function qe(){const e=g.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");R(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function jt(e,t){a(t.endsWith(" should")),p(e,"routeParams")&&(a(t.endsWith(" should")),d(x(e.routeParams),`${t} be a plain JavaScript object.`),d(Jr(e.routeParams),`${t} only hold string values.`))}function Lt(e,{hookName:t,hookFilePath:n}){if(e==null)return;a(!t.endsWith(")"));const r=`The ${g.cyan("pageContext")} object provided by the ${t}() hook defined by ${n}`;d(S(e),`${r} should be an object (but it's ${g.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),d(!("_objectCreatedByVike"in e),`${r} shouldn't be the whole ${g.cyan("pageContext")} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),R(!("_pageId"in e),`${r} sets ${g.cyan("pageContext._pageId")} which means that vike's routing is overriden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),d(!("is404"in e),`${r} sets ${g.cyan("pageContext.is404")} which is forbidden, use ${g.cyan("throw render()")} instead, see https://vike.dev/render`)}async function ri(e,t){let n=e.onBeforeRoute(t);At(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(d(n==null||Yr(n,["pageContext"])&&p(n,"pageContext"),`${r} should return ${g.cyan("null")}, ${g.cyan("undefined")}, or a plain JavaScript object ${g.cyan("{ pageContext: { /* ... */ } }")}`),n==null)return null;if(d(p(n,"pageContext","object"),`${r} returned ${g.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),p(n.pageContext,"_pageId")&&!p(n.pageContext,"_pageId","null")){const o=`${r} returned ${g.cyan("{ pageContext: { _pageId } }")} but ${g.cyan("_pageId")} should be`;d(p(n.pageContext,"_pageId","string"),`${o} a string or null`),d(t._allPageIds.includes(n.pageContext._pageId),`${o} ${Mr(t._allPageIds.map(s=>g.cyan(s)),"or")}`)}p(n.pageContext,"routeParams")&&jt(n.pageContext,`${r} returned ${g.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const i={};return p(n.pageContext,"url")&&(R(!1,`${r} returned ${g.cyan("{ pageContext: { url } }")} but ${g.cyan("pageContext.url")} has been renamed to ${g.cyan("pageContext.urlOriginal")}. Return ${g.cyan("{ pageContext: { urlOriginal } }")} instead. (See https://vike.dev/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),p(n.pageContext,"urlOriginal")&&(En(n.pageContext.urlOriginal,`${r} returned ${g.cyan("{ pageContext: { urlOriginal } }")} but ${g.cyan("urlOriginal")}`),y(i,{_urlOriginalPristine:t.urlOriginal})),Lt(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),y(i,n.pageContext),i}var te;function Xe(...e){var t;te||(te=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vike:routing")),te&&te(...e)}N()&&z();async function Nt(e){Ct(e),Xe("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const s=await ri(e._onBeforeRouteHook,e);if(s){if(y(t,s),p(t,"_pageId","string")||p(t,"_pageId","null"))return p(t,"routeParams")?a(p(t,"routeParams","object")):y(t,{routeParams:{}}),y(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};y(e,t)}}y(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;a(n.length>=0),d(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),d(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:r}=e;a(r.startsWith("/"));const i=[];await Promise.all(e._pageRoutes.map(async s=>{const{pageId:l,routeType:c}=s;if(s.routeType==="FILESYSTEM"){const{routeString:u}=s,h=Re(u,r);if(h){const{routeParams:f}=h;i.push({pageId:l,routeParams:f,routeString:u,routeType:c})}return}if(s.routeType==="STRING"){const{routeString:u}=s,h=Re(u,r);if(h){const{routeParams:f}=h;a(c==="STRING"),i.push({pageId:l,routeString:u,routeParams:f,routeType:c})}return}if(s.routeType==="FUNCTION"){const{routeFunction:u,routeDefinedAt:h}=s,f=await ni(u,e,h);if(f){const{routeParams:v,precedence:m}=f;i.push({pageId:l,precedence:m,routeParams:v,routeType:c})}return}a(!1)})),ei(i);const o=i[0];if(Xe(`Route matches for URL ${g.cyan(r)} (in precedence order):`,i),y(t,{_routeMatches:i}),!o)return y(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:s}=o;a(x(s)),y(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function G(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(a(r.exportValue===n),n===null)return null;const i=r.exportSource;return ii(n,{hookName:t,hookFilePath:i}),{hookFn:n,hookName:t,hookFilePath:i}}function he(e,t){G(e,t)}function ii(e,{hookName:t,hookFilePath:n}){a(t&&n),a(!t.endsWith(")")),d(W(e),`hook ${t}() defined by ${n} should be a function`)}function oi(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>An(n,r)).forEach(([n,r])=>{e[n]=r})}function si(e){ai(e),li(e)}function ai(e){Zn(e._pageId,e._pageConfigs)&&a(p(e,"is404","boolean"))}function li(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!S(t)){R(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const ui="not-serializable",ie=O("getPageContextProxyForUser.ts",{});function ci(e){return a([!0,!1].includes(e._hasPageContextFromServer)),a([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],i=JSON.stringify(n);return d(r!==ui,`pageContext[${i}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),fi(e,n,`pageContext[${i}] isn't available on the client-side because ${i} is missing in passToClient, see https://vike.dev/passToClient`),r}})}function fi(e,t,n){ie.prev===t||ie.prev==="__v_raw"||(gi(t),!(t in e)&&(hi(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&d(!1,n)))}const di=["then","toJSON"];function hi(e){return!!(di.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function gi(e){ie.prev=e,window.setTimeout(()=>{ie.prev=void 0},0)}function Fe(e,t){if(t){const i=e;a([!0,!1].includes(i.isHydration)),a([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;a(i.isHydration===!0),a(i.isBackwardNavigation===null)}a("config"in e),a("configEntries"in e),a("exports"in e),a("exportsAll"in e),a("pageExports"in e),a(S(e.pageExports));const n=e.exports.Page;y(e,{Page:n}),pi(e),oi(e);const r=ci(e);return si(e),r}function pi(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Wt(e,t){const n=e.filter(i=>i.pageId===t);return a(n.length<=1),n[0]??null}async function mi(e,t){if(e.isLoaded&&!t)return e;const n=await e.loadConfigValuesAll(),r=(i,o,s,l)=>{e.configValues[i]={value:o,definedAtInfo:{filePath:s,fileExportPath:[l]}},yi(o,i,s)};return n.forEach(i=>{if(i.isPlusFile){const{importFileExports:o,importFilePath:s}=i;i.configName!=="client"&&Bn(o,s),Object.entries(o).forEach(([l,c])=>{const u=l!=="default",h=u?l:i.configName;u&&h in e.configValues||r(h,c,s,l)})}else{const{configName:o,importFilePath:s,importFileExportValue:l,importFileExportName:c}=i;r(o,l,s,c)}}),y(e,{isLoaded:!0}),e}function yi(e,t,n){a(!n.includes("+config.")),d(e!==null,`Set ${g.cyan(t)} to ${g.cyan("null")} in a +config.h.js file instead of ${n}`)}const Bt="__whileFetchingAssets";async function oe(e,t,n){const r=Ce(e,n),i=Wt(t,n);let o;const s=!1;try{o=(await Promise.all([i&&mi(i,s),...r.map(w=>{var k;return(k=w.loadFile)==null?void 0:k.call(w)})]))[0]}catch(m){throw bi(m)&&Object.assign(m,{[Bt]:!0}),m}const{config:l,configEntries:c,exports:u,exportsAll:h,pageExports:f}=Kn(r,o);return{config:l,configEntries:c,exports:u,exportsAll:h,pageExports:f,_pageFilesLoaded:r}}function Te(e){return e?e[Bt]===!0:!1}function bi(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Qe=["urlPathname","urlParsed"],vi=["Page","pageExports","exports"];function Ht(e){[...vi,...Qe].forEach(n=>{n in e&&(Qe.includes(n)?(a(n.startsWith("url")),R(!1,`pageContext.${n} is already available in the browser when using Client Routing; adding '${n}' to passToClient has no effect`,{onlyOnce:!0})):R(!1,`pageContext.${n} is a built-in that cannot be overriden; adding '${n}' to passToClient has no effect`,{onlyOnce:!0}),delete e[n])})}const wi="/";function Ri(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:o}=M(e,wi);e.startsWith("/")&&a(e===`${r}${i||""}${o||""}`,{url:e});const s=r.endsWith("/");let l;return n&&r!=="/"?(s?l=F(r,0,-1):l=r,a(!l.endsWith("/"),{url:e}),a(l!=="")):l=r+(s?"":"/")+"index",a(l),l=l+t,`${l}${i||""}${o||""}`}const Pi=".pageContext.json",Si=!1;function Ei(e){return Ri(e,Pi,Si)}function _i(e,t,n){a(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const o of i)t.includes(o)||r.push(o);d(r.length===0,[n,"returned an object with following unknown keys:",Be(r)+".","Only following keys are allowed:",Be(t)+"."].join(" "))}function $i(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;d(x(e),`${n} should return a plain JavaScript object, ${g.cyan("undefined")}, or ${g.cyan("null")}`),_i(e,["pageContext"],n),e.pageContext&&Lt(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}async function ki(e,t){let n;if(e._pageFilesAll.length>0?(a(e._pageConfigs.length===0),n=Oi(e._pageId,e._pageFilesAll)):n=G(e,"guard"),!n)return;const r=n.hookFn;let i=e;const o=t(e);o&&(i=o);const s=await ce(()=>r(i),"guard",n.hookFilePath);d(s===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function Oi(e,t){const n=t.find(l=>l.pageId===e&&l.fileType===".page.route");if(!n)return null;const{filePath:r,fileExports:i}=n;a(i);const o=i.guard;if(!o)return null;const s=r;return d(W(o),`guard() defined by ${s} should be a function`),{hookFn:o,hookName:"guard",hookFilePath:s}}function Ci(e){const t=new Error("AbortRender");return y(t,{_pageContextAbort:e,[Dt]:!0}),t}const Dt="_isAbortError";function ge(e){return typeof e=="object"&&e!==null&&Dt in e}function Ii(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(a(p(e,"_abortCall","string")),!0):!1}function Fi(e,t,n){if(t)return;const r=n._urlRewrite??n.urlOriginal;a(r);const i=e._pageContextAbort._abortCall;$e(!1,`${g.cyan(i)} intercepted while rendering ${g.cyan(r)}`,{onlyOnce:!1})}function Ti(e){xi(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function xi(e){const t=[];e.forEach(n=>{const r=n._urlRewrite;{const i=t.indexOf(r);if(i!==-1){const o=[...t.slice(i),r].map(s=>`render('${s}')`).join(" => ");d(!1,`Infinite loop of render() calls: ${o}`)}}t.push(r)})}function Ai(e,t){const n=[e>0&&g.cyan("throw render('/some-url')"),t>0&&g.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");d(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const zt=O("router/getPageContext.ts",{});async function ji(e){if(e._isFirstRenderAttempt&&Ot.isFirstUrl(e.urlOriginal)){a(p(e,"_isFirstRenderAttempt","true"));const t=await Li(e);return Ze(t),t}else{a(p(e,"_isFirstRenderAttempt","false"));const t=await Wi(e);return Ze(t),t}}async function Li(e){const t=Vr();Ht(t),y(t,{isHydration:!0,_hasPageContextFromClient:!1}),y(t,await oe(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await Di(n)){const r=await Vt(n);y(t,r)}}return t}async function Ni(e){const t=vt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return y(n,await Ut({...e,...n},!0)),n}async function Wi(e){const t={isHydration:!1};return y(t,await zi(e)),y(t,await Ut({...e,...t},!1)),t}async function Ut(e,t){let n={};if(y(n,await oe(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await Bi({...e,...n})){const r=await Gi(e);if(!r._isError)y(n,r);else{const i=vt(e._pageFilesAll,e._pageConfigs);a(i),n={},y(n,{isHydration:!1,_pageId:i}),y(n,await oe(e._pageFilesAll,e._pageConfigs,n._pageId)),a(p(r,"is404","boolean")),a(p(r,"pageProps","object")),a(p(r.pageProps,"is404","boolean")),a(!("serverSideError"in r)),y(n,r)}}else y(n,{_hasPageContextFromServer:!1}),t||await ki({_hasPageContextFromClient:!1,...e,...n},r=>Fe(r,!0));{const r=await Vt({...e,...n});y(n,r)}return n}async function Vt(e){const t=G(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,r={_hasPageContextFromClient:!0},i=Fe({...e,...r},!0),o=await ce(()=>n(i),"onBeforeRender",t.hookFilePath);$i(o,t.hookFilePath);const s=o==null?void 0:o.pageContext;return y(r,s),r}async function Bi(e){return!!zt.pageContextInitHasClientData||await Hi(e)}function Ze(e){e._pageContextInitHasClientData&&(zt.pageContextInitHasClientData=!0)}async function Hi(e){var t;if(e._pageConfigs.length>0){const n=mt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:n}=await Gr(e._pageFilesAll,e._pageId);return n}}async function Di(e){var t;if(e._pageConfigs.length>0){const n=mt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="client-only"}else return!1}async function zi(e){const n=(await Nt(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw Ui(r),r}return a(p(n,"_pageId","string")),n}function Ui(e){y(e,{_is404:!0})}function Vi(e){return S(e)&&e._is404===!0}async function Gi(e){const t=e._urlRewrite??e._urlOriginalPristine??e.urlOriginal,n=Ei(t),r=await fetch(n);{const s=r.headers.get("content-type"),l="application/json",c=s&&s.includes(l);if(!c&&r.status===404)throw re(e.urlOriginal),Ji();d(c,`Wrong Content-Type for ${n}: it should be ${l} but it's ${s} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}const i=await r.text(),o=le(i);if(a(S(o)),"serverSideError"in o)throw at("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Ii(o))throw Ci(o);return a(p(o,"_pageId","string")),Ht(o),y(o,{_hasPageContextFromServer:!0}),o}function Yi(e){return S(e)&&!!e._alreadyServerSideRouted}function Ji(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Mi(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(ne(({filesystemRoot:o})=>o.length))[0];let i;if(r){const{filesystemRoot:o,urlRoot:s}=r,l={pageId:e,filesystemRoot:o,urlRoot:s};a(s.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),a(e.startsWith(o),l),o!=="/"?(a(!o.endsWith("/"),l),i=F(e,o.length,0)):i=e,a(i.startsWith("/"),l),i=s+(s.endsWith("/")?"":"/")+F(i,1,0)}else i=e;return a(i.startsWith("/")),i=i.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),a(!i.includes(".page.")),a(!i.endsWith(".")),i.endsWith("/index")&&(i=F(i,0,-6)),i===""&&(i="/"),a(i.startsWith("/")),a(!i.endsWith("/")||i==="/"),i}async function Ki(e,t,n,r){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var c;return(c=l.loadFile)==null?void 0:c.call(l)}));const{onBeforeRouteHook:i,filesystemRoots:o}=Xi(e,t,n);return{pageRoutes:qi(o,e,t,r),onBeforeRouteHook:i}}function qi(e,t,n,r){const i=[];let o=[...r];if(n.length>0){a(e===null);const s=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const c=l.pageId;o=Zi(o,c);let u=null;{const h="route",f=H(l,h);if(f){const v=Jn(l,h),m=f.value,w=bt(v);typeof m=="string"?u={pageId:c,comesFromV1PageConfig:s,routeString:m,routeDefinedAt:w,routeType:"STRING"}:(a(W(m)),H(l,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&qe(),u={pageId:c,comesFromV1PageConfig:s,routeFunction:m,routeDefinedAt:w,routeType:"FUNCTION"})}}if(!u){const{routeFilesystem:h}=l;a(h);const{routeString:f,definedBy:v}=h;a(h.routeString.startsWith("/")),u={pageId:c,routeFilesystemDefinedBy:v,comesFromV1PageConfig:s,routeString:f,routeDefinedAt:null,routeType:"FILESYSTEM"}}a(u),i.push(u)})}if(n.length===0){a(e);const s=!1;o.filter(l=>!K(l)).forEach(l=>{const c=t.find(u=>u.pageId===l&&u.fileType===".page.route");if(!c||!("default"in c.fileExports)){const u=Mi(l,e);a(u.startsWith("/")),a(!u.endsWith("/")||u==="/"),i.push({pageId:l,comesFromV1PageConfig:s,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:h}=c;if(a(h.default),p(h,"default","string")){const f=h.default;d(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:l,comesFromV1PageConfig:s,routeString:f,routeDefinedAt:u,routeType:"STRING"});return}if(p(h,"default","function")){const f=h.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in h&&qe(),i.push({pageId:l,comesFromV1PageConfig:s,routeFunction:f,routeDefinedAt:u,routeType:"FUNCTION"});return}d(!1,`The default export of ${u} should be a string or a function.`)}})}return i}function Xi(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.value;if(o){a(!n.onBeforeRoute.isComputed);const s=n.onBeforeRoute.definedAtInfo.filePath;return a(s),d(W(o),`The hook onBeforeRoute() defined by ${s} should be a function.`),{onBeforeRouteHook:{hookFilePath:s,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:s})=>{if(a(s),"onBeforeRoute"in s){d(p(s,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:l}=s;r={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in s&&(d(p(s,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),d(p(s,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${s.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:Qi(o),urlRoot:s.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function Qi(e){a(e.startsWith("/")),a(!e.endsWith("/"));const t=e.split("/"),n=F(t,0,-1).join("/")||"/";return a(n.startsWith("/")),a(!n.endsWith("/")||n==="/"),n}function Zi(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),a(e.length===n-1),e}function Gt(){const e="/";return a(eo(e)),e}function eo(e){return e.startsWith("/")}const pe=O("createPageContext.ts",{});async function Yt(e){pe.pageFilesData||(pe.pageFilesData=await cr(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=pe.pageFilesData,{pageRoutes:o,onBeforeRouteHook:s}=await Ki(t,r,i,n),l=Gt();a(Oe(l));const u={_objectCreatedByVike:!0,_urlHandler:null,_urlRewrite:null,_baseServer:l,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:s};return y(u,e),Ct(u),u}async function Jt(e){const t=await Yt({urlOriginal:e}),n=await Nt(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function V(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(a(e.fileExports,e.filePath),Object.keys(e.fileExports))}function to({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(i(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&V(l).includes("render")))}function i(){const s=e.some(l=>V(l).includes("render"));d(s,["No client-side `render()` hook found.","See https://vike.dev/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,c)=>` (${c+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>V(l).includes("clientRouting"))}}function no({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const o=t.filter(l=>!e.includes(l)),s=[];if(s.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),s.push(...o.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(l=>l.filePath);else{const l=ro(r);s.push({id:l,onlyAssets:!1,eagerlyImported:!1}),i=[l]}return{clientEntries:i,clientDependencies:s}}function ro(e){return e?"@@vike/dist/esm/client/client-routing-runtime/entry.js":"@@vike/dist/esm/client/server-routing-runtime/entry.js"}function io(e,t){let n=Ce(e,t);const r=Pt(e,t),{isHtmlOnly:i,isClientRouting:o}=to({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(c=>c.isEnv("CLIENT_ONLY")&&!V(c).includes("render")),n=so(n));const{clientEntries:s,clientDependencies:l}=no({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:o});return{isHtmlOnly:i,isClientRouting:o,clientEntries:s,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function oo(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=Ce(e,t);await Promise.all(r.map(async i=>{var o;a(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((o=i.loadExportNames)==null?void 0:o.call(i))}))}function so(e){const t=[];for(const n of e)if(t.push(n),V(n).includes("overrideDefaultPages"))break;return t}function ao(e,t,n){var r,i;if(e){const o=((r=H(e,"clientRouting","boolean"))==null?void 0:r.value)??!1;return{isClientSideRenderable:((i=H(e,"isClientSideRenderable","boolean"))==null?void 0:i.value)??!1,isClientRouting:o}}else{const{isHtmlOnly:o,isClientRouting:s}=io(t,n);return{isClientSideRenderable:!o,isClientRouting:s}}}async function Mt(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Jt(e);if(!t)return!1;await oo(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=Wt(r,t),{isClientSideRenderable:o,isClientRouting:s}=ao(i,n,t);return o&&s}function Kt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function qt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Kt(t)||uo(e)||co(t)||!fo(t)||!ke(t)||!lo(e))}function lo(e){if(Ao()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function uo(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function co(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function fo(e){const t=Gt();a(Oe(t));const{hasBaseServer:n}=M(e,t);return n}function ho(e,t){let n=go(e,t);return n==="viewport"&&!e._isProduction&&($e(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function go(e,t){{const n=po(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&d(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";d(x(n),r);const i=Object.keys(n);d(i.length===1&&i[0]==="when",r);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const s=o.toLowerCase();return R(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${s}' instead`,{onlyOnce:!0}),s}d(!1,r)}return"hover"}function po(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(d(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;d(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(a(!t),R(!1,r,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";d(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}a(!1)}const Xt=new Map;function Qt(e){const t=en(e);return Xt.has(t)}function Zt(e){const t=en(e);Xt.set(t,!0)}function en(e){return M(e,"/").pathname}z();const et=new Map;async function mo(e){if(d(ut(),"prefetch() only works with Client Routing, see https://vike.dev/prefetch",{showStackTrace:!0}),d(!Kt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),Qt(e))return;Zt(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Jt(e);if(t)try{await oe(n,r,t)}catch(i){if(Te(i))Pe(i,!0);else throw i}}function yo(e){Zt(e.urlPathname),[...document.getElementsByTagName("A")].forEach(n=>{if(et.has(n))return;et.set(n,!0);const r=n.getAttribute("href");if(qt(n)||(a(r),Qt(r)))return;const{prefetchStaticAssets:i}=ho(e,n);if(i&&(i==="hover"&&(n.addEventListener("mouseover",()=>{me(r)}),n.addEventListener("touchstart",()=>{me(r)},{passive:!0})),i==="viewport")){const o=new IntersectionObserver(s=>{s.forEach(l=>{l.isIntersecting&&(me(r),o.disconnect())})});o.observe(n)}})}async function me(e){try{if(!await Mt(e))return}catch{return}await mo(e)}async function bo(e,t){const n=Fe(e,t);let r=null,i;r=G(e,"render"),i="render";{const l=G(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=vo(e);if(e._pageConfigs.length>0)d(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vike.dev/onRenderClient`);else{const c=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+l:u="One of the following files should export a `render()` hook: "+c.map(h=>h.filePath).join(" "),d(!1,u)}}a(r);const o=r.hookFn;a(i);const s=await ce(()=>o(n),i,r.hookFilePath);d(s===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function vo(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}function tn(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=rn()),"scrollPosition"in e||(t=!0,e.scrollPosition=nn()),on(e),t&&Ae(e)}function xe(){const e=window.history.state||{};return on(e),e}function nn(){return{x:window.scrollX,y:window.scrollY}}function rn(){return new Date().getTime()}function tt(){const e=nn(),t=xe();Ae({...t,scrollPosition:e})}function wo(e,t){if(t)Ae(xe(),e);else{const n=rn();Ro({timestamp:n,scrollPosition:null},e)}}function on(e){if(a(S(e)),"timestamp"in e){const{timestamp:t}=e;a(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&a(p(t,"x","number")&&p(t,"y","number"))}}function Ae(e,t){window.history.replaceState(e,"",t??null)}function Ro(e,t){window.history.pushState(e,"",t)}z();const Po=O("navigate.ts",{});function So(e){Po.navigate=e}const _=O("useClientRouter.ts",{previousState:se()});Fo();tn();function Pe(e,t){a(Te(e)),_.clientRoutingIsDisabled=!0,t&&console.log(e),$e(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Eo(){Co(),_o((i,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),$o((i,o)=>{r({scrollTarget:i,isBackwardNavigation:o})}),So(async(i,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:s=!1}={})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,overwriteLastHistoryEntry:s,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,urlOriginal:o=q(),overwriteLastHistoryEntry:s=!1,isBackwardNavigation:l,checkClientSideRenderable:c,pageContextsFromRewrite:u=[],redirectCount:h=0}){var Ne;if(Ai(u.length,h),_.clientRoutingIsDisabled){re(o);return}const f=Ti(u);if(c){const $=f._urlRewrite??o;let E;try{E=await Mt($)}catch(B){if(ge(B))E=!0;else throw B}if(!E){re(o);return}}const v={urlOriginal:o,isBackwardNavigation:l,...f},m=++e;a(m>=1),m>1&&n===!1&&((Ne=_.onPageTransitionStart)==null||Ne.call(_,v),n=!0);let w=!1;const k=()=>m===1&&w===!1?!1:m!==e,b=await Yt(v);if(k())return;const U=m===1;y(b,{_isFirstRenderAttempt:U});let X,C,Le=!1;try{X=await ji(b)}catch($){Le=!0,C=$}if(Le){if(ge(C)||console.error(C),rt(C,b))return;if(ge(C)){const $=C;Fi(C,b._isProduction,b);const E=$._pageContextAbort;if(E._urlRewrite){await r({scrollTarget:i,urlOriginal:o,overwriteLastHistoryEntry:s,isBackwardNavigation:l,pageContextsFromRewrite:[...u,E],redirectCount:h});return}if(E._urlRedirect){const B=E._urlRedirect.url;if(B.startsWith("http")){window.location.href=B;return}else await r({scrollTarget:"scroll-to-top-or-hash",urlOriginal:B,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:u,redirectCount:h++});return}a(E.abortStatusCode),y(b,E),E.abortStatusCode===404&&y(b,{is404:!0})}else y(b,{is404:Vi(C)});try{X=await Ni(b)}catch($){if(rt($,b)||(U||setTimeout(()=>{window.location.pathname=o},0),Hr(C,$)))return;throw $}}if(a(X),y(b,X),he(b,"onPageTransitionStart"),_.onPageTransitionStart=b.exports.onPageTransitionStart,b.exports.hydrationCanBeAborted?w=!0:R(!Br(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/clientRouting",{onlyOnce:!0}),!k()&&(t&&await t,!k())){if(ko(o,s),Ot.markNavigationChange(),a(t===void 0),t=(async()=>{await bo(b,!0),yo(b)})(),await t,t=void 0,b._isFirstRenderAttempt){he(b,"onHydrationEnd");const{onHydrationEnd:$}=b.exports;if($){const E=b.exportsAll.onHydrationEnd[0].exportSource;a(E),await ce(()=>$(b),"onHydrationEnd",E)}}else m===e&&(b.exports.onPageTransitionEnd&&(he(b,"onPageTransitionEnd"),b.exports.onPageTransitionEnd(b)),n=!1);sn(i),je(),_.initialRenderIsDone=!0}}}function _o(e){document.addEventListener("click",t);return;function t(i){if(!n(i))return;const o=r(i.target);if(!o)return;const s=o.getAttribute("href");if(qt(o))return;a(s),i.preventDefault();const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(s,{keepScrollPosition:l})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:o}=i;if(!o)return null;i=o}return i}}function $o(e){window.addEventListener("popstate",()=>{const t=se(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===_.previousState.urlWithoutHash,i=!t.historyState.timestamp||!_.previousState.historyState.timestamp?null:t.historyState.timestamp<_.previousState.historyState.timestamp;_.previousState=t,r?window.history.state===null?(tn(),_.previousState=se()):sn(n):e(n,i)})}function ko(e,t){q()!==e&&(je(),wo(e,t),_.previousState=se())}function se(){return{urlWithoutHash:q({withoutHash:!0}),historyState:xe()}}function sn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Io();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else a("x"in e&&"y"in e),t=e;Oo(t)}function Oo(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await Dr(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function Co(){window.addEventListener("scroll",zr(tt,Math.ceil(1e3/3)),{passive:!0}),an(tt)}function Io(){let{hash:e}=window.location;return e===""?null:(a(e.startsWith("#")),e=e.slice(1),e)}function Fo(){nt(),an(nt),To(()=>_.initialRenderIsDone&&je())}function je(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function nt(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function an(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function To(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function rt(e,t){return!!(Yi(e)||xo(e,t))}function xo(e,t){if(!Te(e))return!1;if(t._isFirstRenderAttempt)throw Pe(e,!1),e;return Pe(e,!0),re(t.urlOriginal),!0}function Ao(){return!!window._disableAutomaticLinkInterception}z();const jo=!0;hn(jo);Eo();
