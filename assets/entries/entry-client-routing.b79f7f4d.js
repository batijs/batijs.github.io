function on(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function we(e,t){let n;{var i=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=i}return on()&&(n.stack=sn(n.stack,t)),n}function sn(e,t){if(!e)return e;const n=ln(e);let i=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:i<t&&an(o)?(i++,!1):!0).join(`
`)}function an(e){return e.startsWith("    at ")}function ln(e){return e.split(/\r?\n/)}function O(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function R(e){return typeof e=="object"&&e!==null}function Ee(e){return Array.from(new Set(e))}const T=O("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),un="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vite-plugin-ssr.com/client-runtimes-conflict",ot="Two vite-plugin-ssr client runtime instances are being loaded. Make sure your client-side bundles don't include vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)";function st(){{const e=Ee(T.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;dn(!1,t)}}T.checkSingleInstance&&T.instances.length>1&&me(!1,ot,{onlyOnce:!0,showStackTrace:!0})}function cn(e){me(T.isClientRouting!==!1,un,{onlyOnce:!0,showStackTrace:!0}),me(T.isClientRouting===void 0,ot,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),st()}function fn(e){T.instances.push(e),st()}function dn(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function me(e,t,{onlyOnce:n,showStackTrace:i}){if(e)return;const r=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=T,a=n===!0?r:n;if(o.has(a))return;o.add(a)}console.warn(i?new Error(r):r)}const gn="0.4.138",B={projectName:"vite-plugin-ssr",projectVersion:gn,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};fn(B.projectVersion);const at=new Proxy(e=>e,{get:()=>at}),C=at,_=O("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),hn=`[${B.npmPackageName}]`,pn=`[${B.npmPackageName}@${B.projectVersion}]`,Se=2;function s(e,t){var o;if(e)return;const n=(()=>{if(!t)return null;const a=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${B.projectName} maintainers; you can ignore this): ${a}`})();let i=[`You stumbled upon a bug in ${B.projectName}'s source code.`,`Go to ${B.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");i=G(i),i=ae(i,"Bug"),i=Y(i,!0);const r=we(i,Se);throw(o=_.onBeforeLog)==null||o.call(_),r}function d(e,t,{showStackTrace:n}={}){var r;if(e)return;t=G(t),t=ae(t,"Wrong Usage"),t=Y(t);const i=we(t,Se);throw n&&_.showStackTraceList.add(i),(r=_.onBeforeLog)==null||r.call(_),i}function lt(e){return e=G(e),e=ae(e,"Error"),e=Y(e),we(e,Se)}function P(e,t,{onlyOnce:n,showStackTrace:i}){var r;if(!e){if(t=G(t),t=ae(t,"Warning"),t=Y(t),n){const{alreadyLogged:o}=_,a=n===!0?t:n;if(o.has(a))return;o.add(a)}if((r=_.onBeforeLog)==null||r.call(_),i){const o=new Error(t);_.showStackTraceList.add(o),_.logger(o,"warn")}else _.logger(t,"warn")}}function Fe(e,t,{onlyOnce:n}){var i;if(!e){if(t=G(t),t=Y(t),n){const{alreadyLogged:r}=_,o=t;if(r.has(o))return;r.add(o)}(i=_.onBeforeLog)==null||i.call(_),_.logger(t,"info")}}function ae(e,t){let n=`[${t}]`;const i=t==="Warning"?"yellow":"red";return n=C.bold(C[i](n)),`${n}${e}`}function G(e){return e.startsWith("[")?e:` ${e}`}function Y(e,t=!1){return`${t?pn:hn}${e}`}function I(){return typeof window<"u"&&typeof window.scrollY=="number"}const ut=O("utils/assertRouterType.ts",{});function W(){mn(ct()),ut.isClientRouting=!0}function ct(){return ut.isClientRouting!==!1}function mn(e){d(I(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),P(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const yn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ft=["vue","svelte","marko","md","mdx"],vn=[...yn,...ft];function dt(e){const t=vn.some(n=>e.endsWith("."+n));return s(!bn(e)||t),t}function bn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function _n(e){return ft.some(t=>e.endsWith("."+t))}function A(e,t,n){return typeof e=="string"?Ne(e.split(""),t,n).join(""):Ne(e,t,n)}function Ne(e,t,n){const i=[];let r=t>=0?t:e.length+t;s(r>=0&&r<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(r===o||(r===e.length&&(r=0),r===o));){const a=e[r];s(a!==void 0),i.push(a),r++}return i}function Ce(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Pn(e,t){s(t.includes(" but ")),d(typeof e=="string",`${t} should be a string`),!Ce(e)&&(!e.startsWith("/")&&!e.includes(":")?d(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):d(!1,`${t} isn't a valid URL`))}function M(e,t){s(Ce(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...i]=e.split("#");s(n!==void 0);const r=["",...i].join("#")||null;s(r===null||r.startsWith("#"));const o=r===null?"":ye(r.slice(1)),[a,...l]=n.split("?");s(a!==void 0);const u=["",...l].join("?")||null;s(u===null||u.startsWith("?"),{url:e,searchOriginal:u});const c={},h={};Array.from(new URLSearchParams(u||"")).forEach(([y,H])=>{c[y]=H,h[y]=[...h[y]||[],H]});const{origin:f,pathnameResolved:v}=wn(a,t);s(f===null||f===ye(f),{origin:f}),s(v.startsWith("/"),{url:e,pathnameResolved:v}),s(f===null||e.startsWith(f),{url:e,origin:f});const p=a.slice((f||"").length);Fn(e,f,p,u,r);let{pathname:b,hasBaseServer:F}=Sn(v,t);return b=Rn(b),s(b.startsWith("/")),{origin:f,pathname:b,pathnameOriginal:p,hasBaseServer:F,search:c,searchAll:h,searchOriginal:u,hash:o,hashOriginal:r}}function ye(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function Rn(e){return e.split("/").map(t=>ye(t).split("/").join("%2F")).join("/")}function wn(e,t){var l;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let n=!1;const i="tauri://",r="http://";e.startsWith(i)&&(n=!0,e=r+e.slice(i.length));let o,a;try{const u=new URL(e);o=u.origin,a=u.pathname}catch{o=null;let c=typeof window<"u"&&((l=window==null?void 0:window.document)==null?void 0:l.baseURI);c=c||"http://fake.example.org"+t,a=new URL(e,c).pathname}return a||(a="/"),n&&(s(o),s(o.startsWith(r)),o=i+o.slice(r.length)),s(a.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:a}),s(a===a.split("?")[0].split("#")[0]),{origin:o,pathnameResolved:a}}function En(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function Sn(e,t){En(e),s(Oe(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let i=t;return t.endsWith("/")&&n===A(t,0,-1)&&(i=A(t,0,-1),s(n===i)),n.startsWith(i)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(i)),n=n.slice(i.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Oe(e){return e.startsWith("/")}function Fn(e,t,n,i,r){const o=Cn(t,n,i,r);s(e===o,{url:e,urlRecreated:o})}function Cn(e,t,n,i){return`${e||""}${t}${n||""}${i||""}`}function m(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function L(e){return e instanceof Function||typeof e=="function"}function ee(e){return(t,n)=>{const i=e(t),r=e(n);return i===r?0:i>r?-1:1}}function D(e){return(t,n)=>{const i=e(t),r=e(n);if(s([!0,!1,null].includes(i)),s([!0,!1,null].includes(r)),i===r)return 0;if(i===!0||r===!1)return-1;if(r===!0||i===!1)return 1;s(!1)}}function On(e){return D(t=>{const n=e(t);return n===null?null:!n})}function g(e,t,n="unknown"){if(!R(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const i=e[t];return n==="array"?Array.isArray(i):n==="object"?R(i):n==="string[]"?Array.isArray(i)&&i.every(r=>typeof r=="string"):n==="function"?L(i):Array.isArray(n)?typeof i=="string"&&n.includes(i):n==="null"?i===null:n==="undefined"?i===void 0:n==="true"?i===!0:n==="false"?i===!1:typeof i===n}function j(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function kn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const xn=e=>e!=null;function We(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function gt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes("\\"),t(e))}function fe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function Tn(e){return typeof e=="object"&&e!==null&&"then"in e&&L(e.then)}const An=["$$registrations","_rerender_only"],$n=[".md",".mdx"];function jn(e,t){In(e,t,!0)}function In(e,t,n){const r=Object.keys(e).filter(l=>!An.includes(l)),o=r.filter(l=>l!=="default"),a=r.includes("default");if(o.length===0){if(a)return;s(r.length===0),d(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!$n.some(l=>t.endsWith(l))){const l=o.join(", ");n?P(o.length===0,`${t} should only have a default export: remove \`export { ${l} }\``,{onlyOnce:!0}):P(o.length===0,`${t} replace \`export { ${l} }\` with \`export default { ${l} }\``,{onlyOnce:!0})}}function Ln(e){return Object.entries(e)}const Dn=["clientRouting"];function Bn(e){Dn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;d(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),d(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const ht=["render","clientRouting","prerender","doNotPrerender"];function Nn(e,t){d(!ht.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Wn(e,t){const n={},i={},r={};if(e.forEach(l=>{Hn(l).forEach(({exportName:c,exportValue:h,isFromDefaultExport:f})=>{s(c!=="default"),r[c]=r[c]??[],r[c].push({exportValue:h,exportSource:`${l.filePath} > ${f?`\`export default { ${c} }\``:`\`export { ${c} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t){const{configValues:l}=t;Ln(l).forEach(([u,c])=>{const h=t.configElements[u];s(h);const{configDefinedByFile:f,configDefinedAt:v}=h;s(f),i[u]=i[u]??c,n[u]=n[u]??[],s(n[u].length===0),n[u].push({configValue:c,configDefinedAt:v,configDefinedByFile:f});const p=u;r[p]=r[p]??[],r[p].push({exportValue:c,exportSource:v,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})})}const o=Vn(),a={};return Object.entries(r).forEach(([l,u])=>{u.forEach(({exportValue:c,_fileType:h,_isFromDefaultExport:f})=>{a[l]=a[l]??c,h===".page"&&!f&&(l in o||(o[l]=c))})}),s(!("default"in a)),s(!("default"in r)),{config:i,configEntries:n,exports:a,exportsAll:r,pageExports:o}}function Hn(e){const{filePath:t,fileExports:n}=e;s(n),s(dt(t));const i=[];return Object.entries(n).sort(On(([r])=>r==="default")).forEach(([r,o])=>{let a=r==="default";if(a)if(_n(t))r="Page";else{d(R(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([l,u])=>{Nn(l,t),i.push({exportName:l,exportValue:u,isFromDefaultExport:a})});return}i.push({exportName:r,exportValue:o,isFromDefaultExport:a})}),i.forEach(({exportName:r,isFromDefaultExport:o})=>{s(!(o&&ht.includes(r)))}),i}function Vn(){return new Proxy({},{get(...e){return I()||P(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function zn(e){const t=".page.",n=A(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function N(e){gt(e)}function pt(e,t){if(t.length>0){const i=t.filter(r=>r.isErrorPage);return i.length===0?null:(d(i.length===1,"Only one error page can be defined"),i[0].pageId)}const n=Ee(e.map(({pageId:i})=>i).filter(i=>J(i)));if(d(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const i=n[0];return s(i),i}return null}function J(e,t){return s(!e.includes("\\")),e.includes("/_error")}function Un(e,t){if(t.length>0){const n=t.find(i=>i.pageId===e);return s(n),n.isErrorPage}else return J(e)}const Gn=[".page",".page.server",".page.route",".page.client",".css"];function Yn(e){if(gt(e),e.endsWith(".css"))return".css";s(dt(e),e);const n=e.split("/").slice(-1)[0].split("."),i=n.slice(-3)[0],r=n.slice(-2)[0];if(r==="page")return".page";if(s(i==="page",e),r==="server")return".page.server";if(r==="client")return".page.client";if(r==="route")return".page.route";s(!1,e)}function mt(e){const t=o=>r.pageId===o||r.isDefaultPageFile&&(He(r.filePath)||Mn(o,r.filePath)),n=Yn(e),r={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:ve(e),isRendererPageFile:n!==".css"&&ve(e)&&He(e),isErrorPageFile:J(e),pageId:zn(e)};return r}function ve(e){return N(e),J(e)?!1:e.includes("/_default")}function He(e){return N(e),e.includes("/renderer/")}function Mn(e,t){N(e),N(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(ve(t));const n=A(t.split("/"),0,-1).filter(i=>i!=="_default").join("/");return e.startsWith(n)}function Jn(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(R(t)),s(g(t,"pageId","string")),s(g(t,"routeFilesystem","string")||g(t,"routeFilesystem","null")),s(g(t,"routeFilesystemDefinedBy","string")||g(t,"routeFilesystemDefinedBy","null")),s(g(t,"loadCodeFiles","function")),s(g(t,"isErrorPage","boolean")),s(g(t,"configElements","object")),yt(t.configElements,!1)})}function Kn(e){yt(e,!0)}function yt(e,t){s(R(e)),Object.entries(e).forEach(([n,i])=>{if(s(R(i)||i===null),i===null){s(t);return}s(g(i,"configDefinedAt","string")),s(g(i,"plusConfigFilePath","string")||g(i,"plusConfigFilePath","null")),s(g(i,"configEnv","string")),s(g(i,"codeFilePath","string")||g(i,"codeFilePath","null")),s(g(i,"codeFileExport","string")||g(i,"codeFileExport","null")),s(g(i,"configValueSerialized","string")||g(i,"configValueSerialized","undefined")),(t||n==="route")&&s(g(i,"configValue")||g(i,"configValueSerialized"))})}const qn=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],i=t[2];return new RegExp(n,i)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function le(e){const t=JSON.parse(e);return vt(t)}function vt(e){return typeof e=="string"?Xn(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=vt(n)}),e)}function Xn(e){for(const{match:t,deserialize:n}of qn)if(t(e))return n(e,le);return e}function Qn(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,i])=>{Zn(i),n==="route"&&ei(i)})})}function Zn(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=le(t))}function ei(e){s(g(e,"configValue"));const{configValue:t}=e,n=typeof t;d(n==="string"||L(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function ti(e){s(g(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(g(e,"pageFilesLazy","object")),s(g(e,"pageFilesEager","object")),s(g(e,"pageFilesExportNamesLazy","object")),s(g(e,"pageFilesExportNamesEager","object")),s(g(e.pageFilesLazy,".page")),s(g(e.pageFilesLazy,".page.client")||g(e.pageFilesLazy,".page.server")),s(g(e,"pageFilesList","string[]")),s(g(e,"pageConfigs")),s(g(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;Jn(t),Qn(t),Kn(n);const i={};X(e.pageFilesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=i[o]=i[o]??a;const u=l;Ve(u),a.loadFile=async()=>{"fileExports"in a||(a.fileExports=await u(),Bn(a))}}),X(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=i[o]=i[o]??a;const u=l;Ve(u),a.loadExportNames=async()=>{if(!("exportNames"in a)){const c=await u();d("exportNames"in c,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(g(c,"exportNames","string[]"),a.filePath),a.exportNames=c.exportNames}}}),X(e.pageFilesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=i[o]=i[o]??a;const u=l;s(R(u)),a.fileExports=u}),X(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=i[o]=i[o]??a;const u=l;s(R(u)),s(g(u,"exportNames","string[]"),a.filePath),a.exportNames=u.exportNames}),e.pageFilesList.forEach(o=>{i[o]=i[o]??mt(o)});const r=Object.values(i);return r.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:r,pageConfigs:t,pageConfigGlobal:n}}function X(e){const t=[];return Object.entries(e).forEach(([n,i])=>{s(Gn.includes(n)),s(R(i)),Object.entries(i).forEach(([r,o])=>{const a=mt(r);s(a.fileType===n),t.push({filePath:r,pageFile:a,globValue:o})})}),t}function Ve(e){s(L(e))}const $=O("setPageFiles.ts",{});function ni(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:i}=ti(e);$.pageFilesAll=t,$.pageConfigs=n,$.pageConfigGlobal=i}async function ii(e,t){e?(s(!$.pageFilesGetter),s(t===void 0)):(s($.pageFilesGetter),s(typeof t=="boolean"),(!$.pageFilesAll||!t)&&await $.pageFilesGetter());const{pageFilesAll:n,pageConfigs:i,pageConfigGlobal:r}=$;s(n&&i&&r);const o=ri(n,i);return{pageFilesAll:n,allPageIds:o,pageConfigs:i,pageConfigGlobal:r}}function ri(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),i=Ee(n),r=t.map(o=>o.pageId);return[...i,...r]}function ke(e,t){return _t(e,t,!0)}function bt(e,t){return _t(e,t,!1)}function _t(e,t,n){const i=n?"CLIENT_ONLY":"SERVER_ONLY",r=e.filter(p=>p.isRelevant(t)&&p.fileType!==".page.route").sort(oi(n,t)),o=p=>{const b=r.filter(y=>y.pageId===t&&y.isEnv(p?"CLIENT_AND_SERVER":i));d(b.length<=1,`Merge the following files into a single file: ${b.map(y=>y.filePath).join(" ")}`);const F=b[0];return s(F===void 0||!F.isDefaultPageFile),F},a=o(!1),l=o(!0),u=p=>r.filter(b=>b.isRendererPageFile&&b.isEnv(p?"CLIENT_AND_SERVER":i))[0],c=u(!1),h=u(!0),f=r.filter(p=>p.isDefaultPageFile&&!p.isRendererPageFile&&(p.isEnv(i)||p.isEnv("CLIENT_AND_SERVER")));return[a,l,...f,c,h].filter(xn)}function oi(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",i=-1,r=1,o=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return i;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return r;{const u=a.isRendererPageFile,c=l.isRendererPageFile;if(!u&&c)return i;if(!c&&u)return r;s(u===c)}{const u=ze(t,a.filePath),c=ze(t,l.filePath);if(u<c)return i;if(c<u)return r;s(u===c)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return i;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return r}return o}}function ze(e,t){N(e),N(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const i=e.slice(n),r=t.slice(n),o=i.split("/").length,a=r.split("/").length;return o+a}const si="modulepreload",ai=function(e){return"/"+e},Ue={},Ge=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=ai(o),o in Ue)return;Ue[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":si,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},xe={},Pt={},li={},ue={},ui=[],Rt={},ci=!0,fi=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await Ge(()=>import("./pages_error.5feff6b4.js"),["assets/entries/pages_error.5feff6b4.js","assets/chunks/chunk-e52eb3ef.js","assets/static/LayoutDefault.3da68f6a.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/_error/+Page.tsx",configDefinedByFile:"/pages/_error/+Page.tsx",codeFilePath:"/pages/_error/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { passToClient }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { clientRouting }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { hydrationCanBeAborted }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"\x1B[1m/pages/+config.h.ts\x1B[22m > \x1B[36mexport default { title }\x1B[39m",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"\x1B[1m/pages/+config.h.ts\x1B[22m > \x1B[36mexport default { description }\x1B[39m",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await Ge(()=>import("./pages_index.b6e4798d.js"),["assets/entries/pages_index.b6e4798d.js","assets/chunks/chunk-e52eb3ef.js","assets/static/LayoutDefault.3da68f6a.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.tsx",configDefinedByFile:"/pages/index/+Page.tsx",codeFilePath:"/pages/index/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { passToClient }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { clientRouting }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"\x1B[1m/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js\x1B[22m > \x1B[36mexport default { hydrationCanBeAborted }\x1B[39m",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.138/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"\x1B[1m/pages/+config.h.ts\x1B[22m > \x1B[36mexport default { title }\x1B[39m",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"\x1B[1m/pages/+config.h.ts\x1B[22m > \x1B[36mexport default { description }\x1B[39m",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}}],di={onBeforeRoute:null},gi=Object.assign({}),hi={...gi};xe[".page"]=hi;const pi=Object.assign({}),mi={...pi};ue[".page"]=mi;const yi=Object.assign({}),vi={...yi};ue[".page.server"]=vi;const bi=Object.assign({}),_i={...bi};Pt[".page.route"]=_i;const Pi=Object.assign({}),Ri={...Pi};xe[".page.client"]=Ri;const wi=Object.assign({}),Ei={...wi};ue[".page.client"]=Ei;const Si=Object.assign({}),Fi={...Si};Rt[".page.server"]=Fi;const Ci=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:ci,neverLoaded:Rt,pageConfigGlobal:di,pageConfigs:fi,pageFilesEager:Pt,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:li,pageFilesLazy:xe,pageFilesList:ui},Symbol.toStringTag,{value:"Module"}));ni(Ci);function wt(){s(I())}function Oi(){wt(),W()}function ki(){wt()}function Ye(e){const t=e/1e3;if(t<120){const n=Me(t);return`${n} second${Je(n)}`}{const n=t/60,i=Me(n);return`${i} minute${Je(i)}`}}function Me(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Je(e){return e==="1"?"":"s"}const xi=O("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:i,timeoutWarn:r}=Ti(t);let o,a;const l=new Promise((f,v)=>{o=p=>{u(),f(p)},a=p=>{u(),v(p)}}),u=()=>{clearTimeout(c),clearTimeout(h)},c=setTimeout(()=>{P(!1,`The ${t}() hook defined by ${n} is taking more than ${Ye(r)}`,{onlyOnce:!1})},r),h=setTimeout(()=>{const f=lt(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ye(i)}`);a(f)},i);return(async()=>{try{const f=await e();o(f)}catch(f){R(f)&&xi.userHookErrors.set(f,{hookName:t,hookFilePath:n}),a(f)}})(),l}function Ti(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function K(e){const t=window.location.href,{searchOriginal:n,hashOriginal:i,pathname:r}=M(t,"/");let o;return e!=null&&e.withoutHash?o=`${r}${n||""}`:o=`${r}${n||""}${i||""}`,s(o.startsWith("/")),o}ki();function Ai(){var i,r,o,a;const e=!!((r=(i=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:i.renderers)!=null&&r.size),t=!!((a=(o=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:o.rendererInterfaces)!=null&&a.size),n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function Et(e,t){const n=Object.keys,i=typeof e;return e&&t&&i==="object"&&i===typeof t?n(e).length===n(t).length&&n(e).every(o=>Et(e[o],t[o])):e===t}function $i(e,t){return R(e)&&R(t)&&e.constructor===t.constructor&&Et({...e,stack:null},{...t,stack:null})&&t.message===t.message}function ne(e){window.location.href=e}function ji(e){return new Promise(t=>setTimeout(t,e))}function Ii(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}Oi();const Ke=O("navigationState.ts",{}),Li=K(),St={markNavigationChange(){Ke.navigationChanged=!0},get noNavigationChangeYet(){return!Ke.navigationChanged&&this.isFirstUrl(K())},isFirstUrl(e){return e===Li}};function Di(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);d(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const i=le(n);return s(g(i,"_pageId","string")),m(i,{_hasPageContextFromServer:!0}),i}async function Bi(e,t){const i=bt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(i.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:i.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Ni(e,t){if(!j(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Wi(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}I()&&W();function Ft(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(fe(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:Ot,enumerable:t,configurable:!0}),"url"in e&&s(fe(e,"url")),Object.defineProperty(e,"url",{get:Hi,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(fe(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Vi,enumerable:t,configurable:!0})}function Ct(e){let t=e._urlHandler;t||(t=o=>o);const n=e._urlRewrite??e.urlOriginal;s(n&&typeof n=="string");const i=t(n),r=e._baseServer;return s(r.startsWith("/")),M(i,r)}function Ot(){const{pathname:e}=Ct(this),t=e;return s(t.startsWith("/")),t}function Hi(){return P(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Ot.call(this)}function Vi(){const e=Ct(this),{origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:a,hash:l,hashOriginal:u}=e,c=I(),h=v=>{P(c,`pageContext.urlParsed.${v} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:a,get hash(){return h("hash"),l},get hashOriginal(){return h("hashOriginal"),u},get hashString(){return P(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),h("hashString"),u},get searchString(){return P(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),a}};return Q(f,"hashString"),Q(f,"searchString"),c||(Q(f,"hash"),Q(f,"hashOriginal")),f}function Q(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function zi(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(j(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const kt="@",be=":";function Ui(e,t="Invalid"){s(t.endsWith("Invalid")||t.endsWith("invalid")),d(e!=="",`${t} Route String ${x(e)} (empty string): set it to ${x("/")} instead`),d(e.startsWith("/")||e==="*",`${t} Route String ${x(e)}: Route Strings should start with a leading slash ${x("/")} (or be ${x("*")})`)}function _e(e,t){Ui(e),s(t.startsWith("/"));const n=e.split("/"),i=t.split("/"),r={};Gi(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,i.length);o++){const a=n[o],l=i[o];if(a==="*")return r["*"]=i.slice(Math.max(1,o)).join("/"),{routeParams:r};if(a&&te(a)){if(P(!a.startsWith(be),`Outdated Route String \`${e}\`, use \`${e.split(be).join(kt)}\` instead.`,{onlyOnce:!0}),!l)return null;r[a.slice(1)]=l}else if((a||"")!==(l||""))return null}return{routeParams:r}}function Gi(e){const t=e.split("*").length-1;d(t<=1,`Invalid Route String ${x(e)}: Route Strings aren't allowed to contain more than one glob ${x("*")}`),d(t===0||t===1&&e.endsWith("*"),`Invalid Route String ${x(e)}: make sure it ends with ${x("*")}`)}function V(e){const t=e.split("/").filter(a=>a!==""&&a!=="*");let n=0;for(const a of t){if(te(a))break;n++}const i=t.filter(a=>!te(a)).length,r=t.filter(a=>te(a)).length,o=e.endsWith("*");return{numberOfParameterSegments:r,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:i,isCatchAll:o}}function te(e){return e.startsWith(kt)||e.startsWith(be)}function qe(e){const n=_e(e,e);return s(n),Object.keys(n.routeParams).length===0}function x(e){return I()?`'${e}'`:(e===""&&(e="''"),C.bold(e))}function Yi(e){e.sort(Mi).sort(D(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(D(t=>t.routeType==="STRING"&&qe(t.routeString)===!1)).sort(D(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(D(t=>t.routeType==="STRING"&&qe(t.routeString)===!0)).sort(D(t=>t.routeType==="FILESYSTEM")).sort(D(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Mi(e,t){{const n=e.precedence??0,i=t.precedence??0;if(n!==i)return n>i?-1:1}if(!t.routeString||!e.routeString)return 0;{const i=ee(r=>V(r).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(i!==0)return i}{const i=ee(r=>V(r).numberOfStaticSegements)(e.routeString,t.routeString);if(i!==0)return i}{const i=ee(r=>V(r).numberOfParameterSegments)(e.routeString,t.routeString);if(i!==0)return i}{if(V(t.routeString).isCatchAll)return-1;if(V(e.routeString).isCatchAll)return 1}return 0}async function Ji(e,t,n){zi(t);let i=e(t);if(xt(i,`The Route Function ${n}`),i=await i,i===!1)return null;if(i===!0&&(i={}),d(j(i),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${g(i,"constructor")?i.constructor:i}\`.`),"match"in i){const{match:a}=i;if(d(typeof a=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!a)return null}let r=null;"precedence"in i&&(r=i.precedence,d(typeof r=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),Tt(i,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=i.routeParams||{};return d(!("pageContext"in i),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(j(o)),Object.keys(i).forEach(a=>{d(a==="match"||a==="routeParams"||a==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${a} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:r,routeParams:o}}function xt(e,t){P(!Tn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function Tt(e,t){s(t.endsWith(" should")),g(e,"routeParams")&&(s(t.endsWith(" should")),d(j(e.routeParams),`${t} be a plain JavaScript object.`),d(Wi(e.routeParams),`${t} only hold string values.`))}function At(e,{hookName:t,hookFilePath:n}){if(e==null)return;s(!t.endsWith(")"));const i=`The \`pageContext\` object provided by the ${t}() hook defined by ${n}`;d(R(e),`${i} should be an object instead of \`${typeof e}\``),d(!("_objectCreatedByVitePluginSsr"in e),`${i} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),P(!("_pageId"in e),`${i} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),d(!("is404"in e),`${i} sets \`pageContext.is404\` which is forbidden, use \`throw render()\` instead, see https://vite-plugin-ssr.com/render`)}async function Ki(e,t){let n=e.onBeforeRoute(t);xt(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const i=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(d(n==null||Ni(n,["pageContext"])&&g(n,"pageContext"),`${i} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(d(g(n,"pageContext","object"),`${i} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),g(n.pageContext,"_pageId")&&!g(n.pageContext,"_pageId","null")){const o=`${i} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;d(g(n.pageContext,"_pageId","string"),`${o} a string or null`),d(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(a=>`'${a}'`).join(", ")}]\`.`)}g(n.pageContext,"routeParams")&&Tt(n.pageContext,`${i} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const r={};return g(n.pageContext,"url")&&(P(!1,`${i} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),g(n.pageContext,"urlOriginal")&&(Pn(n.pageContext.urlOriginal,`${i} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),m(r,{_urlOriginalPristine:t.urlOriginal})),At(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),m(r,n.pageContext),r}var Z;function Xe(...e){var t;Z||(Z=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vps:routing")),Z&&Z(...e)}I()&&W();async function $t(e){Ft(e),Xe("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const a=await Ki(e._onBeforeRouteHook,e);if(a){if(m(t,a),g(t,"_pageId","string")||g(t,"_pageId","null"))return g(t,"routeParams")?s(g(t,"routeParams","object")):m(t,{routeParams:{}}),m(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};m(e,t)}}m(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),d(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),d(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:i}=e;s(i.startsWith("/"));const r=[];await Promise.all(e._pageRoutes.map(async a=>{const{pageId:l,routeType:u}=a;if(a.routeType==="FILESYSTEM"){const{routeString:c}=a,h=_e(c,i);if(h){const{routeParams:f}=h;r.push({pageId:l,routeParams:f,routeString:c,routeType:u})}return}if(a.routeType==="STRING"){const{routeString:c}=a,h=_e(c,i);if(h){const{routeParams:f}=h;s(u==="STRING"),r.push({pageId:l,routeString:c,routeParams:f,routeType:u})}return}if(a.routeType==="FUNCTION"){const{routeFunction:c,routeDefinedAt:h}=a,f=await Ji(c,e,h);if(f){const{routeParams:v,precedence:p}=f;r.push({pageId:l,precedence:p,routeParams:v,routeType:u})}return}s(!1)})),Yi(r);const o=r[0];if(Xe(`Route matches for URL \`${i}\` (in precedence order):`,r),m(t,{_routeMatches:r}),!o)return m(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:a}=o;s(j(a)),m(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function U(e,t){if(!(t in e.exports))return null;const n=e.exports[t],i=e.exportsAll[t][0];if(s(i.exportValue===n),n===null)return null;const r=i.exportSource;return s(r),s(!t.endsWith(")")),d(L(n),`hook ${t}() defined by ${r} should be a function`),{hookFn:n,hookName:t,hookFilePath:r}}function de(e,t){U(e,t)}function qi(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[i])=>kn(n,i)).forEach(([n,i])=>{e[n]=i})}function Xi(e){Qi(e),Zi(e)}function Qi(e){Un(e._pageId,e._pageConfigs)&&s(g(e,"is404","boolean"))}function Zi(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!R(t)){P(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const er="not-serializable",ie=O("getPageContextProxyForUser.ts",{});function tr(e){return s([!0,!1].includes(e._hasPageContextFromServer)),s([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const i=e[n],r=JSON.stringify(n);return d(i!==er,`pageContext[${r}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),nr(e,n,`pageContext[${r}] isn't available on the client-side because ${r} is missing in passToClient, see https://vite-plugin-ssr.com/passToClient`),i}})}function nr(e,t,n){ie.prev===t||ie.prev==="__v_raw"||(or(t),!(t in e)&&(rr(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&d(!1,n)))}const ir=["then","toJSON"];function rr(e){return!!(ir.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function or(e){ie.prev=e,window.setTimeout(()=>{ie.prev=void 0},0)}function Te(e,t){if(t){const r=e;s([!0,!1].includes(r.isHydration)),s([!0,!1,null].includes(r.isBackwardNavigation))}else{const r=e;s(r.isHydration===!0),s(r.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(R(e.pageExports));const n=e.exports.Page;m(e,{Page:n}),sr(e),qi(e);const i=tr(e);return Xi(e),i}function sr(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function jt(e,t){const n=e.filter(r=>r.pageId===t);return s(n.length<=1),n[0]??null}async function ar(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(r=>{const{configName:o,codeFilePath:a}=r;if(r.isPlusFile){const{codeFileExports:l}=r;o!=="client"&&jn(l,a),Object.entries(l).forEach(([u,c])=>{const h=u!=="default",f=h?u:r.configName,v=c;if(n[f]=v,Qe(v,f,a),h){const p=e.configElements[r.configName];s(p),e.configElements[f]={configValue:v,codeFileExport:u,codeFilePath:a,configDefinedByFile:a,configDefinedAt:`${C.bold(a)} > ${C.cyan(`export { ${u} }`)}`,configEnv:p.configEnv,plusConfigFilePath:null}}})}else{const l=r.codeFileExportValue;n[o]=l,Qe(l,o,a)}}),Object.entries(e.configElements).map(([r,o])=>{o.codeFilePath||(n[r]=o.configValue)}),m(e,{configValues:n})),e}function Qe(e,t,n){s(!n.includes("+config.")),d(e!==null,`Set ${C.cyan(t)} to ${C.cyan("null")} in a ${C.bold("+config.js")} file instead of ${C.bold(n)}`)}const It="__whileFetchingAssets";async function re(e,t,n){const i=ke(e,n),r=jt(t,n);let o;const a=!1;try{o=(await Promise.all([r&&ar(r,a),...i.map(b=>{var F;return(F=b.loadFile)==null?void 0:F.call(b)})]))[0]}catch(p){throw lr(p)&&Object.assign(p,{[It]:!0}),p}const{config:l,configEntries:u,exports:c,exportsAll:h,pageExports:f}=Wn(i,o);return{config:l,configEntries:u,exports:c,exportsAll:h,pageExports:f,_pageFilesLoaded:i}}function Ae(e){return e?e[It]===!0:!1}function lr(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Ze=["urlPathname","urlParsed"],ur=["Page","pageExports","exports"];function Lt(e){[...ur,...Ze].forEach(n=>{n in e&&(Ze.includes(n)?(s(n.startsWith("url")),P(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):P(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}const cr="/";function fr(e,t,n){const{pathnameOriginal:i,searchOriginal:r,hashOriginal:o}=M(e,cr);e.startsWith("/")&&s(e===`${i}${r||""}${o||""}`,{url:e});const a=i.endsWith("/");let l;return n&&i!=="/"?(a?l=A(i,0,-1):l=i,s(!l.endsWith("/"),{url:e}),s(l!=="")):l=i+(a?"":"/")+"index",s(l),l=l+t,`${l}${r||""}${o||""}`}const dr=".pageContext.json",gr=!1;function hr(e){return fr(e,dr,gr)}function oe(e,t,n){const i=e.configElements[t];if(!i||pr(e,t))return null;const{configValue:r,configDefinedAt:o}=i;return n&&d(typeof r===n,`${o} has an invalid type \`${typeof r}\`: is should be a ${n} instead`),r}function pr(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:i,configValue:r}=n;return i?!1:r==null}function Dt(e,t){const n=t.find(i=>i.pageId===e);return s(t.length>0),s(n),n}function mr(e,t,n){s(!n.endsWith(" "));const i=[],r=Object.keys(e);for(const o of r)t.includes(o)||i.push(o);d(i.length===0,[n,"returned an object with following unknown keys:",We(i)+".","Only following keys are allowed:",We(t)+"."].join(" "))}function yr(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;d(j(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),mr(e,["pageContext"],n),e.pageContext&&At(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}async function vr(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=br(e._pageId,e._pageFilesAll)):n=U(e,"guard"),!n)return;const i=n.hookFn;let r=e;const o=t(e);o&&(r=o);const a=await ce(()=>i(r),"guard",n.hookFilePath);d(a===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function br(e,t){const n=t.find(l=>l.pageId===e&&l.fileType===".page.route");if(!n)return null;const{filePath:i,fileExports:r}=n;s(r);const o=r.guard;if(!o)return null;const a=i;return d(L(o),`guard() defined by ${a} should be a function`),{hookFn:o,hookName:"guard",hookFilePath:a}}function _r(e){const t=new Error("AbortRender");return m(t,{_pageContextAbort:e,[Bt]:!0}),t}const Bt="_isAbortError";function ge(e){return typeof e=="object"&&e!==null&&Bt in e}function Pr(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(s(g(e,"_abortCall","string")),!0):!1}function Rr(e,t,n){if(t)return;const i=n._urlRewrite??n.urlOriginal;s(i);const r=e._pageContextAbort._abortCall;Fe(!1,`${Pe(r)} intercepted while rendering ${C.bold(i)}`,{onlyOnce:!1})}function wr(e){Er(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function Er(e){const t=[];e.forEach(n=>{const i=n._urlRewrite;{const r=t.indexOf(i);if(r!==-1){const o=[...t.slice(r),i].map(a=>`render('${a}')`).join(" => ");d(!1,`Infinite loop of render() calls: ${o}`)}}t.push(i)})}function Pe(e){return I()?"`"+e+"`":C.cyan(e)}function Sr(e,t){const n=[e>0&&Pe("throw render('/some-url')"),t>0&&Pe("throw redirect('/some-url')")].filter(Boolean).join(" and ");d(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const Nt=O("router/getPageContext.ts",{});async function Fr(e){if(e._isFirstRenderAttempt&&St.isFirstUrl(e.urlOriginal)){s(g(e,"_isFirstRenderAttempt","true"));const t=await Cr(e);return et(t),t}else{s(g(e,"_isFirstRenderAttempt","false"));const t=await kr(e);return et(t),t}}async function Cr(e){const t=Di();Lt(t),m(t,{isHydration:!0,_hasPageContextFromClient:!1}),m(t,await re(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await Ar(n)){const i=await Ht(n);m(t,i)}}return t}async function Or(e){const t=pt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return m(n,await Wt({...e,...n},!0)),n}async function kr(e){const t={isHydration:!1};return m(t,await $r(e)),m(t,await Wt({...e,...t},!1)),t}async function Wt(e,t){let n={};if(m(n,await re(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await xr({...e,...n})){const i=await Lr(e);if(!i._isError)m(n,i);else{const r=pt(e._pageFilesAll,e._pageConfigs);s(r),n={},m(n,{isHydration:!1,_pageId:r}),m(n,await re(e._pageFilesAll,e._pageConfigs,n._pageId)),s(g(i,"is404","boolean")),s(g(i,"pageProps","object")),s(g(i.pageProps,"is404","boolean")),s(!("serverSideError"in i)),m(n,i)}}else m(n,{_hasPageContextFromServer:!1}),t||await vr({_hasPageContextFromClient:!1,...e,...n},i=>Te(i,!0));{const i=await Ht({...e,...n});m(n,i)}return n}async function Ht(e){const t=U(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,i={_hasPageContextFromClient:!0},r=Te({...e,...i},!0),o=await ce(()=>n(r),"onBeforeRender",t.hookFilePath);yr(o,t.hookFilePath);const a=o==null?void 0:o.pageContext;return m(i,a),i}async function xr(e){return!!Nt.pageContextInitHasClientData||await Tr(e)}function et(e){e._pageContextInitHasClientData&&(Nt.pageContextInitHasClientData=!0)}async function Tr(e){if(e._pageConfigs.length>0){const t=Dt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:t}=await Bi(e._pageFilesAll,e._pageId);return t}}async function Ar(e){if(e._pageConfigs.length>0){const t=Dt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="client-only"}else return!1}async function $r(e){const n=(await $t(e)).pageContextAddendum;if(!n._pageId){const i=new Error("No routing match");throw jr(i),i}return s(g(n,"_pageId","string")),n}function jr(e){m(e,{_is404:!0})}function Ir(e){return R(e)&&e._is404===!0}async function Lr(e){const t=e._urlRewrite??e._urlOriginalPristine??e.urlOriginal,n=hr(t),i=await fetch(n);{const a=i.headers.get("content-type"),l="application/json",u=a&&a.includes(l);if(!u&&i.status===404)throw ne(e.urlOriginal),Br();d(u,`Wrong Content-Type for ${n}: it should be ${l} but it's ${a} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vite-plugin-ssr.com/renderPage`)}const r=await i.text(),o=le(r);if(s(R(o)),"serverSideError"in o)throw lt("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");if(Pr(o))throw _r(o);return s(g(o,"_pageId","string")),Lt(o),m(o,{_hasPageContextFromServer:!0}),o}function Dr(e){return R(e)&&!!e._alreadyServerSideRouted}function Br(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Nr(e,t){const i=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(ee(({filesystemRoot:o})=>o.length))[0];let r;if(i){const{filesystemRoot:o,urlRoot:a}=i,l={pageId:e,filesystemRoot:o,urlRoot:a};s(a.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),s(e.startsWith(o),l),o!=="/"?(s(!o.endsWith("/"),l),r=A(e,o.length,0)):r=e,s(r.startsWith("/"),l),r=a+(a.endsWith("/")?"":"/")+A(r,1,0)}else r=e;return s(r.startsWith("/")),r=r.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!r.includes(".page.")),s(!r.endsWith(".")),r.endsWith("/index")&&(r=A(r,0,-6)),r===""&&(r="/"),s(r.startsWith("/")),s(!r.endsWith("/")||r==="/"),r}async function Wr(e,t,n,i){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var u;return(u=l.loadFile)==null?void 0:u.call(l)}));const{onBeforeRouteHook:r,filesystemRoots:o}=Vr(e,t,n);return{pageRoutes:Hr(o,e,t,i),onBeforeRouteHook:r}}function Hr(e,t,n,i){const r=[];let o=[...i];if(n.length>0){s(e===null);const a=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const u=l.pageId;o=Ur(o,u);let c=null;{const h=l.configElements.route;if(h){s("configValue"in h);const f=h.configValue,v=h.configDefinedAt;if(s(v),typeof f=="string")c={pageId:u,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:v,routeType:"STRING"};else{s(L(f));{const p=l.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions;if(p){const b=p.configValue;s(typeof b=="boolean",`${p.configDefinedAt} should be a boolean`)}}c={pageId:u,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:v,routeType:"FUNCTION"}}}}if(!c){const{routeFilesystem:h,routeFilesystemDefinedBy:f}=l;s(h),s(h.startsWith("/")),s(f),c={pageId:u,routeFilesystemDefinedBy:f,comesFromV1PageConfig:a,routeString:h,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(c),r.push(c)})}if(n.length===0){s(e);const a=!1;o.filter(l=>!J(l)).forEach(l=>{const u=t.find(c=>c.pageId===l&&c.fileType===".page.route");if(!u||!("default"in u.fileExports)){const c=Nr(l,e);s(c.startsWith("/")),s(!c.endsWith("/")||c==="/"),r.push({pageId:l,comesFromV1PageConfig:a,routeString:c,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:c,fileExports:h}=u;if(s(h.default),g(h,"default","string")){const f=h.default;d(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${c} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),r.push({pageId:l,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:c,routeType:"STRING"});return}if(g(h,"default","function")){const f=h.default;{const v="iKnowThePerformanceRisksOfAsyncRouteFunctions";v in h&&d(g(h,v,"boolean"),`The export \`${v}\` of ${c} should be a boolean.`)}r.push({pageId:l,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:c,routeType:"FUNCTION"});return}d(!1,`The default export of ${c} should be a string or a function.`)}})}return r}function Vr(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const a=n.onBeforeRoute.codeFilePath;return s(a),d(L(o),`The hook onBeforeRoute() defined by ${a} should be a function.`),{onBeforeRouteHook:{hookFilePath:a,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let i=null;const r=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:a})=>{if(s(a),"onBeforeRoute"in a){d(g(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:l}=a;i={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in a&&(d(g(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),d(g(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),r.push({filesystemRoot:zr(o),urlRoot:a.filesystemRoutingRoot}))}),{onBeforeRouteHook:i,filesystemRoots:r}}function zr(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=A(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function Ur(e,t){const{length:n}=e;return e=e.filter(i=>i!==t),s(e.length===n-1),e}function Vt(){const e="/";return s(Gr(e)),e}function Gr(e){return e.startsWith("/")}const he=O("createPageContext.ts",{});async function zt(e){he.pageFilesData||(he.pageFilesData=await ii(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:i,pageConfigGlobal:r}=he.pageFilesData,{pageRoutes:o,onBeforeRouteHook:a}=await Wr(t,i,r,n),l=Vt();s(Oe(l));const c={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_urlRewrite:null,_baseServer:l,_isProduction:!0,_pageFilesAll:t,_pageConfigs:i,_pageConfigGlobal:r,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:a};return m(c,e),Ft(c),c}async function Ut(e){const t=await zt({urlOriginal:e}),n=await $t(t),i=t._pageFilesAll,r=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:i,pageConfigs:r};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:i,pageConfigs:r}:{pageId:null,pageFilesAll:i,pageConfigs:r}}function z(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Yr({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:i(),isClientRouting:o()};function i(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(r(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&z(l).includes("render")))}function r(){const a=e.some(l=>z(l).includes("render"));d(a,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,u)=>` (${u+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>z(l).includes("clientRouting"))}}function Mr({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:i}){let r=[];const o=t.filter(l=>!e.includes(l)),a=[];if(a.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),a.push(...o.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)r=e.map(l=>l.filePath);else{const l=Jr(i);a.push({id:l,onlyAssets:!1,eagerlyImported:!1}),r=[l]}return{clientEntries:r,clientDependencies:a}}function Jr(e){return e?"@@vite-plugin-ssr/dist/esm/client/client-routing-runtime/entry.js":"@@vite-plugin-ssr/dist/esm/client/server-routing-runtime/entry.js"}function Kr(e,t){let n=ke(e,t);const i=bt(e,t),{isHtmlOnly:r,isClientRouting:o}=Yr({pageFilesClientSide:n,pageFilesServerSide:i,pageId:t});r&&(n=n.filter(u=>u.isEnv("CLIENT_ONLY")&&!z(u).includes("render")),n=Xr(n));const{clientEntries:a,clientDependencies:l}=Mr({pageFilesClientSide:n,pageFilesServerSide:i,isHtmlOnly:r,isClientRouting:o});return{isHtmlOnly:r,isClientRouting:o,clientEntries:a,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:i}}async function qr(e,t,{sharedPageFilesAlreadyLoaded:n}){const i=ke(e,t);await Promise.all(i.map(async r=>{var o;s(r.isEnv("CLIENT_ONLY")||r.isEnv("CLIENT_AND_SERVER")),!(n&&r.isEnv("CLIENT_AND_SERVER"))&&await((o=r.loadExportNames)==null?void 0:o.call(r))}))}function Xr(e){const t=[];for(const n of e)if(t.push(n),z(n).includes("overrideDefaultPages"))break;return t}function Qr(e,t,n){if(e){const i=oe(e,"clientRouting","boolean")??!1;return{isClientSideRenderable:oe(e,"isClientSideRenderable","boolean")??!1,isClientRouting:i}}else{const{isHtmlOnly:i,isClientRouting:r}=Kr(t,n);return{isClientSideRenderable:!i,isClientRouting:r}}}async function Gt(e){const{pageId:t,pageFilesAll:n,pageConfigs:i}=await Ut(e);if(!t)return!1;await qr(n,t,{sharedPageFilesAlreadyLoaded:!1});const r=jt(i,t),{isClientSideRenderable:o,isClientRouting:a}=Qr(r,n,t);return o&&a}function Yt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Mt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Yt(t)||eo(e)||to(t)||!no(t)||!Ce(t)||!Zr(e))}function Zr(e){if(So()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function eo(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function to(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function no(e){const t=Vt();s(Oe(t));const{hasBaseServer:n}=M(e,t);return n}function io(e,t){let n=ro(e,t);return n==="viewport"&&!e._isProduction&&(Fe(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function ro(e,t){{const n=oo(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&d(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const i="prefetchStaticAssets value should be false, 'hover', or 'viewport'";d(j(n),i);const r=Object.keys(n);d(r.length===1&&r[0]==="when",i);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const a=o.toLowerCase();return P(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${a}' instead`,{onlyOnce:!0}),a}d(!1,i)}return"hover"}function oo(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const i="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(d(n===null,i),t==="hover"||t==="viewport")return t;if(t==="false")return!1;d(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),P(!1,i,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";d(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const Jt=new Map;function Kt(e){const t=Xt(e);return Jt.has(t)}function qt(e){const t=Xt(e);Jt.set(t,!0)}function Xt(e){return M(e,"/").pathname}W();const tt=new Map;async function so(e){if(d(ct(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),d(!Yt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),Kt(e))return;qt(e);const{pageId:t,pageFilesAll:n,pageConfigs:i}=await Ut(e);if(t)try{await re(n,i,t)}catch(r){if(Ae(r))Re(r,!0);else throw r}}function ao(e){qt(e.urlPathname),[...document.getElementsByTagName("A")].forEach(n=>{if(tt.has(n))return;tt.set(n,!0);const i=n.getAttribute("href");if(Mt(n)||(s(i),Kt(i)))return;const{prefetchStaticAssets:r}=io(e,n);if(r&&(r==="hover"&&(n.addEventListener("mouseover",()=>{pe(i)}),n.addEventListener("touchstart",()=>{pe(i)},{passive:!0})),r==="viewport")){const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(pe(i),o.disconnect())})});o.observe(n)}})}async function pe(e){try{if(!await Gt(e))return}catch{return}await so(e)}async function lo(e,t){const n=Te(e,t);let i=null,r;i=U(e,"render"),r="render";{const l=U(e,"onRenderClient");l&&(i=l,r="onRenderClient")}if(!i){const l=uo(e);if(e._pageConfigs.length>0)d(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const u=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let c;u.length===0?c="No file `*.page.client.*` found for URL "+l:c="One of the following files should export a `render()` hook: "+u.map(h=>h.filePath).join(" "),d(!1,c)}}s(i);const o=i.hookFn;s(r);const a=await ce(()=>o(n),r,i.hookFilePath);d(a===void 0,`The ${r}() hook defined by ${i.hookFilePath} isn't allowed to return a value`)}function uo(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}function Qt(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=en()),"scrollPosition"in e||(t=!0,e.scrollPosition=Zt()),tn(e),t&&je(e)}function $e(){const e=window.history.state||{};return tn(e),e}function Zt(){return{x:window.scrollX,y:window.scrollY}}function en(){return new Date().getTime()}function nt(){const e=Zt(),t=$e();je({...t,scrollPosition:e})}function co(e,t){if(t)je($e(),e);else{const n=en();fo({timestamp:n,scrollPosition:null},e)}}function tn(e){if(s(R(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(g(t,"x","number")&&g(t,"y","number"))}}function je(e,t){window.history.replaceState(e,"",t??null)}function fo(e,t){window.history.pushState(e,"",t)}W();const go=O("navigate.ts",{});function ho(e){go.navigate=e}const w=O("useClientRouter.ts",{previousState:se()});Ro();Qt();function Re(e,t){s(Ae(e)),w.clientRoutingIsDisabled=!0,t&&console.log(e),Fe(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function po(){_o(),mo((r,{keepScrollPosition:o})=>{i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:r,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),yo((r,o)=>{i({scrollTarget:r,isBackwardNavigation:o})}),ho(async(r,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:a=!1}={})=>{await i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:r,overwriteLastHistoryEntry:a,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;i({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function i({scrollTarget:r,urlOriginal:o=K(),overwriteLastHistoryEntry:a=!1,isBackwardNavigation:l,checkClientSideRenderable:u,pageContextsFromRewrite:c=[],redirectCount:h=0}){var De;if(Sr(c.length,h),w.clientRoutingIsDisabled){ne(o);return}const f=wr(c);if(u){const E=f._urlRewrite??o;let S;try{S=await Gt(E)}catch(Be){if(ge(Be))S=!0;else throw Be}if(!S){ne(o);return}}const v={urlOriginal:o,isBackwardNavigation:l,...f},p=++e;s(p>=1),p>1&&n===!1&&((De=w.onPageTransitionStart)==null||De.call(w,v),n=!0);let b=!1;const F=()=>p===1&&b===!1?!1:p!==e,y=await zt(v);if(F())return;const H=p===1;m(y,{_isFirstRenderAttempt:H});let q,k,Le=!1;try{q=await Fr(y)}catch(E){Le=!0,k=E}if(Le){if(ge(k)||console.error(k),rt(k,y))return;if(ge(k)){const E=k;Rr(k,y._isProduction,y);const S=E._pageContextAbort;if(S._urlRewrite){await i({scrollTarget:r,urlOriginal:o,overwriteLastHistoryEntry:a,isBackwardNavigation:l,pageContextsFromRewrite:[...c,S],redirectCount:h});return}if(S._urlRedirect){await i({scrollTarget:"scroll-to-top-or-hash",urlOriginal:S._urlRedirect.url,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:c,redirectCount:h++});return}s(S.abortStatusCode),m(y,S)}else m(y,{is404:Ir(k)});try{q=await Or(y)}catch(E){if(rt(E,y)||(H||setTimeout(()=>{window.location.pathname=o},0),$i(k,E)))return;throw E}}if(s(q),m(y,q),de(y,"onPageTransitionStart"),w.onPageTransitionStart=y.exports.onPageTransitionStart,y.exports.hydrationCanBeAborted?b=!0:P(!Ai(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!F()&&(t&&await t,!F())){if(vo(o,a),St.markNavigationChange(),s(t===void 0),t=(async()=>{await lo(y,!0),ao(y)})(),await t,t=void 0,y._isFirstRenderAttempt){de(y,"onHydrationEnd");const{onHydrationEnd:E}=y.exports;if(E){const S=y.exportsAll.onHydrationEnd[0].exportSource;s(S),await ce(()=>E(y),"onHydrationEnd",S)}}else p===e&&(y.exports.onPageTransitionEnd&&(de(y,"onPageTransitionEnd"),y.exports.onPageTransitionEnd(y)),n=!1);nn(r),Ie(),w.initialRenderIsDone=!0}}}function mo(e){document.addEventListener("click",t);return;function t(r){if(!n(r))return;const o=i(r.target);if(!o)return;const a=o.getAttribute("href");if(Mt(o))return;s(a),r.preventDefault();const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(a,{keepScrollPosition:l})}function n(r){return r.button===0&&!r.ctrlKey&&!r.shiftKey&&!r.altKey&&!r.metaKey}function i(r){for(;r.tagName!=="A";){const{parentNode:o}=r;if(!o)return null;r=o}return r}}function yo(e){window.addEventListener("popstate",()=>{const t=se(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",i=t.urlWithoutHash===w.previousState.urlWithoutHash,r=!t.historyState.timestamp||!w.previousState.historyState.timestamp?null:t.historyState.timestamp<w.previousState.historyState.timestamp;w.previousState=t,i?window.history.state===null?(Qt(),w.previousState=se()):nn(n):e(n,r)})}function vo(e,t){K()!==e&&(Ie(),co(e,t),w.previousState=se())}function se(){return{urlWithoutHash:K({withoutHash:!0}),historyState:$e()}}function nn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Po();if(n&&n!=="top"){const i=document.getElementById(n)||document.getElementsByName(n)[0];if(i){i.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;bo(t)}function bo(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const i=new Date().getTime();for(;;)if(await ji(10),t(),n()||new Date().getTime()-i>100)return},0)}))}function _o(){window.addEventListener("scroll",Ii(nt,Math.ceil(1e3/3)),{passive:!0}),rn(nt)}function Po(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function Ro(){it(),rn(it),wo(()=>w.initialRenderIsDone&&Ie())}function Ie(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function it(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function rn(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function wo(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function rt(e,t){return!!(Dr(e)||Eo(e,t))}function Eo(e,t){if(!Ae(e))return!1;if(t._isFirstRenderAttempt)throw Re(e,!1),e;return Re(e,!0),ne(t.urlOriginal),!0}function So(){return!!window._disableAutomaticLinkInterception}W();const Fo=!0;cn(Fo);po();
