function un(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function Ee(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return un()&&(n.stack=cn(n.stack,t)),n}function cn(e,t){if(!e)return e;const n=dn(e);let r=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:r<t&&fn(o)?(r++,!1):!0).join(`
`)}function fn(e){return e.startsWith("    at ")}function dn(e){return e.split(/\r?\n/)}function k(e,t){const n=globalThis.__vike=globalThis.__vike||{};return n[e]=n[e]||t}function P(e){return typeof e=="object"&&e!==null}function _e(e){return Array.from(new Set(e))}const T=k("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),gn="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vike.dev/client-runtimes-conflict",st="Two vike client runtime instances are being loaded. Make sure your client-side bundles don't include vike twice. (In order to reduce the size of your client-side JavaScript bundles.)";function at(){{const e=_e(T.instances);mn(e.length<=1,`Both vike@${e[0]} and vike@${e[1]} loaded. Only one version should be loaded.`)}T.checkSingleInstance&&T.instances.length>1&&ye(!1,st,{onlyOnce:!0,showStackTrace:!0})}function hn(e){ye(T.isClientRouting!==!1,gn,{onlyOnce:!0,showStackTrace:!0}),ye(T.isClientRouting===void 0,st,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),at()}function pn(e){T.instances.push(e),at()}function mn(e,t){if(e)return;const n=`[vike][Wrong Usage] ${t}`;throw new Error(n)}function ye(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vike][Warning] ${t}`;if(n){const{alreadyLogged:o}=T,l=n===!0?i:n;if(o.has(l))return;o.add(l)}console.warn(r?new Error(i):i)}const yn="0.4.144",N={projectName:"Vike",projectVersion:yn,npmPackageName:"vike",githubRepository:"https://github.com/vikejs/vike"};pn(N.projectVersion);const lt=new Proxy(e=>e,{get:()=>lt}),h=lt,S=k("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),bn=`[${N.npmPackageName}]`,wn=`[${N.npmPackageName}@${N.projectVersion}]`,$e=2;function s(e,t){var l;if(e)return;const n=(()=>{if(!t)return null;const a=typeof t=="string"?t:JSON.stringify(t);return h.dim(`Debug info (for ${N.projectName} maintainers; you can ignore this): ${a}`)})(),r=`${N.githubRepository}/issues/new`;let i=[`You stumbled upon a bug in ${N.projectName}'s source code.`,`Go to ${h.blue(r)} and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");i=Y(i),i=ae(i,"Bug"),i=M(i,!0);const o=Ee(i,$e);throw(l=S.onBeforeLog)==null||l.call(S),o}function g(e,t,{showStackTrace:n}={}){var i;if(e)return;t=Y(t),t=ae(t,"Wrong Usage"),t=M(t);const r=Ee(t,$e);throw n&&S.showStackTraceList.add(r),(i=S.onBeforeLog)==null||i.call(S),r}function ut(e){return e=Y(e),e=ae(e,"Error"),e=M(e),Ee(e,$e)}function R(e,t,{onlyOnce:n,showStackTrace:r}){var i;if(!e){if(t=Y(t),t=ae(t,"Warning"),t=M(t),n){const{alreadyLogged:o}=S,l=n===!0?t:n;if(o.has(l))return;o.add(l)}if((i=S.onBeforeLog)==null||i.call(S),r){const o=new Error(t);S.showStackTraceList.add(o),S.logger(o,"warn")}else S.logger(t,"warn")}}function Ce(e,t,{onlyOnce:n}){var r;if(!e){if(t=Y(t),t=M(t),n){const{alreadyLogged:i}=S,o=t;if(i.has(o))return;i.add(o)}(r=S.onBeforeLog)==null||r.call(S),S.logger(t,"info")}}function ae(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=h.bold(h[r](n)),`${n}${e}`}function Y(e){return e.startsWith("[")?e:` ${e}`}function M(e,t=!1){return`${t?wn:bn}${e}`}function W(){return typeof window<"u"&&typeof window.scrollY=="number"}const ct=k("utils/assertRouterType.ts",{});function D(){vn(ft()),ct.isClientRouting=!0}function ft(){return ct.isClientRouting!==!1}function vn(e){g(W(),`${h.cyan("import { something } from 'vike/client/router'")} is forbidden on the server-side`,{showStackTrace:!0}),R(e,"You shouldn't `import { something } from 'vike/client/router'` when using Server Routing. The 'vike/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}const Sn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],dt=["vue","svelte","marko","md","mdx"],Rn=[...Sn,...dt];function gt(e){const t=Rn.some(n=>e.endsWith("."+n));return s(!Pn(e)||t),t}function Pn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function En(e){return dt.some(t=>e.endsWith("."+t))}function F(e,t,n){return typeof e=="string"?He(e.split(""),t,n).join(""):He(e,t,n)}function He(e,t,n){const r=[];let i=t>=0?t:e.length+t;s(i>=0&&i<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(i===o||(i===e.length&&(i=0),i===o));){const l=e[i];s(l!==void 0),r.push(l),i++}return r}const ht=["http://","https://","tauri://"];function ke(e){return ht.some(t=>e.startsWith(t))||e.startsWith("/")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function _n(e,t){s(t.includes(" but ")),g(typeof e=="string",`${t} should be a string`),!ke(e)&&(!e.startsWith("/")&&!e.includes(":")?g(!1,`${t} is ${h.cyan(e)} and it should be /${h.cyan(e)} instead (URL pathnames should start with a leading slash)`):g(!1,`${t} isn't a valid URL`))}function J(e,t){s(ke(e)),s(t.startsWith("/"));const[n,...r]=e.split("#");s(n!==void 0);const i=["",...r].join("#")||null;s(i===null||i.startsWith("#"));const o=i===null?"":be(i.slice(1)),[l,...a]=n.split("?");s(l!==void 0);const u=["",...a].join("?")||null;s(u===null||u.startsWith("?"));const c={},d={};Array.from(new URLSearchParams(u||"")).forEach(([b,z])=>{c[b]=z,d[b]=[...d[b]||[],z]});const{origin:f,pathname:w}=Cn(l,t);s(f===null||f===be(f)),s(w.startsWith("/")),s(f===null||e.startsWith(f));const m=l.slice((f||"").length);Fn(e,f,m,u,i);let{pathname:v,hasBaseServer:C}=Tn(w,t);return v=$n(v),s(v.startsWith("/")),{origin:f,pathname:v,pathnameOriginal:m,hasBaseServer:C,search:c,searchAll:d,searchOriginal:u,hash:o,hashOriginal:i}}function be(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function $n(e){return e=e.split("/").map(t=>be(t).split("/").join("%2F")).join("/"),e=e.replace(/\s/g,""),e}function Cn(e,t){var n;{const{origin:r,pathname:i}=fe(e);if(r)return{origin:r,pathname:i};s(i===e)}if(e.startsWith("/"))return{origin:null,pathname:e};{let r=typeof window<"u"&&((n=window==null?void 0:window.document)==null?void 0:n.baseURI);r&&(r=fe(r).pathname);const o=kn(e,r||t);return fe(o)}}function fe(e){if(ht.some(t=>e.startsWith(t))){const[t,n,r,...i]=e.split("/"),o=[t,n,r].join("/"),l=["",...i].join("/")||"/";return{origin:o,pathname:l}}else return{pathname:e,origin:null}}function kn(e,t){const n=t.split("/"),r=e.split("/");let i=t.endsWith("/");e.startsWith(".")&&n.pop();for(const l in r){const a=r[l];a==""&&l==="0"||a!="."&&(a==".."?n.pop():(i=!1,n.push(a)))}let o=n.join("/");return i&&!o.endsWith("/")&&(o+="/"),o.startsWith("/")||(o="/"+o),o}function On(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function Tn(e,t){On(e),s(Oe(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===F(t,0,-1)&&(r=F(t,0,-1),s(n===r)),n.startsWith(r)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Oe(e){return e.startsWith("/")}function Fn(e,t,n,r,i){const o=xn(t,n,r,i);s(e===o)}function xn(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function y(e,t){t&&Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function I(e){return e instanceof Function||typeof e=="function"}function ne(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function An(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r<i?-1:1}}function j(e){return(t,n)=>{const r=e(t),i=e(n);if(s([!0,!1,null].includes(r)),s([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;s(!1)}}function In(e){return j(t=>{const n=e(t);return n===null?null:!n})}function p(e,t,n="unknown"){if(!P(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?P(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?I(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function A(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function jn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const Ln=e=>e!=null;function Ve(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function pt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === ${JSON.stringify(typeof e)}`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes("\\"),t(e))}function de(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function Nn(e){return typeof e=="object"&&e!==null&&"then"in e&&I(e.then)}function Wn(e){return[null,void 0].includes(e)?String(e):["boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}function Bn(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const Hn=["clientRouting"];function Vn(e){Hn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;g(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),g(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const mt=["render","clientRouting","prerender","doNotPrerender"];function Dn(e,t){g(!mt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function zn(e,t){if(!e)return null;let[n,...r]=e;if(!n||r.length===0&&["*","default",t].includes(n))return null;s(n!=="*");let i="",o="";return n==="default"?i="export default":(i="export",r=[n,...r]),r.forEach(a=>{i=`${i} { ${a}`,o=` }${o}`}),i+o}function H(e,t,n){const r=Gn(e,t);if(r===null)return null;const{value:i,definedAt:o}=r;return n&&Un(i,n,t,o),r}function Un(e,t,n,r){s(e!==null);const i=typeof e;if(i===t)return;const o=Wn(e),l=o!==null?`value ${h.cyan(o)}`:`type ${h.cyan(i)}`,a=Te(n,{definedAt:r},!0);g(!1,`${a} has an invalid ${l}: it should be a ${h.cyan(t)} instead`)}function Gn(e,t){const n=e.configValues[t];return!n||n.value===null?null:n}function yt(e,t){const n=t.find(r=>r.pageId===e);return s(t.length>0),s(n),n}function Te(e,{definedAt:t},n){return`${n?"Config":"config"} ${h.cyan(e)} defined ${bt(t,e)}`}function bt(e,t){if(e.isComputed)return"internally";let n;return e.isCumulative?n=e.files:n=[e.file],s(n.length>=1),`at ${n.map(i=>{const{filePathToShowToUser:o,fileExportPath:l}=i;let a=o;const u=zn(l,t);return u&&(a=`${a} > ${h.cyan(u)}`),e.isEffect&&(a=`${a} > (${h.blue("effect")})`),a}).join(" / ")}`}function Yn(e,t){let n=bt(e.definedAt,t);return n.startsWith("at ")&&(n=n.slice(3)),n}function wt({definedAt:e}){if(e.isComputed||e.isCumulative)return null;const{filePathToShowToUser:t}=e.file;return s(t),t}function Mn({definedAt:e}){const t=wt({definedAt:e});return s(t),t}function Jn(e,t){const n={},r={},i={};e.forEach(a=>{Kn(a).forEach(({exportName:c,exportValue:d,isFromDefaultExport:f})=>{s(c!=="default"),i[c]=i[c]??[],i[c].push({exportValue:d,exportSource:`${a.filePath} > ${f?`\`export default { ${c} }\``:`\`export { ${c} }\``}`,filePath:a.filePath,_filePath:a.filePath,_fileType:a.fileType,_isFromDefaultExport:f})})}),t&&Object.entries(t.configValues).forEach(([a,u])=>{const{value:c}=u,d=wt(u),f=Te(a,u,!0);r[a]=r[a]??c,n[a]=n[a]??[],s(n[a].length===0),n[a].push({configValue:c,configDefinedAt:f,configDefinedByFile:d});const w=a;i[w]=i[w]??[],i[w].push({exportValue:c,exportSource:f,filePath:d,_filePath:d,_fileType:null,_isFromDefaultExport:null})});const o=qn(),l={};return Object.entries(i).forEach(([a,u])=>{u.forEach(({exportValue:c,_fileType:d,_isFromDefaultExport:f})=>{l[a]=l[a]??c,d===".page"&&!f&&(a in o||(o[a]=c))})}),s(!("default"in l)),s(!("default"in i)),{config:r,configEntries:n,exports:l,exportsAll:i,pageExports:o}}function Kn(e){const{filePath:t,fileExports:n}=e;s(n),s(gt(t));const r=[];return Object.entries(n).sort(In(([i])=>i==="default")).forEach(([i,o])=>{let l=i==="default";if(l)if(En(t))i="Page";else{g(P(o),`The ${h.cyan("export default")} of ${t} should be an object.`),Object.entries(o).forEach(([a,u])=>{Dn(a,t),r.push({exportName:a,exportValue:u,isFromDefaultExport:l})});return}r.push({exportName:i,exportValue:o,isFromDefaultExport:l})}),r.forEach(({exportName:i,isFromDefaultExport:o})=>{s(!(o&&mt.includes(i)))}),r}function qn(){return new Proxy({},{get(...e){return W()||R(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vike.dev/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function Xn(e){const t=".page.",n=F(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function V(e){pt(e)}function vt(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(g(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=_e(e.map(({pageId:r})=>r).filter(r=>K(r)));if(g(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return s(r),r}return null}function K(e,t){return s(!e.includes("\\")),e.includes("/_error")}function Qn(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return s(n),!!n.isErrorPage}else return K(e)}const Zn=[".page",".page.server",".page.route",".page.client",".css"];function er(e){if(pt(e),e.endsWith(".css"))return".css";s(gt(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(s(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";s(!1,e)}function St(e){const t=o=>i.pageId===o||i.isDefaultPageFile&&(De(i.filePath)||tr(o,i.filePath)),n=er(e),i={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:we(e),isRendererPageFile:n!==".css"&&we(e)&&De(e),isErrorPageFile:K(e),pageId:Xn(e)};return i}function we(e){return V(e),K(e)?!1:e.includes("/_default")}function De(e){return V(e),e.includes("/renderer/")}function tr(e,t){V(e),V(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(we(t));const n=F(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function nr(e){s(Array.isArray(e)),e.forEach(t=>{s(P(t)),s(p(t,"pageId","string")),s(p(t,"routeFilesystem")),s(p(t,"configValuesSerialized")),s(p(t,"configValuesImported"))})}function rr(e){s(p(e,"configValuesImported"))}const ir=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function le(e){const t=JSON.parse(e);return Rt(t)}function Rt(e){return typeof e=="string"?or(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=Rt(n)}),e)}function or(e){for(const{match:t,deserialize:n}of ir)if(t(e))return n(e,le);return e}const sr=["$$registrations","_rerender_only"],ar=[".md",".mdx"];function lr(e,t,n){ur(e,t,n)}function ur(e,t,n){const i=Object.keys(e).filter(l=>!sr.includes(l)),o=i.filter(l=>l!=="default"&&l!==n);if(o.length===0){if(i.length===1)return;{s(i.length===0);let l=`${t} doesn't export any value, but it should have a ${h.cyan("export default")}`;n&&(l+=` or ${h.cyan(`export { ${n} }`)}`),g(!1,l)}}else if(n){if(ar.some(l=>t.endsWith(l)))return;o.forEach(l=>{R(!1,`${t} should have only a single export: move ${h.cyan(`export { ${l} }`)} to +config.h.js or its own +${o}.js`,{onlyOnce:!0})})}else{const l=o.join(", ");g(!1,`${t} replace ${h.cyan(`export { ${l} }`)} with ${h.cyan(`export default { ${l} }`)}`)}}function ve(e){const t={},n=(r,i,o,l)=>{t[r]={value:i,definedAt:{file:{filePathToShowToUser:o,fileExportPath:[r,"default"].includes(l)?[]:[l]}}},cr(i,r,o)};return e.forEach(r=>{if(r.isValueFile){const{exportValues:i,importPath:o,configName:l}=r;l!=="client"&&lr(i,o,l),Object.entries(i).forEach(([a,u])=>{const c=a!=="default",d=c?a:r.configName;c&&d in t||n(d,u,o,a)})}else{const{configName:i,importPath:o,exportValue:l,exportName:a}=r;n(i,l,o,a)}}),t}function cr(e,t,n){s(!n.includes("+config.")),g(e!==null,`Set ${h.cyan(t)} to ${h.cyan("null")} in a +config.h.js file instead of ${n}`)}function fr(e,t){const n=e.map(i=>{const o={};{const{configValuesSerialized:d}=i;Object.entries(d).forEach(([f,w])=>{{const{valueSerialized:m,definedAt:v}=w;s(m),s(!o[f]),o[f]={value:le(m),definedAt:v}}})}{const{configValuesImported:d}=i,f=ve(d);Object.assign(o,f)}const{pageId:l,isErrorPage:a,routeFilesystem:u,loadConfigValuesAll:c}=i;return dr(o),{pageId:l,isErrorPage:a,routeFilesystem:u,configValues:o,loadConfigValuesAll:c}}),r={configValues:{}};{const i=ve(t.configValuesImported);Object.assign(r.configValues,i)}return{pageConfigs:n,pageConfigGlobal:r}}function dr(e){const t="route",n=e[t];if(!n)return;const{value:r}=n,i=typeof r,o=Te(t,n,!0);g(i==="string"||I(r),`${o} has an invalid type '${i}': it should be a string or a function instead, see https://vike.dev/route`)}function gr(e){s(p(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vike was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(p(e,"pageFilesLazy","object")),s(p(e,"pageFilesEager","object")),s(p(e,"pageFilesExportNamesLazy","object")),s(p(e,"pageFilesExportNamesEager","object")),s(p(e.pageFilesLazy,".page")),s(p(e.pageFilesLazy,".page.client")||p(e.pageFilesLazy,".page.server")),s(p(e,"pageFilesList","string[]")),s(p(e,"pageConfigsSerialized")),s(p(e,"pageConfigGlobalSerialized"));const{pageConfigsSerialized:t,pageConfigGlobalSerialized:n}=e;nr(t),rr(n);const{pageConfigs:r,pageConfigGlobal:i}=fr(t,n),o={};Q(e.pageFilesLazy).forEach(({filePath:a,pageFile:u,globValue:c})=>{u=o[a]=o[a]??u;const d=c;ze(d),u.loadFile=async()=>{"fileExports"in u||(u.fileExports=await d(),Vn(u))}}),Q(e.pageFilesExportNamesLazy).forEach(({filePath:a,pageFile:u,globValue:c})=>{u=o[a]=o[a]??u;const d=c;ze(d),u.loadExportNames=async()=>{if(!("exportNames"in u)){const f=await d();g("exportNames"in f,"You seem to be using Vite 2 but the latest vike versions only work with Vite 3"),s(p(f,"exportNames","string[]"),u.filePath),u.exportNames=f.exportNames}}}),Q(e.pageFilesEager).forEach(({filePath:a,pageFile:u,globValue:c})=>{u=o[a]=o[a]??u;const d=c;s(P(d)),u.fileExports=d}),Q(e.pageFilesExportNamesEager).forEach(({filePath:a,pageFile:u,globValue:c})=>{u=o[a]=o[a]??u;const d=c;s(P(d)),s(p(d,"exportNames","string[]"),u.filePath),u.exportNames=d.exportNames}),e.pageFilesList.forEach(a=>{o[a]=o[a]??St(a)});const l=Object.values(o);return l.forEach(({filePath:a})=>{s(!a.includes("\\"))}),{pageFiles:l,pageConfigs:r,pageConfigGlobal:i}}function Q(e){const t=[];return Object.entries(e).forEach(([n,r])=>{s(Zn.includes(n)),s(P(r)),Object.entries(r).forEach(([i,o])=>{const l=St(i);s(l.fileType===n),t.push({filePath:i,pageFile:l,globValue:o})})}),t}function ze(e){s(I(e))}const x=k("setPageFiles.ts",{});function hr(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=gr(e);x.pageFilesAll=t,x.pageConfigs=n,x.pageConfigGlobal=r}async function pr(e,t){e?(s(!x.pageFilesGetter),s(t===void 0)):(s(x.pageFilesGetter),s(typeof t=="boolean"),(!x.pageFilesAll||!t)&&await x.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=x;s(n&&r&&i);const o=mr(n,r);return{pageFilesAll:n,allPageIds:o,pageConfigs:r,pageConfigGlobal:i}}function mr(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),r=_e(n),i=t.map(o=>o.pageId);return[...r,...i]}function Fe(e,t){return Et(e,t,!0)}function Pt(e,t){return Et(e,t,!1)}function Et(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(m=>m.isRelevant(t)&&m.fileType!==".page.route").sort(yr(n,t)),o=m=>{const v=i.filter(b=>b.pageId===t&&b.isEnv(m?"CLIENT_AND_SERVER":r));g(v.length<=1,`Merge the following files into a single file: ${v.map(b=>b.filePath).join(" ")}`);const C=v[0];return s(C===void 0||!C.isDefaultPageFile),C},l=o(!1),a=o(!0),u=m=>i.filter(v=>v.isRendererPageFile&&v.isEnv(m?"CLIENT_AND_SERVER":r))[0],c=u(!1),d=u(!0),f=i.filter(m=>m.isDefaultPageFile&&!m.isRendererPageFile&&(m.isEnv(r)||m.isEnv("CLIENT_AND_SERVER")));return[l,a,...f,c,d].filter(Ln)}function yr(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,o=0;return(l,a)=>{if(!l.isDefaultPageFile&&a.isDefaultPageFile)return r;if(!a.isDefaultPageFile&&l.isDefaultPageFile)return i;{const u=l.isRendererPageFile,c=a.isRendererPageFile;if(!u&&c)return r;if(!c&&u)return i;s(u===c)}{const u=Ue(t,l.filePath),c=Ue(t,a.filePath);if(u<c)return r;if(c<u)return i;s(u===c)}{if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return r;if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return i}return o}}function Ue(e,t){V(e),V(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),o=r.split("/").length,l=i.split("/").length;return o+l}const br="modulepreload",wr=function(e){return"/"+e},Ge={},Ye=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=wr(o),o in Ge)return;Ge[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":br,l||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),l)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},xe={},_t={},vr={},ue={},Sr=[],$t={},Rr=!0,Pr=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:void 0,loadConfigValuesAll:async()=>(await Ye(()=>import("./pages_error.75643d35.js"),["assets/entries/pages_error.75643d35.js","assets/chunks/chunk-f1b9f6a2.js","assets/static/LayoutDefault.d4faae46.css"])).default,configValuesSerialized:{isClientSideRenderable:{definedAt:{isComputed:!0},valueSerialized:"true"},onBeforeRenderEnv:{definedAt:{isComputed:!0},valueSerialized:"null"},clientRouting:{definedAt:{file:{filePathToShowToUser:"vike-solid",fileExportPath:["default","clientRouting"]}},valueSerialized:"true"},hydrationCanBeAborted:{definedAt:{file:{filePathToShowToUser:"vike-solid",fileExportPath:["default","hydrationCanBeAborted"]}},valueSerialized:"true"},title:{definedAt:{file:{filePathToShowToUser:"/pages/+config.h.ts",fileExportPath:["default","title"]}},valueSerialized:'"Bati"'}},configValuesImported:[]},{pageId:"/pages/index",isErrorPage:void 0,routeFilesystem:{routeString:"/",definedBy:"/pages/index/"},loadConfigValuesAll:async()=>(await Ye(()=>import("./pages_index.afbdc8eb.js"),["assets/entries/pages_index.afbdc8eb.js","assets/chunks/chunk-f1b9f6a2.js","assets/static/LayoutDefault.d4faae46.css"])).default,configValuesSerialized:{isClientSideRenderable:{definedAt:{isComputed:!0},valueSerialized:"true"},onBeforeRenderEnv:{definedAt:{isComputed:!0},valueSerialized:"null"},clientRouting:{definedAt:{file:{filePathToShowToUser:"vike-solid",fileExportPath:["default","clientRouting"]}},valueSerialized:"true"},hydrationCanBeAborted:{definedAt:{file:{filePathToShowToUser:"vike-solid",fileExportPath:["default","hydrationCanBeAborted"]}},valueSerialized:"true"},title:{definedAt:{file:{filePathToShowToUser:"/pages/+config.h.ts",fileExportPath:["default","title"]}},valueSerialized:'"Bati"'}},configValuesImported:[]}],Er={configValuesImported:[]},_r=Object.assign({}),$r={..._r};xe[".page"]=$r;const Cr=Object.assign({}),kr={...Cr};ue[".page"]=kr;const Or=Object.assign({}),Tr={...Or};ue[".page.server"]=Tr;const Fr=Object.assign({}),xr={...Fr};_t[".page.route"]=xr;const Ar=Object.assign({}),Ir={...Ar};xe[".page.client"]=Ir;const jr=Object.assign({}),Lr={...jr};ue[".page.client"]=Lr;const Nr=Object.assign({}),Wr={...Nr};$t[".page.server"]=Wr;const Br=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:Rr,neverLoaded:$t,pageConfigGlobalSerialized:Er,pageConfigsSerialized:Pr,pageFilesEager:_t,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:vr,pageFilesLazy:xe,pageFilesList:Sr},Symbol.toStringTag,{value:"Module"}));hr(Br);function Ct(){s(W())}function Hr(){Ct(),D()}function Vr(){Ct()}function Me(e){const t=e/1e3;if(t<120){const n=Je(t);return`${n} second${Ke(n)}`}{const n=t/60,r=Je(n);return`${r} minute${Ke(r)}`}}function Je(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Ke(e){return e==="1"?"":"s"}const Dr=k("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:r,timeoutWarn:i}=zr(t);let o,l;const a=new Promise((f,w)=>{o=m=>{u(),f(m)},l=m=>{u(),w(m)}}),u=()=>{clearTimeout(c),clearTimeout(d)},c=setTimeout(()=>{R(!1,`The ${t}() hook defined by ${n} is taking more than ${Me(i)}`,{onlyOnce:!1})},i),d=setTimeout(()=>{const f=ut(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Me(r)}`);l(f)},r);return(async()=>{try{const f=await e();o(f)}catch(f){P(f)&&Dr.userHookErrors.set(f,{hookName:t,hookFilePath:n}),l(f)}})(),a}function zr(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function q(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=J(t,"/");let o;return e!=null&&e.withoutHash?o=`${i}${n||""}`:o=`${i}${n||""}${r||""}`,s(o.startsWith("/")),o}Vr();function Ur(){var r,i,o,l;const e=!!((i=(r=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:r.renderers)!=null&&i.size),t=!!((l=(o=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:o.rendererInterfaces)!=null&&l.size),n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function kt(e,t){const n=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?n(e).length===n(t).length&&n(e).every(o=>kt(e[o],t[o])):e===t}function Gr(e,t){return P(e)&&P(t)&&e.constructor===t.constructor&&kt({...e,stack:null},{...t,stack:null})&&t.message===t.message}function re(e){window.location.href=e}function Yr(e){return new Promise(t=>setTimeout(t,e))}function Mr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}Hr();const qe=k("navigationState.ts",{}),Jr=q(),Ot={markNavigationChange(){qe.navigationChanged=!0},get noNavigationChangeYet(){return!qe.navigationChanged&&this.isFirstUrl(q())},isFirstUrl(e){return e===Jr}};function Kr(){const e="vike_pageContext",t=document.getElementById(e);g(t,`The element #${e} (which vike automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const r=le(n);return s(p(r,"_pageId","string")),y(r,{_hasPageContextFromServer:!0}),r}async function qr(e,t){const r=Pt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Xr(e,t){if(!A(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Qr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Zr(e,t){if(s(e.length>0),e.length===1)return e[0];const n=e.slice(0,e.length-1),r=e[e.length-1];return n.join(", ")+` ${t} `+r}W()&&D();function Tt(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(de(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:xt,enumerable:t,configurable:!0}),"url"in e&&s(de(e,"url")),Object.defineProperty(e,"url",{get:ei,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(de(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:ti,enumerable:t,configurable:!0})}function Ft(e){let t=e._urlHandler;t||(t=o=>o);const n=e._urlRewrite??e.urlOriginal;s(n&&typeof n=="string");const r=t(n),i=e._baseServer;return s(i.startsWith("/")),J(r,i)}function xt(){const{pathname:e}=Ft(this),t=e;return s(t.startsWith("/")),t}function ei(){return R(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),xt.call(this)}function ti(){const e=Ft(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:l,hash:a,hashOriginal:u}=e,c=W(),d=w=>{R(c,`pageContext.urlParsed.${w} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:l,get hash(){return d("hash"),a},get hashOriginal(){return d("hashOriginal"),u},get hashString(){return R(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),d("hashString"),u},get searchString(){return R(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),l}};return Z(f,"hashString"),Z(f,"searchString"),c||(Z(f,"hash"),Z(f,"hashOriginal")),f}function Z(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function ni(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(A(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const At="@",Se=":";function ri(e,t="Invalid"){let n=`${t} Route String ${L(e)}`;g(e!=="",`${n} (empty string): set it to ${L("/")} instead`),g(["/","*"].includes(e[0]),`${n}: it should start with ${L("/")} or ${L("*")}`),g(!e.includes("**"),`${n}: set it to ${L(e.split("**").join("*"))} instead`)}function Re(e,t){ri(e);const n=It(e),r=n.map(f=>f.param?"[^/]+":f.glob?f.isLastDir?"|/.*":".*":Bn(f.static)).map(f=>`(${f})`).join(""),i=new RegExp(`^${r}/?$`),o=t.match(i);if(!o)return null;const l={},[a,...u]=o;let c=0;const d=n.filter(f=>f.glob).length>1;return n.forEach((f,w)=>{let m=u[w];if(f.param&&(l[f.param]=m),f.glob){const v=`*${d?++c:""}`;f.isLastDir&&(m=m.slice(1)),l[v]=m}}),{routeParams:l}}function It(e){const t=[],n=i=>{const o=t[t.length-1];o!=null&&o.static?o.static+=i:t.push({static:i})},r=e.split("/");return r.forEach((i,o)=>{const l=o===0,a=o===r.length-1;ii(i)?(R(!i.startsWith(Se),`Outdated Route String ${L(e)}, use ${L(e.split(Se).join(At))} instead`,{onlyOnce:!0}),l||n("/"),t.push({param:i.slice(1)})):i==="*"&&a&&e!=="*"&&e!=="/*"?t.push({glob:!0,isLastDir:!0}):(l||n("/"),i.split("*").forEach((u,c)=>{c!==0&&t.push({glob:!0}),u!==""&&n(u)}))}),t}function ee(e){const t=It(e),n=a=>(a==null?void 0:a.split("/").filter(Boolean).length)||0;let r=0;for(const a of t){if(!a.static)break;r+=n(a.static)}const i=t.map(a=>n(a.static)).reduce((a,u)=>a+u,0),o=t.filter(a=>a.param).length,l=t.filter(a=>a.glob).length;return{numberOfStaticPartsBeginning:r,numberOfStaticParts:i,numberOfParams:o,numberOfGlobs:l}}function ii(e){return e.startsWith(At)||e.startsWith(Se)}function Xe(e){const n=Re(e,e);return s(n),Object.keys(n.routeParams).length===0}function L(e){return W()?`'${e}'`:(e===""&&(e="''"),h.cyan(e))}function oi(e){e.sort(si).sort(j(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(j(t=>t.routeType==="STRING"&&Xe(t.routeString)===!1)).sort(j(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(j(t=>t.routeType==="STRING"&&Xe(t.routeString)===!0)).sort(j(t=>t.routeType==="FILESYSTEM")).sort(j(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function si(e,t){{const n=e.precedence??0,r=t.precedence??0;if(n!==r)return n>r?-1:1}if(!t.routeString||!e.routeString)return 0;{const r=ne(i=>ee(i).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>ee(i).numberOfStaticParts)(e.routeString,t.routeString);if(r!==0)return r}{const r=An(i=>ee(i).numberOfGlobs)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>ee(i).numberOfParams)(e.routeString,t.routeString);if(r!==0)return r}return 0}async function ai(e,t,n){ni(t);let r=e(t);if(jt(r,`The Route Function ${n}`),r=await r,r===!1)return null;if(r===!0&&(r={}),g(A(r),`The Route Function ${n} should return a boolean or a plain JavaScript object (but it's ${h.cyan(`typeof result === ${JSON.stringify(typeof r)}`)} instead)`),"match"in r){const{match:l}=r;if(g(typeof l=="boolean",`The ${h.cyan("match")} value returned by the Route Function ${n} should be a boolean.`),!l)return null}let i=null;"precedence"in r&&(i=r.precedence,g(typeof i=="number",`The ${h.cyan("precedence")} value returned by the Route Function ${n} should be a number.`)),Lt(r,`The ${h.cyan("routeParams")} object returned by the Route Function ${n} should`);const o=r.routeParams||{};return g(!("pageContext"in r),`Providing ${h.cyan("pageContext")} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),s(A(o)),Object.keys(r).forEach(l=>{g(l==="match"||l==="routeParams"||l==="precedence",`The Route Function ${n} returned an object with an unknown property ${h.cyan(l)} (the known properties are ${h.cyan("match")}, ${h.cyan("routeParams")}, and ${h.cyan("precedence")})`)}),{precedence:i,routeParams:o}}function jt(e,t){R(!Nn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function Qe(){const e=h.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");R(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function Lt(e,t){s(t.endsWith(" should")),p(e,"routeParams")&&(s(t.endsWith(" should")),g(A(e.routeParams),`${t} be a plain JavaScript object.`),g(Qr(e.routeParams),`${t} only hold string values.`))}function Nt(e,{hookName:t,hookFilePath:n}){if(e==null)return;s(!t.endsWith(")"));const r=`The ${h.cyan("pageContext")} object provided by the ${t}() hook defined by ${n}`;g(P(e),`${r} should be an object (but it's ${h.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),g(!("_objectCreatedByVike"in e),`${r} shouldn't be the whole ${h.cyan("pageContext")} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),R(!("_pageId"in e),`${r} sets ${h.cyan("pageContext._pageId")} which means that Vike's routing is overriden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),g(!("is404"in e),`${r} sets ${h.cyan("pageContext.is404")} which is forbidden, use ${h.cyan("throw render()")} instead, see https://vike.dev/render`)}async function li(e,t){let n=e.onBeforeRoute(t);jt(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(n==null||Xr(n,["pageContext"])&&p(n,"pageContext"),`${r} should return ${h.cyan("null")}, ${h.cyan("undefined")}, or a plain JavaScript object ${h.cyan("{ pageContext: { /* ... */ } }")}`),n==null)return null;if(g(p(n,"pageContext","object"),`${r} returned ${h.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),p(n.pageContext,"_pageId")&&!p(n.pageContext,"_pageId","null")){const o=`${r} returned ${h.cyan("{ pageContext: { _pageId } }")} but ${h.cyan("_pageId")} should be`;g(p(n.pageContext,"_pageId","string"),`${o} a string or null`),g(t._allPageIds.includes(n.pageContext._pageId),`${o} ${Zr(t._allPageIds.map(l=>h.cyan(l)),"or")}`)}p(n.pageContext,"routeParams")&&Lt(n.pageContext,`${r} returned ${h.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const i={};return p(n.pageContext,"url")&&(R(!1,`${r} returned ${h.cyan("{ pageContext: { url } }")} but ${h.cyan("pageContext.url")} has been renamed to ${h.cyan("pageContext.urlOriginal")}. Return ${h.cyan("{ pageContext: { urlOriginal } }")} instead. (See https://vike.dev/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),p(n.pageContext,"urlOriginal")&&(_n(n.pageContext.urlOriginal,`${r} returned ${h.cyan("{ pageContext: { urlOriginal } }")} but ${h.cyan("urlOriginal")}`),y(i,{_urlOriginalPristine:t.urlOriginal})),Nt(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),y(i,n.pageContext),i}var te;function Ze(...e){var t;te||(te=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vike:routing")),te&&te(...e)}W()&&D();async function Wt(e){Tt(e),Ze("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const l=await li(e._onBeforeRouteHook,e);if(l){if(y(t,l),p(t,"_pageId","string")||p(t,"_pageId","null"))return p(t,"routeParams")?s(p(t,"routeParams","object")):y(t,{routeParams:{}}),y(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};y(e,t)}}y(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),g(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:r}=e;s(r.startsWith("/"));const i=[];await Promise.all(e._pageRoutes.map(async l=>{const{pageId:a,routeType:u}=l;if(l.routeType==="FILESYSTEM"){const{routeString:c}=l,d=Re(c,r);if(d){const{routeParams:f}=d;i.push({pageId:a,routeParams:f,routeString:c,routeType:u})}return}if(l.routeType==="STRING"){const{routeString:c}=l,d=Re(c,r);if(d){const{routeParams:f}=d;s(u==="STRING"),i.push({pageId:a,routeString:c,routeParams:f,routeType:u})}return}if(l.routeType==="FUNCTION"){const{routeFunction:c,routeDefinedAt:d}=l,f=await ai(c,e,d);if(f){const{routeParams:w,precedence:m}=f;i.push({pageId:a,precedence:m,routeParams:w,routeType:u})}return}s(!1)})),oi(i);const o=i[0];if(Ze(`Route matches for URL ${h.cyan(r)} (in precedence order):`,i),y(t,{_routeMatches:i}),!o)return y(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:l}=o;s(A(l)),y(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function G(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(s(r.exportValue===n),n===null)return null;const i=r.filePath;return s(i),s(!i.endsWith(" ")),ui(n,{hookName:t,hookFilePath:i}),{hookFn:n,hookName:t,hookFilePath:i}}function ge(e,t){G(e,t)}function ui(e,{hookName:t,hookFilePath:n}){s(t&&n),s(!t.endsWith(")")),g(I(e),`hook ${t}() defined by ${n} should be a function`)}function ci(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>jn(n,r)).forEach(([n,r])=>{e[n]=r})}function fi(e){di(e),gi(e)}function di(e){Qn(e._pageId,e._pageConfigs)&&s(p(e,"is404","boolean"))}function gi(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!P(t)){R(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const hi="not-serializable",ie=k("getPageContextProxyForUser.ts",{});function pi(e){return s([!0,!1].includes(e._hasPageContextFromServer)),s([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],i=JSON.stringify(n);return g(r!==hi,`pageContext[${i}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),mi(e,n,`pageContext[${i}] isn't available on the client-side because ${i} is missing in passToClient, see https://vike.dev/passToClient`),r}})}function mi(e,t,n){ie.prev===t||ie.prev==="__v_raw"||(wi(t),!(t in e)&&(bi(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&g(!1,n)))}const yi=["then","toJSON"];function bi(e){return!!(yi.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function wi(e){ie.prev=e,window.setTimeout(()=>{ie.prev=void 0},0)}function Ae(e,t){if(t){const i=e;s([!0,!1].includes(i.isHydration)),s([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;s(i.isHydration===!0),s(i.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(P(e.pageExports));const n=e.exports.Page;y(e,{Page:n}),vi(e),ci(e);const r=pi(e);return fi(e),r}function vi(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Bt(e,t){const n=e.filter(i=>i.pageId===t);return s(n.length<=1),n[0]??null}async function Si(e,t){if("isLoaded"in e&&!t)return e;const n=await e.loadConfigValuesAll(),r=ve(n);return Object.assign(e.configValues,r),y(e,{isLoaded:!0}),e}const Ht="__whileFetchingAssets";async function oe(e,t,n){const r=Fe(e,n),i=Bt(t,n);let o;const l=!1;try{o=(await Promise.all([i&&Si(i,l),...r.map(v=>{var C;return(C=v.loadFile)==null?void 0:C.call(v)})]))[0]}catch(m){throw Ri(m)&&Object.assign(m,{[Ht]:!0}),m}const{config:a,configEntries:u,exports:c,exportsAll:d,pageExports:f}=Jn(r,o);return{config:a,configEntries:u,exports:c,exportsAll:d,pageExports:f,_pageFilesLoaded:r}}function Ie(e){return e?e[Ht]===!0:!1}function Ri(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const et=["urlPathname","urlParsed"],Pi=["Page","pageExports","exports"];function Vt(e){[...Pi,...et].forEach(n=>{n in e&&(et.includes(n)?(s(n.startsWith("url")),R(!1,`pageContext.${n} is already available in the browser when using Client Routing; adding '${n}' to passToClient has no effect`,{onlyOnce:!0})):R(!1,`pageContext.${n} is a built-in that cannot be overriden; adding '${n}' to passToClient has no effect`,{onlyOnce:!0}),delete e[n])})}const Ei="/";function _i(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:o}=J(e,Ei);e.startsWith("/")&&s(e===`${r}${i||""}${o||""}`,{url:e});const l=r.endsWith("/");let a;return n&&r!=="/"?(l?a=F(r,0,-1):a=r,s(!a.endsWith("/"),{url:e}),s(a!=="")):a=r+(l?"":"/")+"index",s(a),a=a+t,`${a}${i||""}${o||""}`}const $i=".pageContext.json",Ci=!1;function ki(e){return _i(e,$i,Ci)}function Oi(e,t,n){s(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const o of i)t.includes(o)||r.push(o);g(r.length===0,[n,"returned an object with following unknown keys:",Ve(r)+".","Only following keys are allowed:",Ve(t)+"."].join(" "))}function Ti(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;g(A(e),`${n} should return a plain JavaScript object, ${h.cyan("undefined")}, or ${h.cyan("null")}`),Oi(e,["pageContext"],n),e.pageContext&&Nt(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}async function Fi(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=xi(e._pageId,e._pageFilesAll)):n=G(e,"guard"),!n)return;const r=n.hookFn;let i=e;const o=t(e);o&&(i=o);const l=await ce(()=>r(i),"guard",n.hookFilePath);g(l===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function xi(e,t){const n=t.find(a=>a.pageId===e&&a.fileType===".page.route");if(!n)return null;const{filePath:r,fileExports:i}=n;s(i);const o=i.guard;if(!o)return null;const l=r;return g(I(o),`guard() defined by ${l} should be a function`),{hookFn:o,hookName:"guard",hookFilePath:l}}function Ai(e){const t=new Error("AbortRender");return y(t,{_pageContextAbort:e,[Dt]:!0}),t}const Dt="_isAbortError";function he(e){return typeof e=="object"&&e!==null&&Dt in e}function Ii(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(s(p(e,"_abortCall","string")),!0):!1}function ji(e,t,n){if(t)return;const r=n._urlRewrite??n.urlOriginal;s(r);const i=e._pageContextAbort._abortCall;Ce(!1,`${h.cyan(i)} intercepted while rendering ${h.cyan(r)}`,{onlyOnce:!1})}function Li(e){Ni(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function Ni(e){const t=[];e.forEach(n=>{const r=n._urlRewrite;{const i=t.indexOf(r);if(i!==-1){const o=[...t.slice(i),r].map(l=>`render('${l}')`).join(" => ");g(!1,`Infinite loop of render() calls: ${o}`)}}t.push(r)})}function Wi(e,t){const n=[e>0&&h.cyan("throw render('/some-url')"),t>0&&h.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");g(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const zt=k("router/getPageContext.ts",{});async function Bi(e){if(e._isFirstRenderAttempt&&Ot.isFirstUrl(e.urlOriginal)){s(p(e,"_isFirstRenderAttempt","true"));const t=await Hi(e);return tt(t),t}else{s(p(e,"_isFirstRenderAttempt","false"));const t=await Di(e);return tt(t),t}}async function Hi(e){const t=Kr();Vt(t),y(t,{isHydration:!0,_hasPageContextFromClient:!1}),y(t,await oe(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await Gi(n)){const r=await Gt(n);y(t,r)}}return t}async function Vi(e){const t=vt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return y(n,await Ut({...e,...n},!0)),n}async function Di(e){const t={isHydration:!1};return y(t,await Yi(e)),y(t,await Ut({...e,...t},!1)),t}async function Ut(e,t){let n={};if(y(n,await oe(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await zi({...e,...n})){const r=await Ki(e);if(!r._isError)y(n,r);else{const i=vt(e._pageFilesAll,e._pageConfigs);s(i),n={},y(n,{isHydration:!1,_pageId:i}),y(n,await oe(e._pageFilesAll,e._pageConfigs,n._pageId)),s(p(r,"is404","boolean")),s(p(r,"pageProps","object")),s(p(r.pageProps,"is404","boolean")),s(!("serverSideError"in r)),y(n,r)}}else y(n,{_hasPageContextFromServer:!1}),t||await Fi({_hasPageContextFromClient:!1,...e,...n},r=>Ae(r,!0));{const r=await Gt({...e,...n});y(n,r)}return n}async function Gt(e){const t=G(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,r={_hasPageContextFromClient:!0},i=Ae({...e,...r},!0),o=await ce(()=>n(i),"onBeforeRender",t.hookFilePath);Ti(o,t.hookFilePath);const l=o==null?void 0:o.pageContext;return y(r,l),r}async function zi(e){return!!zt.pageContextInitHasClientData||await Ui(e)}function tt(e){e._pageContextInitHasClientData&&(zt.pageContextInitHasClientData=!0)}async function Ui(e){var t;if(e._pageConfigs.length>0){const n=yt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:n}=await qr(e._pageFilesAll,e._pageId);return n}}async function Gi(e){var t;if(e._pageConfigs.length>0){const n=yt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="client-only"}else return!1}async function Yi(e){const n=(await Wt(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw Mi(r),r}return s(p(n,"_pageId","string")),n}function Mi(e){y(e,{_is404:!0})}function Ji(e){return P(e)&&e._is404===!0}async function Ki(e){const t=e._urlRewrite??e._urlOriginalPristine??e.urlOriginal,n=ki(t),r=await fetch(n);{const l=r.headers.get("content-type"),a="application/json",u=l&&l.includes(a);if(!u&&r.status===404)throw re(e.urlOriginal),Xi();g(u,`Wrong Content-Type for ${n}: it should be ${a} but it's ${l} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}const i=await r.text(),o=le(i);if(s(P(o)),"serverSideError"in o)throw ut("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Ii(o))throw Ai(o);return s(p(o,"_pageId","string")),Vt(o),y(o,{_hasPageContextFromServer:!0}),o}function qi(e){return P(e)&&!!e._alreadyServerSideRouted}function Xi(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Qi(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(ne(({filesystemRoot:o})=>o.length))[0];let i;if(r){const{filesystemRoot:o,urlRoot:l}=r,a={pageId:e,filesystemRoot:o,urlRoot:l};s(l.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),a),s(e.startsWith(o),a),o!=="/"?(s(!o.endsWith("/"),a),i=F(e,o.length,0)):i=e,s(i.startsWith("/"),a),i=l+(l.endsWith("/")?"":"/")+F(i,1,0)}else i=e;return s(i.startsWith("/")),i=i.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!i.includes(".page.")),s(!i.endsWith(".")),i.endsWith("/index")&&(i=F(i,0,-6)),i===""&&(i="/"),s(i.startsWith("/")),s(!i.endsWith("/")||i==="/"),i}async function Zi(e,t,n,r){await Promise.all(e.filter(a=>a.fileType===".page.route").map(a=>{var u;return(u=a.loadFile)==null?void 0:u.call(a)}));const{onBeforeRouteHook:i,filesystemRoots:o}=to(e,t,n);return{pageRoutes:eo(o,e,t,r),onBeforeRouteHook:i}}function eo(e,t,n,r){const i=[];let o=[...r];if(n.length>0){s(e===null);const l=!0;n.filter(a=>!a.isErrorPage).forEach(a=>{const u=a.pageId;o=ro(o,u);let c=null;{const d="route",f=H(a,d);if(f){const w=f.value,m=Yn(f,d);typeof w=="string"?c={pageId:u,comesFromV1PageConfig:l,routeString:w,routeDefinedAt:m,routeType:"STRING"}:(s(I(w)),H(a,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&Qe(),c={pageId:u,comesFromV1PageConfig:l,routeFunction:w,routeDefinedAt:m,routeType:"FUNCTION"})}}if(!c){const{routeFilesystem:d}=a;s(d);const{routeString:f,definedBy:w}=d;s(d.routeString.startsWith("/")),c={pageId:u,routeFilesystemDefinedBy:w,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(c),i.push(c)})}if(n.length===0){s(e);const l=!1;o.filter(a=>!K(a)).forEach(a=>{const u=t.find(c=>c.pageId===a&&c.fileType===".page.route");if(!u||!("default"in u.fileExports)){const c=Qi(a,e);s(c.startsWith("/")),s(!c.endsWith("/")||c==="/"),i.push({pageId:a,comesFromV1PageConfig:l,routeString:c,routeDefinedAt:null,routeFilesystemDefinedBy:`${a}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:c,fileExports:d}=u;if(s(d.default),p(d,"default","string")){const f=d.default;g(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${c} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:a,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:c,routeType:"STRING"});return}if(p(d,"default","function")){const f=d.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in d&&Qe(),i.push({pageId:a,comesFromV1PageConfig:l,routeFunction:f,routeDefinedAt:c,routeType:"FUNCTION"});return}g(!1,`The default export of ${c} should be a string or a function.`)}})}return i}function to(e,t,n){var o;if(t.length>0){if((o=n.configValues.onBeforeRoute)!=null&&o.value){const l=n.configValues.onBeforeRoute,{value:a}=l,u=Mn(l);return g(I(a),`The hook onBeforeRoute() defined by ${u} should be a function.`),{onBeforeRouteHook:{hookFilePath:u,onBeforeRoute:a},filesystemRoots:null}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(l=>l.fileType===".page.route"&&l.isDefaultPageFile).forEach(({filePath:l,fileExports:a})=>{if(s(a),"onBeforeRoute"in a){g(p(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${l} should be a function.`);const{onBeforeRoute:u}=a;r={hookFilePath:`${l} > \`export { onBeforeRoute }\``,onBeforeRoute:u}}"filesystemRoutingRoot"in a&&(g(p(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${l} should be a string.`),g(p(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${l} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:no(l),urlRoot:a.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function no(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=F(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function ro(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),s(e.length===n-1),e}function Yt(){const e="/";return s(io(e)),e}function io(e){return e.startsWith("/")}const pe=k("createPageContext.ts",{});async function Mt(e){pe.pageFilesData||(pe.pageFilesData=await pr(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=pe.pageFilesData,{pageRoutes:o,onBeforeRouteHook:l}=await Zi(t,r,i,n),a=Yt();s(Oe(a));const c={_objectCreatedByVike:!0,_urlHandler:null,_urlRewrite:null,_baseServer:a,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:l};return y(c,e),Tt(c),c}async function Jt(e){const t=await Mt({urlOriginal:e}),n=await Wt(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function U(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function oo({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(a=>a.pageId===n&&a.fileType===".page")?(i(),!1):!(!t.some(a=>a.pageId===n&&a.fileType===".page.server")||e.some(a=>a.pageId===n&&a.fileType===".page.client"&&U(a).includes("render")))}function i(){const l=e.some(a=>U(a).includes("render"));g(l,["No client-side `render()` hook found.","See https://vike.dev/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((a,u)=>` (${u+1}): ${a.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(a=>U(a).includes("clientRouting"))}}function so({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const o=t.filter(a=>!e.includes(a)),l=[];if(l.push(...e.map(a=>({id:a.filePath,onlyAssets:!1,eagerlyImported:!1}))),l.push(...o.map(a=>({id:a.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(a=>a.filePath);else{const a=ao(r);l.push({id:a,onlyAssets:!1,eagerlyImported:!1}),i=[a]}return{clientEntries:i,clientDependencies:l}}function ao(e){return e?"@@vike/dist/esm/client/client-routing-runtime/entry.js":"@@vike/dist/esm/client/server-routing-runtime/entry.js"}function lo(e,t){let n=Fe(e,t);const r=Pt(e,t),{isHtmlOnly:i,isClientRouting:o}=oo({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(u=>u.isEnv("CLIENT_ONLY")&&!U(u).includes("render")),n=co(n));const{clientEntries:l,clientDependencies:a}=so({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:o});return{isHtmlOnly:i,isClientRouting:o,clientEntries:l,clientDependencies:a,pageFilesClientSide:n,pageFilesServerSide:r}}async function uo(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=Fe(e,t);await Promise.all(r.map(async i=>{var o;s(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((o=i.loadExportNames)==null?void 0:o.call(i))}))}function co(e){const t=[];for(const n of e)if(t.push(n),U(n).includes("overrideDefaultPages"))break;return t}function fo(e,t,n){var r,i;if(e){const o=((r=H(e,"clientRouting","boolean"))==null?void 0:r.value)??!1;return{isClientSideRenderable:((i=H(e,"isClientSideRenderable","boolean"))==null?void 0:i.value)??!1,isClientRouting:o}}else{const{isHtmlOnly:o,isClientRouting:l}=lo(t,n);return{isClientSideRenderable:!o,isClientRouting:l}}}async function Kt(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Jt(e);if(!t)return!1;await uo(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=Bt(r,t),{isClientSideRenderable:o,isClientRouting:l}=fo(i,n,t);return o&&l}function qt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Xt(e){const t=e.getAttribute("href");return!!(t===null||t===""||qt(t)||ho(e)||po(t)||!mo(t)||!ke(t)||!go(e))}function go(e){if(Wo()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function ho(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function po(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function mo(e){const t=Yt();s(Oe(t));const{hasBaseServer:n}=J(e,t);return n}function yo(e,t){let n=bo(e,t);return n==="viewport"&&!e._isProduction&&(Ce(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function bo(e,t){{const n=wo(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(A(n),r);const i=Object.keys(n);g(i.length===1&&i[0]==="when",r);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const l=o.toLowerCase();return R(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${l}' instead`,{onlyOnce:!0}),l}g(!1,r)}return"hover"}function wo(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),R(!1,r,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";g(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const Qt=new Map;function Zt(e){const t=tn(e);return Qt.has(t)}function en(e){const t=tn(e);Qt.set(t,!0)}function tn(e){return J(e,"/").pathname}D();const nt=new Map;async function vo(e){if(g(ft(),"prefetch() only works with Client Routing, see https://vike.dev/prefetch",{showStackTrace:!0}),g(!qt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),Zt(e))return;en(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Jt(e);if(t)try{await oe(n,r,t)}catch(i){if(Ie(i))Pe(i,!0);else throw i}}function So(e){en(e.urlPathname),[...document.getElementsByTagName("A")].forEach(n=>{if(nt.has(n))return;nt.set(n,!0);const r=n.getAttribute("href");if(Xt(n)||(s(r),Zt(r)))return;const{prefetchStaticAssets:i}=yo(e,n);if(i&&(i==="hover"&&(n.addEventListener("mouseover",()=>{me(r)}),n.addEventListener("touchstart",()=>{me(r)},{passive:!0})),i==="viewport")){const o=new IntersectionObserver(l=>{l.forEach(a=>{a.isIntersecting&&(me(r),o.disconnect())})});o.observe(n)}})}async function me(e){try{if(!await Kt(e))return}catch{return}await vo(e)}async function Ro(e,t){const n=Ae(e,t);let r=null,i;r=G(e,"render"),i="render";{const a=G(e,"onRenderClient");a&&(r=a,i="onRenderClient")}if(!r){const a=Po(e);if(e._pageConfigs.length>0)g(!1,`No onRenderClient() hook defined for URL '${a}', but it's needed, see https://vike.dev/onRenderClient`);else{const u=e._pageFilesLoaded.filter(d=>d.fileType===".page.client");let c;u.length===0?c="No file `*.page.client.*` found for URL "+a:c="One of the following files should export a `render()` hook: "+u.map(d=>d.filePath).join(" "),g(!1,c)}}s(r);const o=r.hookFn;s(i);const l=await ce(()=>o(n),i,r.hookFilePath);g(l===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function Po(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}function nn(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=on()),"scrollPosition"in e||(t=!0,e.scrollPosition=rn()),sn(e),t&&Le(e)}function je(){const e=window.history.state||{};return sn(e),e}function rn(){return{x:window.scrollX,y:window.scrollY}}function on(){return new Date().getTime()}function rt(){const e=rn(),t=je();Le({...t,scrollPosition:e})}function Eo(e,t){if(t)Le(je(),e);else{const n=on();_o({timestamp:n,scrollPosition:null},e)}}function sn(e){if(s(P(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(p(t,"x","number")&&p(t,"y","number"))}}function Le(e,t){window.history.replaceState(e,"",t??null)}function _o(e,t){window.history.pushState(e,"",t)}D();const $o=k("navigate.ts",{});function Co(e){$o.navigate=e}const _=k("useClientRouter.ts",{previousState:se()});jo();nn();function Pe(e,t){s(Ie(e)),_.clientRoutingIsDisabled=!0,t&&console.log(e),Ce(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function ko(){Ao(),Oo((i,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),To((i,o)=>{r({scrollTarget:i,isBackwardNavigation:o})}),Co(async(i,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:l=!1}={})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,overwriteLastHistoryEntry:l,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,urlOriginal:o=q(),overwriteLastHistoryEntry:l=!1,isBackwardNavigation:a,checkClientSideRenderable:u,pageContextsFromRewrite:c=[],redirectCount:d=0}){var Be;if(Wi(c.length,d),_.clientRoutingIsDisabled){re(o);return}const f=Li(c);if(u){const $=f._urlRewrite??o;let E;try{E=await Kt($)}catch(B){if(he(B))E=!0;else throw B}if(!E){re(o);return}}const w={urlOriginal:o,isBackwardNavigation:a,...f},m=++e;s(m>=1),m>1&&n===!1&&(await((Be=_.onPageTransitionStart)==null?void 0:Be.call(_,w)),n=!0);let v=!1;const C=()=>m===1&&v===!1?!1:m!==e,b=await Mt(w);if(C())return;const z=m===1;y(b,{_isFirstRenderAttempt:z});let X,O,We=!1;try{X=await Bi(b)}catch($){We=!0,O=$}if(We){if(he(O)||console.error(O),ot(O,b))return;if(he(O)){const $=O;ji(O,b._isProduction,b);const E=$._pageContextAbort;if(E._urlRewrite){await r({scrollTarget:i,urlOriginal:o,overwriteLastHistoryEntry:l,isBackwardNavigation:a,pageContextsFromRewrite:[...c,E],redirectCount:d});return}if(E._urlRedirect){const B=E._urlRedirect.url;if(B.startsWith("http")){window.location.href=B;return}else await r({scrollTarget:"scroll-to-top-or-hash",urlOriginal:B,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:c,redirectCount:d++});return}s(E.abortStatusCode),y(b,E),E.abortStatusCode===404&&y(b,{is404:!0})}else y(b,{is404:Ji(O)});try{X=await Vi(b)}catch($){if(ot($,b)||(z||setTimeout(()=>{window.location.pathname=o},0),Gr(O,$)))return;throw $}}if(s(X),y(b,X),ge(b,"onPageTransitionStart"),_.onPageTransitionStart=b.exports.onPageTransitionStart,b.exports.hydrationCanBeAborted?v=!0:R(!Ur(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/clientRouting",{onlyOnce:!0}),!C()&&(t&&await t,!C())){if(Fo(o,l),Ot.markNavigationChange(),s(t===void 0),t=(async()=>{await Ro(b,!0),So(b)})(),await t,t=void 0,b._isFirstRenderAttempt){ge(b,"onHydrationEnd");const{onHydrationEnd:$}=b.exports;if($){const E=b.exportsAll.onHydrationEnd[0].exportSource;s(E),await ce(()=>$(b),"onHydrationEnd",E)}}else m===e&&(b.exports.onPageTransitionEnd&&(ge(b,"onPageTransitionEnd"),await b.exports.onPageTransitionEnd(b)),n=!1);an(i),Ne(),_.initialRenderIsDone=!0}}}function Oo(e){document.addEventListener("click",t);return;function t(i){if(!n(i))return;const o=r(i.target);if(!o)return;const l=o.getAttribute("href");if(Xt(o))return;s(l),i.preventDefault();const a=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(l,{keepScrollPosition:a})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:o}=i;if(!o)return null;i=o}return i}}function To(e){window.addEventListener("popstate",()=>{const t=se(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===_.previousState.urlWithoutHash,i=!t.historyState.timestamp||!_.previousState.historyState.timestamp?null:t.historyState.timestamp<_.previousState.historyState.timestamp;_.previousState=t,r?window.history.state===null?(nn(),_.previousState=se()):an(n):e(n,i)})}function Fo(e,t){q()!==e&&(Ne(),Eo(e,t),_.previousState=se())}function se(){return{urlWithoutHash:q({withoutHash:!0}),historyState:je()}}function an(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Io();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;xo(t)}function xo(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await Yr(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function Ao(){window.addEventListener("scroll",Mr(rt,Math.ceil(1e3/3)),{passive:!0}),ln(rt)}function Io(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function jo(){it(),ln(it),Lo(()=>_.initialRenderIsDone&&Ne())}function Ne(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function it(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function ln(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Lo(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function ot(e,t){return!!(qi(e)||No(e,t))}function No(e,t){if(!Ie(e))return!1;if(t._isFirstRenderAttempt)throw Pe(e,!1),e;return Pe(e,!0),re(t.urlOriginal),!0}function Wo(){return!!window._disableAutomaticLinkInterception}D();const Bo=!0;hn(Bo);ko();
