function sn(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function we(e,t){let n;{var i=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=i}return sn()&&(n.stack=ln(n.stack,t)),n}function ln(e,t){if(!e)return e;const n=un(e);let i=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:i<t&&an(o)?(i++,!1):!0).join(`
`)}function an(e){return e.startsWith("    at ")}function un(e){return e.split(/\r?\n/)}function C(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function P(e){return typeof e=="object"&&e!==null}function Ee(e){return Array.from(new Set(e))}const T=C("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),cn="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vite-plugin-ssr.com/client-runtimes-conflict",ot="Two vite-plugin-ssr client runtime instances are being loaded. Make sure your client-side bundles don't include vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)";function st(){{const e=Ee(T.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;gn(!1,t)}}T.checkSingleInstance&&T.instances.length>1&&me(!1,ot,{onlyOnce:!0,showStackTrace:!0})}function fn(e){me(T.isClientRouting!==!1,cn,{onlyOnce:!0,showStackTrace:!0}),me(T.isClientRouting===void 0,ot,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),st()}function dn(e){T.instances.push(e),st()}function gn(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function me(e,t,{onlyOnce:n,showStackTrace:i}){if(e)return;const r=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=T,l=n===!0?r:n;if(o.has(l))return;o.add(l)}console.warn(i?new Error(r):r)}const hn="0.4.136",B={projectName:"vite-plugin-ssr",projectVersion:hn,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};dn(B.projectVersion);const lt=new Proxy(e=>e,{get:()=>lt}),U=lt,E=C("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),pn=`[${B.npmPackageName}]`,mn=`[${B.npmPackageName}@${B.projectVersion}]`,Fe=2;function s(e,t){var n;if(e)return;const i=(()=>{if(!t)return null;const l=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${B.projectName} maintainers; you can ignore this): ${l}`})();let r=[`You stumbled upon a bug in ${B.projectName}'s source code.`,`Go to ${B.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,i].filter(Boolean).join(" ");r=Y(r),r=le(r,"Bug"),r=M(r,!0);const o=we(r,Fe);throw(n=E.onBeforeLog)===null||n===void 0||n.call(E),o}function h(e,t,{showStackTrace:n}={}){var i;if(e)return;t=Y(t),t=le(t,"Wrong Usage"),t=M(t);const r=we(t,Fe);throw n&&E.showStackTraceList.add(r),(i=E.onBeforeLog)===null||i===void 0||i.call(E),r}function at(e){return e=Y(e),e=le(e,"Error"),e=M(e),we(e,Fe)}function b(e,t,{onlyOnce:n,showStackTrace:i}){var r;if(!e){if(t=Y(t),t=le(t,"Warning"),t=M(t),n){const{alreadyLogged:o}=E,l=n===!0?t:n;if(o.has(l))return;o.add(l)}if((r=E.onBeforeLog)===null||r===void 0||r.call(E),i){const o=new Error(t);E.showStackTraceList.add(o),E.logger(o,"warn")}else E.logger(t,"warn")}}function Se(e,t,{onlyOnce:n}){var i;if(!e){if(t=Y(t),t=M(t),n){const{alreadyLogged:r}=E,o=t;if(r.has(o))return;r.add(o)}(i=E.onBeforeLog)===null||i===void 0||i.call(E),E.logger(t,"info")}}function le(e,t){let n=`[${t}]`;const i=t==="Warning"?"yellow":"red";return n=U.bold(U[i](n)),`${n}${e}`}function Y(e){return e.startsWith("[")?e:` ${e}`}function M(e,t=!1){return`${t?mn:pn}${e}`}function I(){return typeof window<"u"&&typeof window.scrollY=="number"}const ut=C("utils/assertRouterType.ts",{});function H(){vn(ct()),ut.isClientRouting=!0}function ct(){return ut.isClientRouting!==!1}function vn(e){h(I(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),b(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const yn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ft=["vue","svelte","marko","md","mdx"],_n=[...yn,...ft];function dt(e){const t=_n.some(n=>e.endsWith("."+n));return s(!bn(e)||t),t}function bn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function Pn(e){return ft.some(t=>e.endsWith("."+t))}function A(e,t,n){return typeof e=="string"?Ne(e.split(""),t,n).join(""):Ne(e,t,n)}function Ne(e,t,n){const i=[];let r=t>=0?t:e.length+t;s(r>=0&&r<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(r===o||(r===e.length&&(r=0),r===o));){const l=e[r];s(l!==void 0),i.push(l),r++}return i}function Oe(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Rn(e,t){s(t.includes(" but ")),h(typeof e=="string",`${t} should be a string`),!Oe(e)&&(!e.startsWith("/")&&!e.includes(":")?h(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):h(!1,`${t} isn't a valid URL`))}function J(e,t){s(Oe(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...i]=e.split("#");s(n!==void 0);const r=["",...i].join("#")||null;s(r===null||r.startsWith("#"));const o=r===null?"":ve(r.slice(1)),[l,...a]=n.split("?");s(l!==void 0);const c=["",...a].join("?")||null;s(c===null||c.startsWith("?"),{url:e,searchOriginal:c});const u={},f={};Array.from(new URLSearchParams(c||"")).forEach(([R,N])=>{u[R]=N,f[R]=[...f[R]||[],N]});const{origin:d,pathnameResolved:p}=En(l,t);s(d===null||d===ve(d),{origin:d}),s(p.startsWith("/"),{url:e,pathnameResolved:p}),s(d===null||e.startsWith(d),{url:e,origin:d});const m=l.slice((d||"").length);{const R=`${d||""}${m}${c||""}${r||""}`;s(e===R,{url:e,urlRecreated:R})}let{pathname:y,hasBaseServer:w}=Sn(p,t);return y=wn(y),s(y.startsWith("/")),{origin:d,pathname:y,pathnameOriginal:m,hasBaseServer:w,search:u,searchAll:f,searchOriginal:c,hash:o,hashOriginal:r}}function ve(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function wn(e){return e.split("/").map(t=>ve(t).split("/").join("%2F")).join("/")}function En(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let i=!1;const r="tauri://",o="http://";e.startsWith(r)&&(i=!0,e=o+e.slice(r.length));let l,a;try{const c=new URL(e);l=c.origin,a=c.pathname}catch{l=null;let u=typeof window<"u"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);u=u||"http://fake.example.org"+t,a=new URL(e,u).pathname}return a||(a="/"),i&&(s(l),s(l.startsWith(o)),l=r+l.slice(o.length)),s(a.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:a}),s(a===a.split("?")[0].split("#")[0]),{origin:l,pathnameResolved:a}}function Fn(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function Sn(e,t){Fn(e),s(Ce(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let i=t;return t.endsWith("/")&&n===A(t,0,-1)&&(i=A(t,0,-1),s(n===i)),n.startsWith(i)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(i)),n=n.slice(i.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Ce(e){return e.startsWith("/")}function v(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function L(e){return e instanceof Function||typeof e=="function"}function ee(e){return(t,n)=>{const i=e(t),r=e(n);return i===r?0:i>r?-1:1}}function D(e){return(t,n)=>{const i=e(t),r=e(n);if(s([!0,!1,null].includes(i)),s([!0,!1,null].includes(r)),i===r)return 0;if(i===!0||r===!1)return-1;if(r===!0||i===!1)return 1;s(!1)}}function On(e){return D(t=>{const n=e(t);return n===null?null:!n})}function g(e,t,n="unknown"){if(!P(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const i=e[t];return n==="array"?Array.isArray(i):n==="object"?P(i):n==="string[]"?Array.isArray(i)&&i.every(r=>typeof r=="string"):n==="function"?L(i):Array.isArray(n)?typeof i=="string"&&n.includes(i):n==="null"?i===null:n==="undefined"?i===void 0:n==="true"?i===!0:n==="false"?i===!1:typeof i===n}function j(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function Cn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const kn=e=>e!=null;function We(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function gt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes("\\"),t(e))}function fe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function xn(e){return typeof e=="object"&&e!==null&&"then"in e&&L(e.then)}const Tn=["$$registrations","_rerender_only"],An=[".md",".mdx"];function $n(e,t){jn(e,t,!0)}function jn(e,t,n){const r=Object.keys(e).filter(a=>!Tn.includes(a)),o=r.filter(a=>a!=="default"),l=r.includes("default");if(o.length===0){if(l)return;s(r.length===0),h(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!An.some(a=>t.endsWith(a))){const a=o.join(", ");n?b(o.length===0,`${t} should only have a default export: remove \`export { ${a} }\``,{onlyOnce:!0}):b(o.length===0,`${t} replace \`export { ${a} }\` with \`export default { ${a} }\``,{onlyOnce:!0})}}function In(e){return Object.entries(e)}const Ln=["clientRouting"];function Dn(e){Ln.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;h(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),h(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const ht=["render","clientRouting","prerender","doNotPrerender"];function Bn(e,t){h(!ht.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Nn(e,t){const n={},i={},r={};if(e.forEach(a=>{Wn(a).forEach(({exportName:u,exportValue:f,isFromDefaultExport:d})=>{var p;s(u!=="default"),r[u]=(p=r[u])!==null&&p!==void 0?p:[],r[u].push({exportValue:f,exportSource:`${a.filePath} > ${d?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:a.filePath,_filePath:a.filePath,_fileType:a.fileType,_isFromDefaultExport:d})})}),t){const{configValues:a}=t;In(a).forEach(([c,u])=>{var f,d,p;const m=t.configElements[c];s(m);const{configDefinedByFile:y,configDefinedAt:w}=m;s(y),i[c]=(f=i[c])!==null&&f!==void 0?f:u,n[c]=(d=n[c])!==null&&d!==void 0?d:[],s(n[c].length===0),n[c].push({configValue:u,configDefinedAt:w,configDefinedByFile:y});const R=c;r[R]=(p=r[R])!==null&&p!==void 0?p:[],r[R].push({exportValue:u,exportSource:w,filePath:y,_filePath:y,_fileType:null,_isFromDefaultExport:null})})}const o=Hn(),l={};return Object.entries(r).forEach(([a,c])=>{c.forEach(({exportValue:u,_fileType:f,_isFromDefaultExport:d})=>{var p;l[a]=(p=l[a])!==null&&p!==void 0?p:u,f===".page"&&!d&&(a in o||(o[a]=u))})}),s(!("default"in l)),s(!("default"in r)),{config:i,configEntries:n,exports:l,exportsAll:r,pageExports:o}}function Wn(e){const{filePath:t,fileExports:n}=e;s(n),s(dt(t));const i=[];return Object.entries(n).sort(On(([r])=>r==="default")).forEach(([r,o])=>{let l=r==="default";if(l)if(Pn(t))r="Page";else{h(P(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([a,c])=>{Bn(a,t),i.push({exportName:a,exportValue:c,isFromDefaultExport:l})});return}i.push({exportName:r,exportValue:o,isFromDefaultExport:l})}),i.forEach(({exportName:r,isFromDefaultExport:o})=>{s(!(o&&ht.includes(r)))}),i}function Hn(){return new Proxy({},{get(...e){return I()||b(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function Vn(e){const t=".page.",n=A(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function W(e){gt(e)}function pt(e,t){if(t.length>0){const i=t.filter(r=>r.isErrorPage);return i.length===0?null:(h(i.length===1,"Only one error page can be defined"),i[0].pageId)}const n=Ee(e.map(({pageId:i})=>i).filter(i=>K(i)));if(h(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const i=n[0];return s(i),i}return null}function K(e,t){return s(!e.includes("\\")),e.includes("/_error")}function zn(e,t){if(t.length>0){const n=t.find(i=>i.pageId===e);return s(n),n.isErrorPage}else return K(e)}const Un=[".page",".page.server",".page.route",".page.client",".css"];function Gn(e){if(gt(e),e.endsWith(".css"))return".css";s(dt(e),e);const n=e.split("/").slice(-1)[0].split("."),i=n.slice(-3)[0],r=n.slice(-2)[0];if(r==="page")return".page";if(s(i==="page",e),r==="server")return".page.server";if(r==="client")return".page.client";if(r==="route")return".page.route";s(!1,e)}function mt(e){const t=o=>r.pageId===o||r.isDefaultPageFile&&(He(r.filePath)||Yn(o,r.filePath)),n=Gn(e),r={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:ye(e),isRendererPageFile:n!==".css"&&ye(e)&&He(e),isErrorPageFile:K(e),pageId:Vn(e)};return r}function ye(e){return W(e),K(e)?!1:e.includes("/_default")}function He(e){return W(e),e.includes("/renderer/")}function Yn(e,t){W(e),W(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(ye(t));const n=A(t.split("/"),0,-1).filter(i=>i!=="_default").join("/");return e.startsWith(n)}function Mn(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(P(t)),s(g(t,"pageId","string")),s(g(t,"routeFilesystem","string")||g(t,"routeFilesystem","null")),s(g(t,"routeFilesystemDefinedBy","string")||g(t,"routeFilesystemDefinedBy","null")),s(g(t,"loadCodeFiles","function")),s(g(t,"isErrorPage","boolean")),s(g(t,"configElements","object")),vt(t.configElements,!1)})}function Jn(e){vt(e,!0)}function vt(e,t){s(P(e)),Object.entries(e).forEach(([n,i])=>{if(s(P(i)||i===null),i===null){s(t);return}s(g(i,"configDefinedAt","string")),s(g(i,"plusConfigFilePath","string")||g(i,"plusConfigFilePath","null")),s(g(i,"configEnv","string")),s(g(i,"codeFilePath","string")||g(i,"codeFilePath","null")),s(g(i,"codeFileExport","string")||g(i,"codeFileExport","null")),s(g(i,"configValueSerialized","string")||g(i,"configValueSerialized","undefined")),(t||n==="route")&&s(g(i,"configValue")||g(i,"configValueSerialized"))})}const Kn=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],i=t[2];return new RegExp(n,i)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function ae(e){const t=JSON.parse(e);return yt(t)}function yt(e){return typeof e=="string"?qn(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=yt(n)}),e)}function qn(e){for(const{match:t,deserialize:n}of Kn)if(t(e))return n(e,ae);return e}function Xn(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,i])=>{Qn(i),n==="route"&&Zn(i)})})}function Qn(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=ae(t))}function Zn(e){s(g(e,"configValue"));const{configValue:t}=e,n=typeof t;h(n==="string"||L(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function ei(e){s(g(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(g(e,"pageFilesLazy","object")),s(g(e,"pageFilesEager","object")),s(g(e,"pageFilesExportNamesLazy","object")),s(g(e,"pageFilesExportNamesEager","object")),s(g(e.pageFilesLazy,".page")),s(g(e.pageFilesLazy,".page.client")||g(e.pageFilesLazy,".page.server")),s(g(e,"pageFilesList","string[]")),s(g(e,"pageConfigs")),s(g(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;Mn(t),Xn(t),Jn(n);const i={};Q(e.pageFilesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;Ve(u),l.loadFile=async()=>{"fileExports"in l||(l.fileExports=await u(),Dn(l))}}),Q(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;Ve(u),l.loadExportNames=async()=>{if(!("exportNames"in l)){const f=await u();h("exportNames"in f,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(g(f,"exportNames","string[]"),l.filePath),l.exportNames=f.exportNames}}}),Q(e.pageFilesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;s(P(u)),l.fileExports=u}),Q(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;s(P(u)),s(g(u,"exportNames","string[]"),l.filePath),l.exportNames=u.exportNames}),e.pageFilesList.forEach(o=>{var l;i[o]=(l=i[o])!==null&&l!==void 0?l:mt(o)});const r=Object.values(i);return r.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:r,pageConfigs:t,pageConfigGlobal:n}}function Q(e){const t=[];return Object.entries(e).forEach(([n,i])=>{s(Un.includes(n)),s(P(i)),Object.entries(i).forEach(([r,o])=>{const l=mt(r);s(l.fileType===n),t.push({filePath:r,pageFile:l,globValue:o})})}),t}function Ve(e){s(L(e))}const $=C("setPageFiles.ts",{});function ti(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:i}=ei(e);$.pageFilesAll=t,$.pageConfigs=n,$.pageConfigGlobal=i}async function ni(e,t){e?(s(!$.pageFilesGetter),s(t===void 0)):(s($.pageFilesGetter),s(typeof t=="boolean"),(!$.pageFilesAll||!t)&&await $.pageFilesGetter());const{pageFilesAll:n,pageConfigs:i,pageConfigGlobal:r}=$;s(n&&i&&r);const o=ii(n,i);return{pageFilesAll:n,allPageIds:o,pageConfigs:i,pageConfigGlobal:r}}function ii(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),i=Ee(n),r=t.map(o=>o.pageId);return[...i,...r]}function ke(e,t){return bt(e,t,!0)}function _t(e,t){return bt(e,t,!1)}function bt(e,t,n){const i=n?"CLIENT_ONLY":"SERVER_ONLY",r=e.filter(m=>m.isRelevant(t)&&m.fileType!==".page.route").sort(ri(n,t)),o=m=>{const y=r.filter(R=>R.pageId===t&&R.isEnv(m?"CLIENT_AND_SERVER":i));h(y.length<=1,`Merge the following files into a single file: ${y.map(R=>R.filePath).join(" ")}`);const w=y[0];return s(w===void 0||!w.isDefaultPageFile),w},l=o(!1),a=o(!0),c=m=>r.filter(y=>y.isRendererPageFile&&y.isEnv(m?"CLIENT_AND_SERVER":i))[0],u=c(!1),f=c(!0),d=r.filter(m=>m.isDefaultPageFile&&!m.isRendererPageFile&&(m.isEnv(i)||m.isEnv("CLIENT_AND_SERVER")));return[l,a,...d,u,f].filter(kn)}function ri(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",i=-1,r=1,o=0;return(l,a)=>{if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;{const c=l.isRendererPageFile,u=a.isRendererPageFile;if(!c&&u)return i;if(!u&&c)return r;s(c===u)}{const c=ze(t,l.filePath),u=ze(t,a.filePath);if(c<u)return i;if(u<c)return r;s(c===u)}{if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i;if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r}return o}}function ze(e,t){W(e),W(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const i=e.slice(n),r=t.slice(n),o=i.split("/").length,l=r.split("/").length;return o+l}const oi="modulepreload",si=function(e){return"/"+e},Ue={},Ge=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=si(o),o in Ue)return;Ue[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!i)for(let f=r.length-1;f>=0;f--){const d=r[f];if(d.href===o&&(!l||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":oi,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},xe={},Pt={},li={},ue={},ai=[],Rt={},ui=!0,ci=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await Ge(()=>import("./pages_error.805a5090.js"),["assets/entries/pages_error.805a5090.js","assets/chunks/chunk-4f7acd89.js","assets/static/LayoutDefault.db2c706e.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/_error/+Page.tsx > `export default`",configDefinedByFile:"/pages/_error/+Page.tsx",codeFilePath:"/pages/_error/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { passToClient }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { clientRouting }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx > `export default`",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.h.ts > `export default { title }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.h.ts > `export default { description }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await Ge(()=>import("./pages_index.08bce1d6.js"),["assets/entries/pages_index.08bce1d6.js","assets/chunks/chunk-4f7acd89.js","assets/static/LayoutDefault.db2c706e.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.tsx > `export default`",configDefinedByFile:"/pages/index/+Page.tsx",codeFilePath:"/pages/index/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { passToClient }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { clientRouting }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.136/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx > `export default`",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.h.ts > `export default { title }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.h.ts > `export default { description }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}}],fi={onBeforeRoute:null},di=Object.assign({}),gi={...di};xe[".page"]=gi;const hi=Object.assign({}),pi={...hi};ue[".page"]=pi;const mi=Object.assign({}),vi={...mi};ue[".page.server"]=vi;const yi=Object.assign({}),_i={...yi};Pt[".page.route"]=_i;const bi=Object.assign({}),Pi={...bi};xe[".page.client"]=Pi;const Ri=Object.assign({}),wi={...Ri};ue[".page.client"]=wi;const Ei=Object.assign({}),Fi={...Ei};Rt[".page.server"]=Fi;const Si=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:ui,neverLoaded:Rt,pageConfigGlobal:fi,pageConfigs:ci,pageFilesEager:Pt,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:li,pageFilesLazy:xe,pageFilesList:ai},Symbol.toStringTag,{value:"Module"}));ti(Si);function wt(){s(I())}function Oi(){wt(),H()}function Ci(){wt()}function Ye(e){const t=e/1e3;if(t<120){const n=Me(t);return`${n} second${Je(n)}`}{const n=t/60,i=Me(n);return`${i} minute${Je(i)}`}}function Me(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Je(e){return e==="1"?"":"s"}const ki=C("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:i,timeoutWarn:r}=xi(t);let o,l;const a=new Promise((d,p)=>{o=m=>{c(),d(m)},l=m=>{c(),p(m)}}),c=()=>{clearTimeout(u),clearTimeout(f)},u=setTimeout(()=>{b(!1,`The ${t}() hook defined by ${n} is taking more than ${Ye(r)}`,{onlyOnce:!1})},r),f=setTimeout(()=>{const d=at(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ye(i)}`);l(d)},i);return(async()=>{try{const d=await e();o(d)}catch(d){P(d)&&ki.userHookErrors.set(d,{hookName:t,hookFilePath:n}),l(d)}})(),a}function xi(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function q(e){const t=window.location.href,{searchOriginal:n,hashOriginal:i,pathname:r}=J(t,"/");let o;return e!=null&&e.withoutHash?o=`${r}${n||""}`:o=`${r}${n||""}${i||""}`,s(o.startsWith("/")),o}Ci();function Ti(){var e,t,n,i;const r=!!(!((t=(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||e===void 0?void 0:e.renderers)===null||t===void 0)&&t.size),o=!!(!((i=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||n===void 0?void 0:n.rendererInterfaces)===null||i===void 0)&&i.size),l=!!window.__vite_plugin_react_preamble_installed__;return r||o||l}function Et(e,t){const n=Object.keys,i=typeof e;return e&&t&&i==="object"&&i===typeof t?n(e).length===n(t).length&&n(e).every(o=>Et(e[o],t[o])):e===t}function Ai(e,t){return P(e)&&P(t)&&e.constructor===t.constructor&&Et({...e,stack:null},{...t,stack:null})&&t.message===t.message}function ne(e){window.location.href=e}function $i(e){return new Promise(t=>setTimeout(t,e))}function ji(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}Oi();const Ke=C("navigationState.ts",{}),Ii=q(),Ft={markNavigationChange(){Ke.navigationChanged=!0},get noNavigationChangeYet(){return!Ke.navigationChanged&&this.isFirstUrl(q())},isFirstUrl(e){return e===Ii}};function Li(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);h(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const i=ae(n);return s(g(i,"_pageId","string")),v(i,{_hasPageContextFromServer:!0}),i}async function Di(e,t){const i=_t(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(i.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:i.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Bi(e,t){if(!j(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Ni(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}I()&&H();function St(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(fe(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:Ct,enumerable:t,configurable:!0}),"url"in e&&s(fe(e,"url")),Object.defineProperty(e,"url",{get:Wi,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(fe(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Hi,enumerable:t,configurable:!0})}function Ot(e){var t;let n=e._urlHandler;n||(n=l=>l);const i=(t=e._urlRewrite)!==null&&t!==void 0?t:e.urlOriginal;s(i&&typeof i=="string");const r=n(i),o=e._baseServer;return s(o.startsWith("/")),J(r,o)}function Ct(){const{pathname:e}=Ot(this),t=e;return s(t.startsWith("/")),t}function Wi(){return b(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Ct.call(this)}function Hi(){const e=Ot(this),{origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:l,hash:a,hashOriginal:c}=e,u=d=>{b(I(),`pageContext.urlParsed.${d} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:l,get hash(){return u("hash"),a},get hashOriginal(){return u("hashOriginal"),c},get hashString(){return b(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),u("hashString"),c},get searchString(){return b(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),l}};return qe(f,"hashString"),qe(f,"searchString"),f}function qe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function Vi(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(j(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const kt="@",_e=":";function zi(e,t="Invalid"){s(t.endsWith("Invalid")||t.endsWith("invalid")),h(e!=="",`${t} Route String ${x(e)} (empty string): set it to ${x("/")} instead`),h(e.startsWith("/")||e==="*",`${t} Route String ${x(e)}: Route Strings should start with a leading slash ${x("/")} (or be ${x("*")})`)}function be(e,t){zi(e),s(t.startsWith("/"));const n=e.split("/"),i=t.split("/"),r={};Ui(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,i.length);o++){const l=n[o],a=i[o];if(l==="*")return r["*"]=i.slice(Math.max(1,o)).join("/"),{routeParams:r};if(l&&te(l)){if(b(!l.startsWith(_e),`Outdated Route String \`${e}\`, use \`${e.split(_e).join(kt)}\` instead.`,{onlyOnce:!0}),!a)return null;r[l.slice(1)]=a}else if((l||"")!==(a||""))return null}return{routeParams:r}}function Ui(e){const t=e.split("*").length-1;h(t<=1,`Invalid Route String ${x(e)}: Route Strings aren't allowed to contain more than one glob ${x("*")}`),h(t===0||t===1&&e.endsWith("*"),`Invalid Route String ${x(e)}: make sure it ends with ${x("*")}`)}function V(e){const t=e.split("/").filter(l=>l!==""&&l!=="*");let n=0;for(const l of t){if(te(l))break;n++}const i=t.filter(l=>!te(l)).length,r=t.filter(l=>te(l)).length,o=e.endsWith("*");return{numberOfParameterSegments:r,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:i,isCatchAll:o}}function te(e){return e.startsWith(kt)||e.startsWith(_e)}function Xe(e){const n=be(e,e);return s(n),Object.keys(n.routeParams).length===0}function x(e){return I()?`'${e}'`:(e===""&&(e="''"),U.bold(e))}function Gi(e){e.sort(Yi).sort(D(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(D(t=>t.routeType==="STRING"&&Xe(t.routeString)===!1)).sort(D(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(D(t=>t.routeType==="STRING"&&Xe(t.routeString)===!0)).sort(D(t=>t.routeType==="FILESYSTEM")).sort(D(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Yi(e,t){var n,i;{const r=(n=e.precedence)!==null&&n!==void 0?n:0,o=(i=t.precedence)!==null&&i!==void 0?i:0;if(r!==o)return r>o?-1:1}if(!t.routeString||!e.routeString)return 0;{const o=ee(l=>V(l).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(o!==0)return o}{const o=ee(l=>V(l).numberOfStaticSegements)(e.routeString,t.routeString);if(o!==0)return o}{const o=ee(l=>V(l).numberOfParameterSegments)(e.routeString,t.routeString);if(o!==0)return o}{if(V(t.routeString).isCatchAll)return-1;if(V(e.routeString).isCatchAll)return 1}return 0}async function Mi(e,t,n){Vi(t);let i=e(t);if(xt(i,`The Route Function ${n}`),i=await i,i===!1)return null;if(i===!0&&(i={}),h(j(i),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${g(i,"constructor")?i.constructor:i}\`.`),"match"in i){const{match:l}=i;if(h(typeof l=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!l)return null}let r=null;"precedence"in i&&(r=i.precedence,h(typeof r=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),Tt(i,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=i.routeParams||{};return h(!("pageContext"in i),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(j(o)),Object.keys(i).forEach(l=>{h(l==="match"||l==="routeParams"||l==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${l} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:r,routeParams:o}}function xt(e,t){b(!xn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function Tt(e,t){s(t.endsWith(" should")),g(e,"routeParams")&&(s(t.endsWith(" should")),h(j(e.routeParams),`${t} be a plain JavaScript object.`),h(Ni(e.routeParams),`${t} only hold string values.`))}function At(e,{hookName:t,hookFilePath:n}){if(e==null)return;s(!t.endsWith(")"));const i=`The \`pageContext\` object provided by the ${t}() hook defined by ${n}`;h(P(e),`${i} should be an object instead of \`${typeof e}\``),h(!("_objectCreatedByVitePluginSsr"in e),`${i} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),b(!("_pageId"in e),`${i} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),h(!("is404"in e),`${i} sets \`pageContext.is404\` which is forbidden, use \`throw render()\` instead, see https://vite-plugin-ssr.com/render`)}async function Ji(e,t){let n=e.onBeforeRoute(t);xt(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const i=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(h(n==null||Bi(n,["pageContext"])&&g(n,"pageContext"),`${i} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(h(g(n,"pageContext","object"),`${i} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),g(n.pageContext,"_pageId")&&!g(n.pageContext,"_pageId","null")){const o=`${i} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;h(g(n.pageContext,"_pageId","string"),`${o} a string or null`),h(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(l=>`'${l}'`).join(", ")}]\`.`)}g(n.pageContext,"routeParams")&&Tt(n.pageContext,`${i} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const r={};return g(n.pageContext,"url")&&(b(!1,`${i} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),g(n.pageContext,"urlOriginal")&&(Rn(n.pageContext.urlOriginal,`${i} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),v(r,{_urlOriginalPristine:t.urlOriginal})),At(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),v(r,n.pageContext),r}var Z;function Qe(...e){var t,n;Z||(Z=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),Z&&Z(...e)}I()&&H();async function $t(e){St(e),Qe("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const l=await Ji(e._onBeforeRouteHook,e);if(l){if(v(t,l),g(t,"_pageId","string")||g(t,"_pageId","null"))return g(t,"routeParams")?s(g(t,"routeParams","object")):v(t,{routeParams:{}}),v(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};v(e,t)}}v(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),h(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),h(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:i}=e;s(i.startsWith("/"));const r=[];await Promise.all(e._pageRoutes.map(async l=>{const{pageId:a,routeType:c}=l;if(l.routeType==="FILESYSTEM"){const{routeString:u}=l,f=be(u,i);if(f){const{routeParams:d}=f;r.push({pageId:a,routeParams:d,routeString:u,routeType:c})}return}if(l.routeType==="STRING"){const{routeString:u}=l,f=be(u,i);if(f){const{routeParams:d}=f;s(c==="STRING"),r.push({pageId:a,routeString:u,routeParams:d,routeType:c})}return}if(l.routeType==="FUNCTION"){const{routeFunction:u,routeDefinedAt:f}=l,d=await Mi(u,e,f);if(d){const{routeParams:p,precedence:m}=d;r.push({pageId:a,precedence:m,routeParams:p,routeType:c})}return}s(!1)})),Gi(r);const o=r[0];if(Qe(`Route matches for URL \`${i}\` (in precedence order):`,r),v(t,{_routeMatches:r}),!o)return v(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:l}=o;s(j(l)),v(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function G(e,t){if(!(t in e.exports))return null;const n=e.exports[t],i=e.exportsAll[t][0];s(i.exportValue===n);const r=i.exportSource;return s(r),s(!t.endsWith(")")),h(L(n),`hook ${t}() defined by ${r} should be a function`),{hookFn:n,hookName:t,hookFilePath:r}}function de(e,t){G(e,t)}function Ki(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[i])=>Cn(n,i)).forEach(([n,i])=>{e[n]=i})}function qi(e){Xi(e),Qi(e)}function Xi(e){zn(e._pageId,e._pageConfigs)&&s(g(e,"is404","boolean"))}function Qi(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!P(t)){b(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const Zi="not-serializable",ie=C("getPageContextProxyForUser.ts",{});function er(e){return s([!0,!1].includes(e._hasPageContextFromServer)),s([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const i=e[n],r=JSON.stringify(n);return h(i!==Zi,`pageContext[${r}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),tr(e,n,`pageContext[${r}] isn't available on the client-side because ${r} is missing in passToClient, see https://vite-plugin-ssr.com/passToClient`),i}})}function tr(e,t,n){ie.prev===t||ie.prev==="__v_raw"||(rr(t),!(t in e)&&(ir(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&h(!1,n)))}const nr=["then","toJSON"];function ir(e){return!!(nr.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function rr(e){ie.prev=e,window.setTimeout(()=>{ie.prev=void 0},0)}function Te(e,t){if(t){const r=e;s([!0,!1].includes(r.isHydration)),s([!0,!1,null].includes(r.isBackwardNavigation))}else{const r=e;s(r.isHydration===!0),s(r.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(P(e.pageExports));const n=e.exports.Page;v(e,{Page:n}),or(e),Ki(e);const i=er(e);return qi(e),i}function or(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function jt(e,t){var n;const i=e.filter(o=>o.pageId===t);return s(i.length<=1),(n=i[0])!==null&&n!==void 0?n:null}async function sr(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(r=>{const{configName:o,codeFilePath:l}=r;let a;if(r.isPlusFile){const{codeFileExports:c}=r;o!=="client"&&$n(c,l),Object.entries(c).forEach(([u,f])=>{const d=u!=="default",p=d?u:r.configName,m=f;if(n[p]=m,d){const y=e.configElements[r.configName];s(y),e.configElements[p]={configValue:m,codeFileExport:u,codeFilePath:l,configDefinedByFile:l,configDefinedAt:`${l} > export { ${u} }`,configEnv:y.configEnv,plusConfigFilePath:null}}})}else a=r.codeFileExportValue,n[o]=a}),Object.entries(e.configElements).map(([r,o])=>{o.codeFilePath||(n[r]=o.configValue)}),v(e,{configValues:n})),e}const It="__whileFetchingAssets";async function re(e,t,n){const i=ke(e,n),r=jt(t,n);let o;try{o=(await Promise.all([r&&sr(r,!1),...i.map(m=>{var y;return(y=m.loadFile)===null||y===void 0?void 0:y.call(m)})]))[0]}catch(p){throw lr(p)&&Object.assign(p,{[It]:!0}),p}const{config:l,configEntries:a,exports:c,exportsAll:u,pageExports:f}=Nn(i,o);return{config:l,configEntries:a,exports:c,exportsAll:u,pageExports:f,_pageFilesLoaded:i}}function Ae(e){return e?e[It]===!0:!1}function lr(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Ze=["urlPathname","urlParsed"],ar=["Page","pageExports","exports"];function Lt(e){[...ar,...Ze].forEach(n=>{n in e&&(Ze.includes(n)?(s(n.startsWith("url")),b(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):b(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}const ur="/";function cr(e,t,n){const{pathnameOriginal:i,searchOriginal:r,hashOriginal:o}=J(e,ur);e.startsWith("/")&&s(e===`${i}${r||""}${o||""}`,{url:e});const l=i.endsWith("/");let a;return n&&i!=="/"?(l?a=A(i,0,-1):a=i,s(!a.endsWith("/"),{url:e}),s(a!=="")):a=i+(l?"":"/")+"index",s(a),a=a+t,`${a}${r||""}${o||""}`}const fr=".pageContext.json",dr=!1;function gr(e){return cr(e,fr,dr)}function oe(e,t,n){const i=e.configElements[t];if(!i||hr(e,t))return null;const{configValue:r,configDefinedAt:o}=i;return n&&h(typeof r===n,`${o} has an invalid type \`${typeof r}\`: is should be a ${n} instead`),r}function hr(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:i,configValue:r}=n;return i?!1:r==null}function Dt(e,t){const n=t.find(i=>i.pageId===e);return s(t.length>0),s(n),n}function pr(e,t,n){s(!n.endsWith(" "));const i=[],r=Object.keys(e);for(const o of r)t.includes(o)||i.push(o);h(i.length===0,[n,"returned an object with following unknown keys:",We(i)+".","Only following keys are allowed:",We(t)+"."].join(" "))}function mr(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;h(j(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),pr(e,["pageContext"],n),e.pageContext&&At(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}function vr(e,t){const i=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(ee(({filesystemRoot:o})=>o.length))[0];let r;if(i){const{filesystemRoot:o,urlRoot:l}=i,a={pageId:e,filesystemRoot:o,urlRoot:l};s(l.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),a),s(e.startsWith(o),a),o!=="/"?(s(!o.endsWith("/"),a),r=A(e,o.length,0)):r=e,s(r.startsWith("/"),a),r=l+(l.endsWith("/")?"":"/")+A(r,1,0)}else r=e;return s(r.startsWith("/")),r=r.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!r.includes(".page.")),s(!r.endsWith(".")),r.endsWith("/index")&&(r=A(r,0,-6)),r===""&&(r="/"),s(r.startsWith("/")),s(!r.endsWith("/")||r==="/"),r}async function yr(e,t,n,i){await Promise.all(e.filter(a=>a.fileType===".page.route").map(a=>{var c;return(c=a.loadFile)===null||c===void 0?void 0:c.call(a)}));const{onBeforeRouteHook:r,filesystemRoots:o}=br(e,t,n);return{pageRoutes:_r(o,e,t,i),onBeforeRouteHook:r}}function _r(e,t,n,i){const r=[];let o=[...i];if(n.length>0){s(e===null);const l=!0;n.filter(a=>!a.isErrorPage).forEach(a=>{const c=a.pageId;o=wr(o,c);let u=null;{const f=a.configElements.route;if(f){s("configValue"in f);const d=f.configValue,p=f.configDefinedAt;if(s(p),typeof d=="string")u={pageId:c,comesFromV1PageConfig:l,routeString:d,routeDefinedAt:p,routeType:"STRING"};else{s(L(d));{const m=a.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions;if(m){const y=m.configValue;s(typeof y=="boolean",`${m.configDefinedAt} should be a boolean`)}}u={pageId:c,comesFromV1PageConfig:l,routeFunction:d,routeDefinedAt:p,routeType:"FUNCTION"}}}}if(!u){const{routeFilesystem:f,routeFilesystemDefinedBy:d}=a;s(f),s(f.startsWith("/")),s(d),u={pageId:c,routeFilesystemDefinedBy:d,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(u),r.push(u)})}if(n.length===0){s(e);const l=!1;o.filter(a=>!K(a)).forEach(a=>{const c=Bt(a,t);if(!c||!("default"in c.fileExports)){const u=vr(a,e);s(u.startsWith("/")),s(!u.endsWith("/")||u==="/"),r.push({pageId:a,comesFromV1PageConfig:l,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${a}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:f}=c;if(s(f.default),g(f,"default","string")){const d=f.default;h(d.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${d}'\`. Make sure to \`export default '/${d}'\` instead.`),r.push({pageId:a,comesFromV1PageConfig:l,routeString:d,routeDefinedAt:u,routeType:"STRING"});return}if(g(f,"default","function")){const d=f.default;{const p="iKnowThePerformanceRisksOfAsyncRouteFunctions";p in f&&h(g(f,p,"boolean"),`The export \`${p}\` of ${u} should be a boolean.`)}r.push({pageId:a,comesFromV1PageConfig:l,routeFunction:d,routeDefinedAt:u,routeType:"FUNCTION"});return}h(!1,`The default export of ${u} should be a string or a function.`)}})}return r}function br(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const l=n.onBeforeRoute.codeFilePath;return s(l),h(L(o),`The hook onBeforeRoute() defined by ${l} should be a function.`),{onBeforeRouteHook:{hookFilePath:l,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let i=null;const r=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:l})=>{if(s(l),"onBeforeRoute"in l){h(g(l,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:a}=l;i={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:a}}"filesystemRoutingRoot"in l&&(h(g(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),h(g(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${l.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),r.push({filesystemRoot:Rr(o),urlRoot:l.filesystemRoutingRoot}))}),{onBeforeRouteHook:i,filesystemRoots:r}}function Bt(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function Pr(e,t){const n=Bt(e,t);if(!n)return null;const{filePath:i,fileExports:r}=n;s(r);const o=r.guard;if(!o)return null;const l=i;return h(L(o),`guard() defined by ${l} should be a function`),{hookFn:o,hookName:"guard",hookFilePath:l}}function Rr(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=A(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function wr(e,t){const{length:n}=e;return e=e.filter(i=>i!==t),s(e.length===n-1),e}async function Er(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=Pr(e._pageId,e._pageFilesAll)):n=G(e,"guard"),!n)return;const i=n.hookFn;let r=e;const o=t(e);o&&(r=o);const l=await ce(()=>i(r),"guard",n.hookFilePath);h(l===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function Fr(e){const t=new Error("AbortRender");return v(t,{_pageContextAbort:e,[Nt]:!0}),t}const Nt="_isAbortError";function ge(e){return typeof e=="object"&&e!==null&&Nt in e}function Sr(e){return e._urlRewrite||e._urlRedirect||e._abortStatusCode?(s(g(e,"_abortCall","string")),s(g(e,"_abortCaller","string")),!0):!1}function Or(e,t,n){var i;if(t)return;const r=(i=n._urlRewrite)!==null&&i!==void 0?i:n.urlOriginal;s(r);const o=e._pageContextAbort._abortCall;Se(!1,`${Pe(o)} intercepted while rendering ${U.bold(r)}`,{onlyOnce:!1})}function Cr(e){kr(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function kr(e){const t=[];e.forEach(n=>{const i=n._urlRewrite;{const r=t.indexOf(i);if(r!==-1){const o=[...t.slice(r),i].map(l=>`render('${l}')`).join(" => ");h(!1,`Infinite loop of render() calls: ${o}`)}}t.push(i)})}function Pe(e){return I()?"`"+e+"`":U.cyan(e)}function xr(e,t){const n=[e>0&&Pe("throw render('/some-url')"),t>0&&Pe("throw redirect('/some-url')")].filter(Boolean).join(" and ");h(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const Wt=C("router/getPageContext.ts",{});async function Tr(e){if(e._isFirstRenderAttempt&&Ft.isFirstUrl(e.urlOriginal)){s(g(e,"_isFirstRenderAttempt","true"));const t=await Ar(e);return et(t),t}else{s(g(e,"_isFirstRenderAttempt","false"));const t=await jr(e);return et(t),t}}async function Ar(e){const t=Li();Lt(t),v(t,{isHydration:!0,_hasPageContextFromClient:!1}),v(t,await re(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await Dr(n)){const i=await Vt(n);v(t,i)}}return t}async function $r(e){const t=pt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return v(n,await Ht({...e,...n},!0)),n}async function jr(e){const t={isHydration:!1};return v(t,await Br(e)),v(t,await Ht({...e,...t},!1)),t}async function Ht(e,t){let n={};if(v(n,await re(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await Ir({...e,...n})){const i=await Hr(e);if(!i._isError)v(n,i);else{const r=pt(e._pageFilesAll,e._pageConfigs);s(r),n={},v(n,{isHydration:!1,_pageId:r}),v(n,await re(e._pageFilesAll,e._pageConfigs,n._pageId)),s(g(i,"is404","boolean")),s(g(i,"pageProps","object")),s(g(i.pageProps,"is404","boolean")),s(!("serverSideError"in i)),v(n,i)}}else v(n,{_hasPageContextFromServer:!1}),t||await Er({_hasPageContextFromClient:!1,...e,...n},i=>Te(i,!0));{const i=await Vt({...e,...n});v(n,i)}return n}async function Vt(e){const t=G(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,i={_hasPageContextFromClient:!0},r=Te({...e,...i},!0),o=await ce(()=>n(r),"onBeforeRender",t.hookFilePath);mr(o,t.hookFilePath);const l=o==null?void 0:o.pageContext;return v(i,l),i}async function Ir(e){return!!Wt.pageContextInitHasClientData||await Lr(e)}function et(e){e._pageContextInitHasClientData&&(Wt.pageContextInitHasClientData=!0)}async function Lr(e){if(e._pageConfigs.length>0){const t=Dt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:t}=await Di(e._pageFilesAll,e._pageId);return t}}async function Dr(e){if(e._pageConfigs.length>0){const t=Dt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="client-only"}else return!1}async function Br(e){const n=(await $t(e)).pageContextAddendum;if(!n._pageId){const i=new Error("No routing match");throw Nr(i),i}return s(g(n,"_pageId","string")),n}function Nr(e){v(e,{_is404:!0})}function Wr(e){return P(e)&&e._is404===!0}async function Hr(e){var t,n;const i=(n=(t=e._urlRewrite)!==null&&t!==void 0?t:e._urlOriginalPristine)!==null&&n!==void 0?n:e.urlOriginal,r=gr(i),o=await fetch(r);{const c=o.headers.get("content-type"),u="application/json",f=c&&c.includes(u);if(!f&&o.status===404)throw ne(e.urlOriginal),zr();h(f,`Wrong Content-Type for ${r}: it should be ${u} but it's ${c} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vite-plugin-ssr.com/renderPage`)}const l=await o.text(),a=ae(l);if(s(P(a)),"serverSideError"in a)throw at("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");if(Sr(a))throw Fr(a);return s(g(a,"_pageId","string")),Lt(a),v(a,{_hasPageContextFromServer:!0}),a}function Vr(e){return P(e)&&!!e._alreadyServerSideRouted}function zr(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function zt(){const e="/";return s(Ur(e)),e}function Ur(e){return e.startsWith("/")}const he=C("createPageContext.ts",{});async function Ut(e){he.pageFilesData||(he.pageFilesData=await ni(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:i,pageConfigGlobal:r}=he.pageFilesData,{pageRoutes:o,onBeforeRouteHook:l}=await yr(t,i,r,n),a=zt();s(Ce(a));const c={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_urlRewrite:null,_baseServer:a,_isProduction:!0,_pageFilesAll:t,_pageConfigs:i,_pageConfigGlobal:r,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:l};return v(c,e),St(c),c}async function Gt(e){const t=await Ut({urlOriginal:e}),n=await $t(t),i=t._pageFilesAll,r=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:i,pageConfigs:r};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:i,pageConfigs:r}:{pageId:null,pageFilesAll:i,pageConfigs:r}}function z(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Gr({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:i(),isClientRouting:o()};function i(){return t.some(a=>a.pageId===n&&a.fileType===".page")?(r(),!1):!(!t.some(a=>a.pageId===n&&a.fileType===".page.server")||e.some(a=>a.pageId===n&&a.fileType===".page.client"&&z(a).includes("render")))}function r(){const l=e.some(a=>z(a).includes("render"));h(l,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((a,c)=>` (${c+1}): ${a.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(a=>z(a).includes("clientRouting"))}}function Yr({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:i}){let r=[];const o=t.filter(a=>!e.includes(a)),l=[];if(l.push(...e.map(a=>({id:a.filePath,onlyAssets:!1,eagerlyImported:!1}))),l.push(...o.map(a=>({id:a.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)r=e.map(a=>a.filePath);else{const a=Mr(i);l.push({id:a,onlyAssets:!1,eagerlyImported:!1}),r=[a]}return{clientEntries:r,clientDependencies:l}}function Mr(e){return e?"@@vite-plugin-ssr/dist/esm/client/client-routing-runtime/entry.js":"@@vite-plugin-ssr/dist/esm/client/server-routing-runtime/entry.js"}function Jr(e,t){let n=ke(e,t);const i=_t(e,t),{isHtmlOnly:r,isClientRouting:o}=Gr({pageFilesClientSide:n,pageFilesServerSide:i,pageId:t});r&&(n=n.filter(c=>c.isEnv("CLIENT_ONLY")&&!z(c).includes("render")),n=qr(n));const{clientEntries:l,clientDependencies:a}=Yr({pageFilesClientSide:n,pageFilesServerSide:i,isHtmlOnly:r,isClientRouting:o});return{isHtmlOnly:r,isClientRouting:o,clientEntries:l,clientDependencies:a,pageFilesClientSide:n,pageFilesServerSide:i}}async function Kr(e,t,{sharedPageFilesAlreadyLoaded:n}){const i=ke(e,t);await Promise.all(i.map(async r=>{var o;s(r.isEnv("CLIENT_ONLY")||r.isEnv("CLIENT_AND_SERVER")),!(n&&r.isEnv("CLIENT_AND_SERVER"))&&await((o=r.loadExportNames)===null||o===void 0?void 0:o.call(r))}))}function qr(e){const t=[];for(const n of e)if(t.push(n),z(n).includes("overrideDefaultPages"))break;return t}function Xr(e,t,n){var i,r;if(e){const o=(i=oe(e,"clientRouting","boolean"))!==null&&i!==void 0?i:!1;return{isClientSideRenderable:(r=oe(e,"isClientSideRenderable","boolean"))!==null&&r!==void 0?r:!1,isClientRouting:o}}else{const{isHtmlOnly:o,isClientRouting:l}=Jr(t,n);return{isClientSideRenderable:!o,isClientRouting:l}}}async function Yt(e){const{pageId:t,pageFilesAll:n,pageConfigs:i}=await Gt(e);if(!t)return!1;await Kr(n,t,{sharedPageFilesAlreadyLoaded:!1});const r=jt(i,t),{isClientSideRenderable:o,isClientRouting:l}=Xr(r,n,t);return o&&l}function Mt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Jt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Mt(t)||Zr(e)||eo(t)||!to(t)||!Oe(t)||!Qr(e))}function Qr(e){if(wo()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function Zr(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function eo(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function to(e){const t=zt();s(Ce(t));const{hasBaseServer:n}=J(e,t);return n}function no(e,t){let n=io(e,t);return n==="viewport"&&!e._isProduction&&(Se(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function io(e,t){{const n=ro(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&h(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const i="prefetchStaticAssets value should be false, 'hover', or 'viewport'";h(j(n),i);const r=Object.keys(n);h(r.length===1&&r[0]==="when",i);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const l=o.toLowerCase();return b(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${l}' instead`,{onlyOnce:!0}),l}h(!1,i)}return"hover"}function ro(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const i="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(h(n===null,i),t==="hover"||t==="viewport")return t;if(t==="false")return!1;h(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),b(!1,i,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";h(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const Kt=new Map;function qt(e){const t=Qt(e);return Kt.has(t)}function Xt(e){const t=Qt(e);Kt.set(t,!0)}function Qt(e){return J(e,"/").pathname}H();const tt=new Map;async function pe(e){if(h(ct(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),h(!Mt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),qt(e))return;Xt(e);const{pageId:t,pageFilesAll:n,pageConfigs:i}=await Gt(e);if(t)try{await re(n,i,t)}catch(r){if(Ae(r))Re(r,!0);else throw r}}function oo(e){Xt(e.urlPathname),[...document.getElementsByTagName("A")].forEach(async n=>{if(tt.has(n))return;tt.set(n,!0);const i=n.getAttribute("href");if(Jt(n))return;s(i);try{if(!await Yt(i))return}catch{return}if(qt(i))return;const{prefetchStaticAssets:r}=no(e,n);if(r){if(r==="hover")n.addEventListener("mouseover",()=>pe(i)),n.addEventListener("touchstart",()=>pe(i),{passive:!0});else if(r==="viewport"){const o=new IntersectionObserver(l=>{l.forEach(a=>{a.isIntersecting&&(pe(i),o.disconnect())})});o.observe(n)}}else return})}async function so(e,t){const n=Te(e,t);let i=null,r;i=G(e,"render"),r="render";{const a=G(e,"onRenderClient");a&&(i=a,r="onRenderClient")}if(!i){const a=lo(e);if(e._pageConfigs.length>0)h(!1,`No onRenderClient() hook defined for URL '${a}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const c=e._pageFilesLoaded.filter(f=>f.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+a:u="One of the following files should export a `render()` hook: "+c.map(f=>f.filePath).join(" "),h(!1,u)}}s(i);const o=i.hookFn;s(r);const l=await ce(()=>o(n),r,i.hookFilePath);h(l===void 0,`The ${r}() hook defined by ${i.hookFilePath} isn't allowed to return a value`)}function lo(e){var t;let n;try{n=(t=e.urlPathname)!==null&&t!==void 0?t:e.urlOriginal}catch{}return n=n??window.location.href,n}function Zt(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=tn()),"scrollPosition"in e||(t=!0,e.scrollPosition=en()),nn(e),t&&je(e)}function $e(){const e=window.history.state||{};return nn(e),e}function en(){return{x:window.scrollX,y:window.scrollY}}function tn(){return new Date().getTime()}function nt(){const e=en(),t=$e();je({...t,scrollPosition:e})}function ao(e,t){if(t)je($e(),e);else{const n=tn();uo({timestamp:n,scrollPosition:null},e)}}function nn(e){if(s(P(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(g(t,"x","number")&&g(t,"y","number"))}}function je(e,t){window.history.replaceState(e,"",t??null)}function uo(e,t){window.history.pushState(e,"",t)}H();const co=C("navigate.ts",{});function fo(e){co.navigate=e}const O=C("useClientRouter.ts",{previousState:se()});bo();Zt();function Re(e,t){s(Ae(e)),O.clientRoutingIsDisabled=!0,t&&console.log(e),Se(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function go(){yo(),ho((r,{keepScrollPosition:o})=>{i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:r,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),po((r,o)=>{i({scrollTarget:r,isBackwardNavigation:o})}),fo(async(r,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:l=!1}={})=>{await i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:r,overwriteLastHistoryEntry:l,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;i({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function i({scrollTarget:r,urlOriginal:o=q(),overwriteLastHistoryEntry:l=!1,isBackwardNavigation:a,checkClientSideRenderable:c,pageContextsFromRewrite:u=[],redirectCount:f=0}){var d,p;if(xr(u.length,f),O.clientRoutingIsDisabled){ne(o);return}const m=Cr(u);if(c){const F=(d=m._urlRewrite)!==null&&d!==void 0?d:o;let S;try{S=await Yt(F)}catch(Be){if(ge(Be))S=!0;else throw Be}if(!S){ne(o);return}}const y={urlOriginal:o,isBackwardNavigation:a,...m},w=++e;s(w>=1),w>1&&n===!1&&((p=O.onPageTransitionStart)===null||p===void 0||p.call(O,y),n=!0);let R=!1;const N=()=>w===1&&R===!1?!1:w!==e,_=await Ut(y);if(N())return;const Le=w===1;v(_,{_isFirstRenderAttempt:Le});let X,k,De=!1;try{X=await Tr(_)}catch(F){De=!0,k=F}if(De){if(ge(k)||console.error(k),rt(k,_))return;if(ge(k)){const F=k;Or(k,_._isProduction,_);const S=F._pageContextAbort;if(S._urlRewrite){await i({scrollTarget:r,urlOriginal:o,overwriteLastHistoryEntry:l,isBackwardNavigation:a,pageContextsFromRewrite:[...u,S],redirectCount:f});return}if(S._urlRedirect){await i({scrollTarget:"scroll-to-top-or-hash",urlOriginal:S._urlRedirect.url,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:u,redirectCount:f++});return}s(S._abortStatusCode),v(_,S)}else v(_,{is404:Wr(k)});try{X=await $r(_)}catch(F){if(rt(F,_)||(Le||setTimeout(()=>{window.location.pathname=o},0),Ai(k,F)))return;throw F}}if(s(X),v(_,X),de(_,"onPageTransitionStart"),O.onPageTransitionStart=_.exports.onPageTransitionStart,_.exports.hydrationCanBeAborted?R=!0:b(!Ti(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!N()&&(t&&await t,!N())){if(mo(o,l),Ft.markNavigationChange(),s(t===void 0),t=(async()=>{await so(_,!0),oo(_)})(),await t,t=void 0,_._isFirstRenderAttempt){de(_,"onHydrationEnd");const{onHydrationEnd:F}=_.exports;if(F){const S=_.exportsAll.onHydrationEnd[0].exportSource;s(S),await ce(()=>F(_),"onHydrationEnd",S)}}else w===e&&(_.exports.onPageTransitionEnd&&(de(_,"onPageTransitionEnd"),_.exports.onPageTransitionEnd(_)),n=!1);rn(r),Ie(),O.initialRenderIsDone=!0}}}function ho(e){document.addEventListener("click",t);return;function t(r){if(!n(r))return;const o=i(r.target);if(!o)return;const l=o.getAttribute("href");if(Jt(o))return;s(l),r.preventDefault();const a=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(l,{keepScrollPosition:a})}function n(r){return r.button===0&&!r.ctrlKey&&!r.shiftKey&&!r.altKey&&!r.metaKey}function i(r){for(;r.tagName!=="A";){const{parentNode:o}=r;if(!o)return null;r=o}return r}}function po(e){window.addEventListener("popstate",()=>{const t=se(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",i=t.urlWithoutHash===O.previousState.urlWithoutHash,r=!t.historyState.timestamp||!O.previousState.historyState.timestamp?null:t.historyState.timestamp<O.previousState.historyState.timestamp;O.previousState=t,i?window.history.state===null?(Zt(),O.previousState=se()):rn(n):e(n,r)})}function mo(e,t){q()!==e&&(Ie(),ao(e,t),O.previousState=se())}function se(){return{urlWithoutHash:q({withoutHash:!0}),historyState:$e()}}function rn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=_o();if(n&&n!=="top"){const i=document.getElementById(n)||document.getElementsByName(n)[0];if(i){i.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;vo(t)}function vo(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const i=new Date().getTime();for(;;)if(await $i(10),t(),n()||new Date().getTime()-i>100)return},0)}))}function yo(){window.addEventListener("scroll",ji(nt,Math.ceil(1e3/3)),{passive:!0}),on(nt)}function _o(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function bo(){it(),on(it),Po(()=>O.initialRenderIsDone&&Ie())}function Ie(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function it(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function on(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Po(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function rt(e,t){return!!(Vr(e)||Ro(e,t))}function Ro(e,t){if(!Ae(e))return!1;if(t._isFirstRenderAttempt)throw Re(e,!1),e;return Re(e,!0),ne(t.urlOriginal),!0}function wo(){return!!window._disableAutomaticLinkInterception}H();fn(!0);go();
