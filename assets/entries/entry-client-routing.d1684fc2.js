function Vt(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function de(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return Vt()&&(n.stack=zt(n.stack,t)),n}function zt(e,t){if(!e)return e;const n=Gt(e);let r=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:r<t&&Ut(o)?(r++,!1):!0).join(`
`)}function Ut(e){return e.startsWith("    at ")}function Gt(e){return e.split(/\r?\n/)}function O(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function ge(e){return Array.from(new Set(e))}const T=O("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),Me="Make sure your client-side code doesn't include(/bundle)",Mt=`The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ${Me} both for a given page.`,Ye=`Two vite-plugin-ssr client runtime instances are being loaded. ${Me} vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)`;function Je(){{const e=ge(T.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;Kt(!1,t)}}T.checkSingleInstance&&T.instances.length>1&&oe(!1,Ye,{onlyOnce:!0,showStackTrace:!0})}function Yt(e){oe(T.isClientRouting!==!1,Mt,{onlyOnce:!0,showStackTrace:!0}),oe(T.isClientRouting===void 0,Ye,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),Je()}function Jt(e){T.instances.push(e),Je()}function Kt(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function oe(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=T,a=n===!0?i:n;if(o.has(a))return;o.add(a)}console.warn(r?new Error(i):i)}const qt="0.4.131",j={projectName:"vite-plugin-ssr",projectVersion:qt,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};Jt(j.projectVersion);const F=O("assert.ts",{alreadyLogged:new Set}),L=`[${j.npmPackageName}@${j.projectVersion}]`,Xt=`${L}[Bug]`,Qt=`${L}[Wrong Usage]`,Zt=`${L}[Warning]`,en=`${L}[Info]`,he=2;function s(e,t){var n;if(e)return;const r=(()=>{if(!t)return null;const o=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${j.projectName} maintainers; you can ignore this): ${o}`})(),i=de([`${Xt} You stumbled upon a bug in ${j.projectName}'s source code.`,`Go to ${j.githubRepository}/issues/new and copy-paste this error. (The error's stack trace is usually enough to fix the problem).`,"A maintainer will fix the bug (usually under 24 hours).",`Don't hesitate to reach out as it makes ${j.projectName} more robust.`,r].filter(Boolean).join(" "),he);throw(n=F.onBeforeLog)===null||n===void 0||n.call(F),i}function g(e,t){var n;if(e)return;const r=t.startsWith("[")?"":" ",i=`${Qt}${r}${t}`,o=de(i,he);throw(n=F.onBeforeLog)===null||n===void 0||n.call(F),o}function Ke(e){const t=e.startsWith("[")?"":" ";return de(`${L}${t}${e}`,he)}function E(e,t,{onlyOnce:n=!0,showStackTrace:r=!1}={}){var i;if(e)return;const o=`${Zt} ${t}`;if(n){const{alreadyLogged:a}=F,l=n===!0?o:n;if(a.has(l))return;a.add(l)}(i=F.onBeforeLog)===null||i===void 0||i.call(F),console.warn(r?new Error(o):o)}function qe(e,t,{onlyOnce:n}){var r;if(e)return;const i=`${en} ${t}`;if(n){const{alreadyLogged:o}=F,a=i;if(o.has(a))return;o.add(a)}(r=F.onBeforeLog)===null||r===void 0||r.call(F),console.log(i)}function D(){return typeof window<"u"&&typeof window.scrollY=="number"}const Xe=O("utils/assertRouterType.ts",{});function N(){tn(Qe()),Xe.isClientRouting=!0}function Qe(){return Xe.isClientRouting!==!1}function tn(e){g(D(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side"),E(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` when using Server Routing as these will unnecessarily bloat your client-side bundle.",{showStackTrace:!1,onlyOnce:!0})}const nn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],Ze=["vue","svelte","marko","md","mdx"],rn=[...nn,...Ze];function et(e){const t=rn.some(n=>e.endsWith("."+n));return s(!on(e)||t),t}function on(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function sn(e){return Ze.some(t=>e.endsWith("."+t))}function C(e,t,n){return typeof e=="string"?Fe(e.split(""),t,n).join(""):Fe(e,t,n)}function Fe(e,t,n){const r=[];let i=t>=0?t:e.length+t;s(i>=0&&i<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(i===o||(i===e.length&&(i=0),i===o));){const a=e[i];s(a!==void 0),r.push(a),i++}return r}function pe(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function an(e,t){s(t.includes(" but ")),g(typeof e=="string",`${t} should be a string`),!pe(e)&&(!e.startsWith("/")&&!e.includes(":")?g(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):g(!1,`${t} isn't a valid URL`))}function V(e,t){s(pe(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...r]=e.split("#");s(n!==void 0);const i=["",...r].join("#")||null;s(i===null||i.startsWith("#"));const o=i===null?"":se(i.slice(1)),[a,...l]=n.split("?");s(a!==void 0);const u=["",...l].join("?")||null;s(u===null||u.startsWith("?"),{url:e,searchOriginal:u});const c={},h={};Array.from(new URLSearchParams(u||"")).forEach(([b,R])=>{c[b]=R,h[b]=[...h[b]||[],R]});const{origin:f,pathnameResolved:y}=un(a,t);s(f===null||f===se(f),{origin:f}),s(y.startsWith("/"),{url:e,pathnameResolved:y}),s(f===null||e.startsWith(f),{url:e,origin:f});const m=a.slice((f||"").length);{const b=`${f||""}${m}${u||""}${i||""}`;s(e===b,{url:e,urlRecreated:b})}let{pathname:p,hasBaseServer:P}=fn(y,t);return p=ln(p),s(p.startsWith("/")),{origin:f,pathname:p,pathnameOriginal:m,hasBaseServer:P,search:c,searchAll:h,searchOriginal:u,hash:o,hashOriginal:i}}function se(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function ln(e){return e.split("/").map(t=>se(t).split("/").join("%2F")).join("/")}function un(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let r=!1;const i="tauri://",o="http://";e.startsWith(i)&&(r=!0,e=o+e.slice(i.length));let a,l;try{const u=new URL(e);a=u.origin,l=u.pathname}catch{a=null;let c=typeof window<"u"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);c=c||"http://fake.example.org"+t,l=new URL(e,c).pathname}return l||(l="/"),r&&(s(a),s(a.startsWith(o)),a=i+a.slice(o.length)),s(l.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:l}),s(l===l.split("?")[0].split("#")[0]),{origin:a,pathnameResolved:l}}function cn(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function fn(e,t){cn(e),s(me(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===C(t,0,-1)&&(r=C(t,0,-1),s(n===r)),n.startsWith(r)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function me(e){return e.startsWith("/")}function v(e,t){Object.assign(e,t)}function A(e){return e instanceof Function||typeof e=="function"}function w(e){return typeof e=="object"&&e!==null}function Y(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function $(e){return(t,n)=>{const r=e(t),i=e(n);if(s([!0,!1,null].includes(r)),s([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;s(!1)}}function dn(e){return $(t=>{const n=e(t);return n===null?null:!n})}function d(e,t,n="unknown"){if(!w(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?w(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?A(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function x(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function gn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const hn=e=>e!=null;function _e(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}const pn="\\";function tt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes(pn),t(e))}function ee(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}const Te=/[^a-zA-Z-_]/;function nt(e){return mn(e)!==null}function mn(e){if(e===void 0||e.includes("\\")||e.startsWith("/"))return null;let t=null;if(e.startsWith("@")){if(!e.includes("/"))return null;const[l,...u]=e.split("/");t=l,e=u.join("/"),s(t&&t.startsWith("@"))}if(e==="")return null;const[n,...r]=e.split("/"),i=n,o=r.length===0?null:r.join("/");return s(i),s(o===null||!o.startsWith("/")),Te.test(i)||t&&Te.test(t.slice(1))?null:(s(!i.startsWith("/")),{npmPackageName:t?`${t}/${i}`:i,importPath:o})}function yn(e){return typeof e=="object"&&e!==null&&"then"in e&&A(e.then)}const vn=["$$registrations","_rerender_only"],bn=[".md",".mdx"];function Rn(e,t){Pn(e,t,!0)}function Pn(e,t,n){const i=Object.keys(e).filter(l=>!vn.includes(l)),o=i.filter(l=>l!=="default"),a=i.includes("default");if(o.length===0){if(a)return;s(i.length===0),g(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!bn.some(l=>t.endsWith(l))){const l=o.join(", ");n?E(o.length===0,`${t} should only have a default export: remove \`export { ${l} }\``,{onlyOnce:!0,showStackTrace:!1}):E(o.length===0,`${t} replace \`export { ${l} }\` with \`export default { ${l} }\``,{onlyOnce:!0,showStackTrace:!1})}}function En(e){return Object.entries(e)}const wn=["clientRouting"];function Sn(e){wn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;g(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),g(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const rt=["render","clientRouting","prerender","doNotPrerender"];function Fn(e,t){g(!rt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function _n(e,t){const n={},r={},i={};if(e.forEach(l=>{Tn(l).forEach(({exportName:c,exportValue:h,isFromDefaultExport:f})=>{var y;s(c!=="default"),i[c]=(y=i[c])!==null&&y!==void 0?y:[],i[c].push({exportValue:h,exportSource:`${l.filePath} > ${f?`\`export default { ${c} }\``:`\`export { ${c} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t){const{configValues:l}=t;En(l).forEach(([u,c])=>{var h,f,y;const m=t.configElements[u];s(m);const{configDefinedByFile:p,configDefinedAt:P}=m;s(p),r[u]=(h=r[u])!==null&&h!==void 0?h:c,n[u]=(f=n[u])!==null&&f!==void 0?f:[],s(n[u].length===0),n[u].push({configValue:c,configDefinedAt:P,configDefinedByFile:p});const b=u;i[b]=(y=i[b])!==null&&y!==void 0?y:[],i[b].push({exportValue:c,exportSource:P,filePath:p,_filePath:p,_fileType:null,_isFromDefaultExport:null})})}const o=Cn(),a={};return Object.entries(i).forEach(([l,u])=>{u.forEach(({exportValue:c,_fileType:h,_isFromDefaultExport:f})=>{var y;a[l]=(y=a[l])!==null&&y!==void 0?y:c,h===".page"&&!f&&(l in o||(o[l]=c))})}),s(!("default"in a)),s(!("default"in i)),{config:r,configEntries:n,exports:a,exportsAll:i,pageExports:o}}function Tn(e){const{filePath:t,fileExports:n}=e;s(n),s(et(t));const r=[];return Object.entries(n).sort(dn(([i])=>i==="default")).forEach(([i,o])=>{let a=i==="default";if(a)if(sn(t))i="Page";else{g(w(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([l,u])=>{Fn(l,t),r.push({exportName:l,exportValue:u,isFromDefaultExport:a})});return}r.push({exportName:i,exportValue:o,isFromDefaultExport:a})}),r.forEach(({exportName:i,isFromDefaultExport:o})=>{s(!(o&&rt.includes(i)))}),r}function Cn(){return new Proxy({},{get(...e){return D()||E(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function xn(e){const t=".page.",n=C(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function I(e){tt(e),s(e.startsWith("/")||nt(e),{filePath:e})}function it(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(g(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=ge(e.map(({pageId:r})=>r).filter(r=>z(r)));if(g(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return s(r),r}return null}function z(e,t){return s(!e.includes("\\")),e.includes("/_error")}function On(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return s(n),n.isErrorPage}else return z(e)}const kn=[".page",".page.server",".page.route",".page.client",".css"];function $n(e){if(tt(e),e.endsWith(".css"))return s(nt(e),e),".css";s(et(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(s(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";s(!1,e)}function ot(e){const t=o=>i.pageId===o||i.isDefaultPageFile&&(Ce(i.filePath)||jn(o,i.filePath)),n=$n(e),i={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:ae(e),isRendererPageFile:n!==".css"&&ae(e)&&Ce(e),isErrorPageFile:z(e),pageId:xn(e)};return i}function ae(e){return I(e),z(e)?!1:e.includes("/_default")}function Ce(e){return I(e),e.includes("/renderer/")}function jn(e,t){I(e),I(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(ae(t));const n=C(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function An(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(w(t)),s(d(t,"pageId","string")),s(d(t,"routeFilesystem","string")||d(t,"routeFilesystem","null")),s(d(t,"routeFilesystemDefinedBy","string")||d(t,"routeFilesystemDefinedBy","null")),s(d(t,"loadCodeFiles","function")),s(d(t,"isErrorPage","boolean")),s(d(t,"configElements","object")),st(t.configElements,!1)})}function In(e){st(e,!0)}function st(e,t){s(w(e)),Object.entries(e).forEach(([n,r])=>{if(s(w(r)||r===null),r===null){s(t);return}s(d(r,"configDefinedAt","string")),s(d(r,"plusConfigFilePath","string")||d(r,"plusConfigFilePath","null")),s(d(r,"configEnv","string")),s(d(r,"codeFilePath","string")||d(r,"codeFilePath","null")),s(d(r,"codeFileExport","string")||d(r,"codeFileExport","null")),s(d(r,"configValueSerialized","string")||d(r,"configValueSerialized","undefined")),(t||n==="route")&&s(d(r,"configValue")||d(r,"configValueSerialized"))})}const Ln=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function Q(e){const t=JSON.parse(e);return at(t)}function at(e){return typeof e=="string"?Dn(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=at(n)}),e)}function Dn(e){for(const{match:t,deserialize:n}of Ln)if(t(e))return n(e,Q);return e}function Nn(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,r])=>{Bn(r),n==="route"&&Wn(r)})})}function Bn(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=Q(t))}function Wn(e){s(d(e,"configValue"));const{configValue:t}=e,n=typeof t;g(n==="string"||A(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function Hn(e){s(d(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(d(e,"pageFilesLazy","object")),s(d(e,"pageFilesEager","object")),s(d(e,"pageFilesExportNamesLazy","object")),s(d(e,"pageFilesExportNamesEager","object")),s(d(e.pageFilesLazy,".page")),s(d(e.pageFilesLazy,".page.client")||d(e.pageFilesLazy,".page.server")),s(d(e,"pageFilesList","string[]")),s(d(e,"pageConfigs")),s(d(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;An(t),Nn(t),In(n);const r={};G(e.pageFilesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{var u;a=r[o]=(u=r[o])!==null&&u!==void 0?u:a;const c=l;xe(c),a.loadFile=async()=>{"fileExports"in a||(a.fileExports=await c(),Sn(a))}}),G(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{var u;a=r[o]=(u=r[o])!==null&&u!==void 0?u:a;const c=l;xe(c),a.loadExportNames=async()=>{if(!("exportNames"in a)){const h=await c();g("exportNames"in h,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(d(h,"exportNames","string[]"),a.filePath),a.exportNames=h.exportNames}}}),G(e.pageFilesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{var u;a=r[o]=(u=r[o])!==null&&u!==void 0?u:a;const c=l;s(w(c)),a.fileExports=c}),G(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{var u;a=r[o]=(u=r[o])!==null&&u!==void 0?u:a;const c=l;s(w(c)),s(d(c,"exportNames","string[]"),a.filePath),a.exportNames=c.exportNames}),e.pageFilesList.forEach(o=>{var a;r[o]=(a=r[o])!==null&&a!==void 0?a:ot(o)});const i=Object.values(r);return i.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function G(e){const t=[];return Object.entries(e).forEach(([n,r])=>{s(kn.includes(n)),s(w(r)),Object.entries(r).forEach(([i,o])=>{const a=ot(i);s(a.fileType===n),t.push({filePath:i,pageFile:a,globValue:o})})}),t}function xe(e){s(A(e))}const k=O("setPageFiles.ts",{});function Vn(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=Hn(e);k.pageFilesAll=t,k.pageConfigs=n,k.pageConfigGlobal=r}async function zn(e,t){e?(s(!k.pageFilesGetter),s(t===void 0)):(s(k.pageFilesGetter),s(typeof t=="boolean"),(!k.pageFilesAll||!t)&&await k.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=k;s(n&&r&&i);const o=Un(n,r);return{pageFilesAll:n,allPageIds:o,pageConfigs:r,pageConfigGlobal:i}}function Un(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),r=ge(n),i=t.map(o=>o.pageId);return[...r,...i]}function ye(e,t){return ut(e,t,!0)}function lt(e,t){return ut(e,t,!1)}function ut(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(m=>m.isRelevant(t)&&m.fileType!==".page.route").sort(Gn(n,t)),o=m=>{const p=i.filter(b=>b.pageId===t&&b.isEnv(m?"CLIENT_AND_SERVER":r));g(p.length<=1,`Merge the following files into a single file: ${p.map(b=>b.filePath).join(" ")}`);const P=p[0];return s(P===void 0||!P.isDefaultPageFile),P},a=o(!1),l=o(!0),u=m=>i.filter(p=>p.isRendererPageFile&&p.isEnv(m?"CLIENT_AND_SERVER":r))[0],c=u(!1),h=u(!0),f=i.filter(m=>m.isDefaultPageFile&&!m.isRendererPageFile&&(m.isEnv(r)||m.isEnv("CLIENT_AND_SERVER")));return[a,l,...f,c,h].filter(hn)}function Gn(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,o=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;{const u=a.isRendererPageFile,c=l.isRendererPageFile;if(!u&&c)return r;if(!c&&u)return i;s(u===c)}{const u=Oe(t,a.filePath),c=Oe(t,l.filePath);if(u<c)return r;if(c<u)return i;s(u===c)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i}return o}}function Oe(e,t){I(e),I(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),o=r.split("/").length,a=i.split("/").length;return o+a}const Mn="modulepreload",Yn=function(e){return"/batijs.github.io/"+e},ke={},$e=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Yn(o),o in ke)return;ke[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":Mn,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},ve={},ct={},Jn={},Z={},Kn=[],qn={},Xn=!0,Qn=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await $e(()=>import("./pages_error.a5d9c77e.js"),["assets/entries/pages_error.a5d9c77e.js","assets/chunks/chunk-041a6fb0.js","assets/static/LayoutDefault.4933f9d8.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/+onRenderHtml.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderHtml.js",codeFilePath:"vike-solid/renderer/+onRenderHtml.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/+onRenderClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderClient.js",codeFilePath:"vike-solid/renderer/+onRenderClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"client-only"},Page:{configDefinedAt:"/pages/_error/+Page.tsx > `export default`",configDefinedByFile:"/pages/_error/+Page.tsx",codeFilePath:"/pages/_error/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"vike-solid/renderer/+passToClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+passToClient.js",codeFilePath:"vike-solid/renderer/+passToClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},clientRouting:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { clientRouting }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.ts > `export default { title }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client",configValueSerialized:'"B창ti"'},description:{configDefinedAt:"/pages/+config.ts > `export default { description }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-only",configValueSerialized:'"B창ti"'}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await $e(()=>import("./pages_index.6f14b535.js"),["assets/entries/pages_index.6f14b535.js","assets/chunks/chunk-041a6fb0.js","assets/static/LayoutDefault.4933f9d8.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/+onRenderHtml.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderHtml.js",codeFilePath:"vike-solid/renderer/+onRenderHtml.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/+onRenderClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderClient.js",codeFilePath:"vike-solid/renderer/+onRenderClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.tsx > `export default`",configDefinedByFile:"/pages/index/+Page.tsx",codeFilePath:"/pages/index/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"vike-solid/renderer/+passToClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+passToClient.js",codeFilePath:"vike-solid/renderer/+passToClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},clientRouting:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { clientRouting }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.ts > `export default { title }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client",configValueSerialized:'"B창ti"'},description:{configDefinedAt:"/pages/+config.ts > `export default { description }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-only",configValueSerialized:'"B창ti"'}}}],Zn={onBeforeRoute:null},er=Object.assign({}),tr={...er};ve[".page"]=tr;const nr=Object.assign({}),rr={...nr};Z[".page"]=rr;const ir=Object.assign({}),or={...ir};Z[".page.server"]=or;const sr=Object.assign({}),ar={...sr};ct[".page.route"]=ar;const lr=Object.assign({}),ur={...lr};ve[".page.client"]=ur;const cr=Object.assign({}),fr={...cr};Z[".page.client"]=fr;const dr=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:Xn,neverLoaded:qn,pageConfigGlobal:Zn,pageConfigs:Qn,pageFilesEager:ct,pageFilesExportNamesEager:Z,pageFilesExportNamesLazy:Jn,pageFilesLazy:ve,pageFilesList:Kn},Symbol.toStringTag,{value:"Module"}));Vn(dr);function je(e){const t=e/1e3;if(t<120){const n=Ae(t);return`${n} second${Ie(n)}`}{const n=t/60,r=Ae(n);return`${r} minute${Ie(r)}`}}function Ae(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Ie(e){return e==="1"?"":"s"}function be(e,t,n){const{timeoutErr:r,timeoutWarn:i}=gr(t);let o,a;const l=new Promise((f,y)=>{o=m=>{u(),f(m)},a=m=>{u(),y(m)}}),u=()=>{clearTimeout(c),clearTimeout(h)},c=setTimeout(()=>{const f=`${L}[Warning] The ${t}() hook defined by ${n} is taking more than ${je(i)}`;console.warn(f)},i),h=setTimeout(()=>{const f=Ke(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${je(r)}`);a(f)},r);return(async()=>{try{const f=await e();o(f)}catch(f){a(f)}})(),l}function gr(e){let t=4e4,n=4*1e3;return e==="onBeforeRoute"&&(t=5*1e3,n=1*1e3),e==="onBeforePrerender"&&(t=10*60*1e3,n=30*1e3),{timeoutErr:t,timeoutWarn:n}}function U(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=V(t,"/");let o;return e!=null&&e.withoutHash?o=`${i}${n||""}`:o=`${i}${n||""}${r||""}`,s(o.startsWith("/")),o}s(D());function hr(e){return V(e,"/").pathname}function ft(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function pr(){var e,t,n,r;const i=!!(!((t=(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||e===void 0?void 0:e.renderers)===null||t===void 0)&&t.size),o=!!(!((r=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||n===void 0?void 0:n.rendererInterfaces)===null||r===void 0)&&r.size),a=!!window.__vite_plugin_react_preamble_installed__;return i||o||a}function mr(e,t){return(e==null?void 0:e.message)===(t==null?void 0:t.message)}function K(e){window.location.href=e}function yr(e){return new Promise(t=>setTimeout(t,e))}function vr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}s(D());N();const Le=O("navigationState.ts",{}),br=U(),dt={markNavigationChange(){Le.navigationChanged=!0},get noNavigationChangeYet(){return!Le.navigationChanged&&this.isFirstUrl(U())},isFirstUrl(e){return e===br}};function Rr(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);g(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const r=Q(n);s(d(r,"pageContext","object"));const{pageContext:i}=r;return s(d(i,"_pageId","string")),v(i,{_pageContextRetrievedFromServer:{...i},_comesDirectlyFromServer:!0}),i}async function Pr(e,t){const r=lt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Er(e,t){if(!x(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function wr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}D()&&N();function Sr(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(Y(({filesystemRoot:o})=>o.length))[0];let i;if(r){const{filesystemRoot:o,urlRoot:a}=r,l={pageId:e,filesystemRoot:o,urlRoot:a};s(a.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),s(e.startsWith(o),l),o!=="/"?(s(!o.endsWith("/"),l),i=C(e,o.length,0)):i=e,s(i.startsWith("/"),l),i=a+(a.endsWith("/")?"":"/")+C(i,1,0)}else i=e;return s(i.startsWith("/")),i=i.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!i.includes(".page.")),s(!i.endsWith(".")),i.endsWith("/index")&&(i=C(i,0,-6)),i===""&&(i="/"),s(i.startsWith("/")),s(!i.endsWith("/")||i==="/"),i}async function Fr(e,t,n,r){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var u;return(u=l.loadFile)===null||u===void 0?void 0:u.call(l)}));const{onBeforeRouteHook:i,filesystemRoots:o}=Tr(e,t,n);return{pageRoutes:_r(o,e,t,r),onBeforeRouteHook:i}}function _r(e,t,n,r){const i=[];let o=[...r];if(n.length>0){s(e===null);const a=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const u=l.pageId;o=Or(o,u);let c=null;{const h=l.configElements.route;if(h){s("configValue"in h);const f=h.configValue,y=h.configDefinedAt;if(s(y),typeof f=="string")c={pageId:u,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:y,routeType:"STRING"};else{s(A(f));let m=!1;const p=l.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions;if(p){const P=p.configValue;s(typeof P=="boolean",`${p.configDefinedAt} should be a boolean`),m=P}c={pageId:u,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:y,routeType:"FUNCTION",allowAsync:m}}}}if(!c){const{routeFilesystem:h,routeFilesystemDefinedBy:f}=l;s(h),s(h.startsWith("/")),s(f),c={pageId:u,routeFilesystemDefinedBy:f,comesFromV1PageConfig:a,routeString:h,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(c),i.push(c)})}if(n.length===0){s(e);const a=!1;o.filter(l=>!z(l)).forEach(l=>{const u=Cr(l,t);if(u){const{filePath:c,fileExports:h}=u;if(s(h),g("default"in h,`${c} should have a default export.`),d(h,"default","string")){const f=h.default;g(f.startsWith("/"),`A Route String should start with a leading \`/\` but \`${c}\` has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:l,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:c,routeType:"STRING"});return}if(d(h,"default","function")){const f=h.default;let y=!1;const m="iKnowThePerformanceRisksOfAsyncRouteFunctions";m in h&&(g(d(h,m,"boolean"),`The export \`${m}\` of ${c} should be a boolean.`),y=h[m]),i.push({pageId:l,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:c,allowAsync:y,routeType:"FUNCTION"});return}g(!1,`The default export of ${c} should be a string or a function.`)}else{const c=Sr(l,e);s(c.startsWith("/")),s(!c.endsWith("/")||c==="/"),i.push({pageId:l,comesFromV1PageConfig:a,routeString:c,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}})}return i}function Tr(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const a=n.onBeforeRoute.codeFilePath;return s(a),g(A(o),`The hook onBeforeRoute() defined by ${a} should be a function.`),{onBeforeRouteHook:{hookFilePath:a,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:a})=>{if(s(a),"onBeforeRoute"in a){g(d(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:l}=a;r={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in a&&(g(d(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),g(d(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:xr(o),urlRoot:a.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function Cr(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function xr(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=C(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function Or(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),s(e.length===n-1),e}function gt(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(ee(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:pt,enumerable:t,configurable:!0}),"url"in e&&s(ee(e,"url")),Object.defineProperty(e,"url",{get:kr,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(ee(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:$r,enumerable:t,configurable:!0})}function ht(e){let t=e._urlHandler;t||(t=i=>i);const n=t(e.urlOriginal),r=e._baseServer;return s(r.startsWith("/")),V(n,r)}function pt(){const{pathname:e}=ht(this),t=e;return s(t.startsWith("/")),t}function kr(){return E(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),pt.call(this)}function $r(){const e=ht(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,hash:l,hashOriginal:u}=e,c={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,hash:l,hashOriginal:u,get hashString(){return E(!1,"`pageContext.urlParsed.hashString` has been renamed to `pageContext.urlParsed.hashOriginal`",{onlyOnce:!0,showStackTrace:!0}),u},get searchString(){return E(!1,"`pageContext.urlParsed.searchString` has been renamed to `pageContext.urlParsed.searchOriginal`",{onlyOnce:!0,showStackTrace:!0}),a}};return De(c,"hashString"),De(c,"searchString"),c}function De(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function jr(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(x(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const mt="@",le=":";function Ar(e,t){g(e.startsWith("/")||e==="*",(()=>{t?t=t+" invalid":t="Invalid";const n=[`'${e}'`,e!==""?null:"(empty string)"].filter(Boolean).join(" ");return`${t} Route String ${n}: Route Strings should start with a leading slash '/' (or be '*')`})())}function ue(e,t){Ar(e),s(t.startsWith("/"));const n=e.split("/"),r=t.split("/"),i={};Ir(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,r.length);o++){const a=n[o],l=r[o];if(a==="*")return i["*"]=r.slice(Math.max(1,o)).join("/"),{routeParams:i};if(a&&J(a)){if(E(!a.startsWith(le),`Outdated Route String \`${e}\`, use \`${e.split(le).join(mt)}\` instead.`,{showStackTrace:!1,onlyOnce:!0}),!l)return null;i[a.slice(1)]=l}else if((a||"")!==(l||""))return null}return{routeParams:i}}function Ir(e){const t=e.split("*").length-1;g(t<=1,`Invalid Route String \`${e}\`: Route Strings are not allowed to contain more than one glob character \`*\`.`),g(t===0||t===1&&e.endsWith("*"),`Invalid Route String \`${e}\`: make sure your Route String ends with the glob character \`*\`.`)}function B(e){const t=e.split("/").filter(a=>a!==""&&a!=="*");let n=0;for(const a of t){if(J(a))break;n++}const r=t.filter(a=>!J(a)).length,i=t.filter(a=>J(a)).length,o=e.endsWith("*");return{numberOfParameterSegments:i,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:r,isCatchAll:o}}function J(e){return e.startsWith(mt)||e.startsWith(le)}function Ne(e){const n=ue(e,e);return s(n),Object.keys(n.routeParams).length===0}function Lr(e){e.sort(Dr).sort($(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort($(t=>t.routeType==="STRING"&&Ne(t.routeString)===!1)).sort($(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort($(t=>t.routeType==="STRING"&&Ne(t.routeString)===!0)).sort($(t=>t.routeType==="FILESYSTEM")).sort($(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Dr(e,t){var n,r;{const i=(n=e.precedence)!==null&&n!==void 0?n:0,o=(r=t.precedence)!==null&&r!==void 0?r:0;if(i!==o)return i>o?-1:1}if(!t.routeString||!e.routeString)return 0;{const o=Y(a=>B(a).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(o!==0)return o}{const o=Y(a=>B(a).numberOfStaticSegements)(e.routeString,t.routeString);if(o!==0)return o}{const o=Y(a=>B(a).numberOfParameterSegments)(e.routeString,t.routeString);if(o!==0)return o}{if(B(t.routeString).isCatchAll)return-1;if(B(e.routeString).isCatchAll)return 1}return 0}async function Nr(e,t,n,r){jr(n);let i=e(n);if(g(!yn(i)||t,`The Route Function ${r} returned a promise; async route functions are opt-in, see https://vite-plugin-ssr.com/route-function#async`),i=await i,i===!1)return null;if(i===!0&&(i={}),g(x(i),`The Route Function ${r} should return a boolean or a plain JavaScript object, instead it returns \`${d(i,"constructor")?i.constructor:i}\`.`),"match"in i){const{match:l}=i;if(g(typeof l=="boolean",`The \`match\` value returned by the Route Function ${r} should be a boolean.`),!l)return null}let o=null;"precedence"in i&&(o=i.precedence,g(typeof o=="number",`The \`precedence\` value returned by the Route Function ${r} should be a number.`)),yt(i,`The \`routeParams\` object returned by the Route Function ${r} should`);const a=i.routeParams||{};return g(!("pageContext"in i),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(x(a)),Object.keys(i).forEach(l=>{g(l==="match"||l==="routeParams"||l==="precedence",`The Route Function ${r} returned an object with an unknown key \`{ ${l} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:o,routeParams:a}}function yt(e,t){s(t.endsWith(" should")),d(e,"routeParams")&&(s(t.endsWith(" should")),g(x(e.routeParams),`${t} be a plain JavaScript object.`),g(wr(e.routeParams),`${t} only hold string values.`))}function Re(e,{hook:t,errorMessagePrefix:n,isRenderErrorPage:r}){const i=(()=>{if(n)return n;{s(t);const{hookName:o,hookFilePath:a}=t;return s(!o.endsWith(")")),`The \`pageContext\` object provided by the ${o}() hook defined by ${a}`}})();g(w(e),`${i} should be an object instead of \`${typeof e}\``),g(!("_objectCreatedByVitePluginSsr"in e),`${i} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),E(!("_pageId"in e),`${i} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{showStackTrace:!1,onlyOnce:!0}),r||g(!("is404"in e),`${i} sets \`pageContext.is404\` which is forbidden, use \`throw RenderErrorPage()\` instead, see https://vite-plugin-ssr.com/RenderErrorPage`)}async function Br(e,t){const n=await e.onBeforeRoute(t),r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(n==null||Er(n,["pageContext"])&&d(n,"pageContext"),`${r} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(g(d(n,"pageContext","object"),`${r} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),d(n.pageContext,"_pageId")&&!d(n.pageContext,"_pageId","null")){const o=`${r} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;g(d(n.pageContext,"_pageId","string"),`${o} a string or null`),g(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(a=>`'${a}'`).join(", ")}]\`.`)}d(n.pageContext,"routeParams")&&yt(n.pageContext,`${r} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const i={};return d(n.pageContext,"url")&&(E(!1,`${r} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{showStackTrace:!1,onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),d(n.pageContext,"urlOriginal")&&(an(n.pageContext.urlOriginal,`${r} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),v(i,{_urlPristine:t.urlOriginal})),Re(n.pageContext,{hook:{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}}),v(i,n.pageContext),i}var M;function Be(...e){var t,n;M||(M=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),M&&M(...e)}D()&&N();async function vt(e){gt(e);const{pageRoutes:t,onBeforeRouteHook:n}=await Fr(e._pageFilesAll,e._pageConfigs,e._pageConfigGlobal,e._allPageIds);Be("Pages routes:",t);const r={};if(n){const u=await Br(n,e);if(u){if(v(r,u),d(r,"_pageId","string")||d(r,"_pageId","null"))return d(r,"routeParams")?s(d(r,"routeParams","object")):v(r,{routeParams:{}}),v(r,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:r};v(e,r)}}v(r,{_routingProvidedByOnBeforeRouteHook:!1});const i=e._allPageIds;s(i.length>=0),g(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(i.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:o}=e;s(o.startsWith("/"));const a=[];await Promise.all(t.map(async u=>{const{pageId:c,routeType:h}=u;if(u.routeType==="FILESYSTEM"){const{routeString:f}=u,y=ue(f,o);if(y){const{routeParams:m}=y;a.push({pageId:c,routeParams:m,routeString:f,routeType:h})}return}if(u.routeType==="STRING"){const{routeString:f}=u,y=ue(f,o);if(y){const{routeParams:m}=y;s(h==="STRING"),a.push({pageId:c,routeString:f,routeParams:m,routeType:h})}return}if(u.routeType==="FUNCTION"){const{routeFunction:f,allowAsync:y,routeDefinedAt:m}=u,p=await Nr(f,y,e,m);if(p){const{routeParams:P,precedence:b}=p;a.push({pageId:c,precedence:b,routeParams:P,routeType:h})}return}s(!1)})),Lr(a);const l=a[0];if(Be(`Route matches for URL \`${o}\` (in precedence order):`,a),v(r,{_routeMatches:a}),!l)return v(r,{_pageId:null,routeParams:{}}),{pageContextAddendum:r};{const{routeParams:u}=l;s(x(u)),v(r,{_pageId:l.pageId,routeParams:l.routeParams})}return{pageContextAddendum:r}}function q(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];s(r.exportValue===n);const i=r.exportSource;return s(i),s(!t.endsWith(")")),g(A(n),`hook ${t}() defined by ${i} should be a function`),{hookFn:n,hookFilePath:i}}function te(e,t){q(e,t)}function Wr(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>gn(n,r)).forEach(([n,r])=>{e[n]=r})}function Hr(e){Vr(e),zr(e)}function Vr(e){On(e._pageId,e._pageConfigs)&&s(d(e,"is404","boolean"))}function zr(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!w(t)){E(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const ne=O("releasePageContext.ts",{});function bt(e,t){if(t){const i=e;s([!0,!1].includes(i.isHydration)),s([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;s(i.isHydration===!0),s(i.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(w(e.pageExports));const n=e.exports.Page;v(e,{Page:n}),Jr(e),Wr(e),s([!0,!1].includes(e._comesDirectlyFromServer));const r=e._comesDirectlyFromServer?Mr(e):e;return Hr(e),r}const Ur=["then","toJSON"],Gr=["_pageId"];function Mr(e){return new Proxy(e,{get:n});function t(r){return!(r in e||Ur.includes(r)||typeof r=="symbol"||typeof r!="string"||r.startsWith("__v_"))}function n(r,i){return ne.disableAssertPassToClient!==i&&Yr(e._pageContextRetrievedFromServer,i,t(i)),ne.disableAssertPassToClient=i,window.setTimeout(()=>{ne.disableAssertPassToClient=void 0},0),e[i]}}function Yr(e,t,n){if(!n||e===null)return;const r=Object.keys(e).filter(i=>!Gr.includes(i));g(!1,[`pageContext.${t} isn't available in the browser`,`('${t}' is missing in the passToClient list [${r.map(i=>`'${i}'`).join(", ")}]).`,`Did you forget to add '${t}' to the passToClient list?`,"See https://vite-plugin-ssr.com/passToClient"].join(" "))}function Jr(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Rt(e,t){var n;const r=e.filter(o=>o.pageId===t);return s(r.length<=1),(n=r[0])!==null&&n!==void 0?n:null}async function Kr(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(i=>{const{configName:o,codeFilePath:a}=i;let l;if(i.isPlusFile){const{codeFileExports:u}=i;o!=="client"&&Rn(u,a),Object.entries(u).forEach(([c,h])=>{const f=c!=="default",y=f?c:i.configName,m=h;if(n[y]=m,f){const p=e.configElements[i.configName];s(p),e.configElements[y]={configValue:m,codeFileExport:c,codeFilePath:a,configDefinedByFile:a,configDefinedAt:`${a} > export { ${c} }`,configEnv:p.configEnv,plusConfigFilePath:null}}})}else l=i.codeFileExportValue,n[o]=l}),Object.entries(e.configElements).map(([i,o])=>{o.codeFilePath||(n[i]=o.configValue)}),v(e,{configValues:n})),e}const Pt="__whileFetchingAssets";async function H(e,t,n){const r=ye(e,n),i=Rt(t,n);let o;try{o=(await Promise.all([i&&Kr(i,!1),...r.map(m=>{var p;return(p=m.loadFile)===null||p===void 0?void 0:p.call(m)})]))[0]}catch(y){throw qr(y)&&Object.assign(y,{[Pt]:!0}),y}const{config:a,configEntries:l,exports:u,exportsAll:c,pageExports:h}=_n(r,o);return{config:a,configEntries:l,exports:u,exportsAll:c,pageExports:h,_pageFilesLoaded:r}}function Pe(e){return e?e[Pt]===!0:!1}function qr(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const We=["urlPathname","urlParsed"],Xr=["Page","pageExports","exports"];function Et(e){[...Xr,...We].forEach(n=>{n in e&&(We.includes(n)?(s(n.startsWith("url")),E(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{showStackTrace:!1,onlyOnce:!0})):E(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{showStackTrace:!1,onlyOnce:!0}),delete e[n])})}const Qr="/";function Zr(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:o}=V(e,Qr);e.startsWith("/")&&s(e===`${r}${i||""}${o||""}`,{url:e});const a=r.endsWith("/");let l;return n&&r!=="/"?(a?l=C(r,0,-1):l=r,s(!l.endsWith("/"),{url:e}),s(l!=="")):l=r+(a?"":"/")+"index",s(l),l=l+t,`${l}${i||""}${o||""}`}const ei=".pageContext.json",ti=!1;function ni(e){return Zr(e,ei,ti)}function ri(e,t,n){const r=e.configElements[t];if(!r||wt(e,t))return null;const{configValue:i,configDefinedAt:o}=r;return g(typeof i===n,`${o} has an invalid type \`${typeof i}\`: is should be a ${n} instead`),i}function ce(e,t){const n=e.configElements[t];if(!n||wt(e,t))return null;if(n.codeFilePath!==null)return n.codeFilePath;const{configValue:r,configDefinedAt:i}=n;g(typeof r=="string",`${i} has an invalid type \`${typeof r}\`: it should be a \`string\` instead`),g(!1,`${i} has an invalid value \`${r}\`: it should be a file path instead`)}function wt(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:r,configValue:i}=n;return r?!1:i==null}function St(e,t){const n=t.find(r=>r.pageId===e);return s(t.length>0),s(n),n}function ii(e,t,n){s(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const o of i)t.includes(o)||r.push(o);g(r.length===0,[n,"returned an object with following unknown keys:",_e(r)+".","Only following keys are allowed:",_e(t)+"."].join(" "))}function oi(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;g(x(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),ii(e,["pageContext"],n),e.pageContext&&Re(e.pageContext,{hook:{hookName:"onBeforeRender",hookFilePath:t}})}async function si(e){return e._isFirstRenderAttempt&&dt.isFirstUrl(e.urlOriginal)?(s(d(e,"_isFirstRenderAttempt","true")),ai(e)):(s(d(e,"_isFirstRenderAttempt","false")),ui(e))}async function ai(e){const t=Rr();return Et(t),v(t,{isHydration:!0,_comesDirectlyFromServer:!0}),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}async function li(e){const t=it(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page");const n={isHydration:!1,_pageId:t,_pageContextRetrievedFromServer:null,_comesDirectlyFromServer:!1};return v(n,await H(e._pageFilesAll,e._pageConfigs,n._pageId)),n}async function ui(e){let t={};v(t,{isHydration:!1}),v(t,await di(e)),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId));const n=await ci({...e,...t});if(s([!0,!1].includes(n._comesDirectlyFromServer)),n._isError){t={},s(n._comesDirectlyFromServer===!0),s(d(n,"is404","boolean")),s(d(n,"pageProps","object")),s(d(n.pageProps,"is404","boolean")),s(!("serverSideError"in n));const r=it(e._pageFilesAll,e._pageConfigs);return s(r),v(t,{isHydration:!1,_pageId:r}),v(t,n),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}else return v(t,n),t}async function ci(e){const t=q(e,"onBeforeRender");if(t){const r=t.hookFn,i={_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null},o=bt({...e,...i},!0),a=await be(()=>r(o),"onBeforeRender",t.hookFilePath);oi(a,t.hookFilePath);const l=a==null?void 0:a.pageContext;return v(i,l),i}if(await fi(e)){const r=await pi(e),i={};return Object.assign(i,r),v(i,{_comesDirectlyFromServer:!0,_pageContextRetrievedFromServer:r}),i}return{_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null}}async function fi(e){if(e._pageConfigs.length>0){const t=St(e._pageId,e._pageConfigs);return!!ce(t,"onBeforeRender")&&t.configElements.onBeforeRender.configEnv==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:t}=await Pr(e._pageFilesAll,e._pageId);return t}}async function di(e){const n=(await vt(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw gi(r),r}return s(d(n,"_pageId","string")),n}function gi(e){v(e,{_is404:!0})}function hi(e){return w(e)&&e._is404===!0}async function pi(e){var t;const n=ni((t=e._urlPristine)!==null&&t!==void 0?t:e.urlOriginal),r=await fetch(n);{const l=r.headers.get("content-type"),u=l&&l.includes("application/json");if(!u&&r.status===404){K(e.urlOriginal);const c=new Error("Page doesn't exist");throw Object.assign(c,{_abortRendering:!0}),c}g(u,`Wrong HTTP Response Header \`content-type\` value for URL ${n} (it should be \`application/json\` but we got \`${l}\`). Make sure to use \`pageContext.httpResponse.contentType\`, see https://github.com/brillout/vite-plugin-ssr/issues/191`)}const i=await r.text(),o=Q(i);if("serverSideError"in o)throw Ke("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");s(d(o,"pageContext"));const a=o.pageContext;return s(x(a)),s(d(a,"_pageId","string")),Et(a),a}function Ft(){const e="/batijs.github.io/";return s(mi(e)),e}function mi(e){return e.startsWith("/")}const re=O("createPageContext.ts",{});async function _t(e){re.pageFilesData||(re.pageFilesData=await zn(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=re.pageFilesData,o=Ft();s(me(o));const a={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_baseServer:o,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n};return v(a,e),gt(a),a}async function Tt(e){const t=await _t({urlOriginal:e}),n=await vt(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function W(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function yi({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(i(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&W(l).includes("render")))}function i(){const a=e.some(l=>W(l).includes("render"));g(a,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,u)=>` (${u+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>W(l).includes("clientRouting"))}}function vi({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const o=t.filter(l=>!e.includes(l)),a=[];if(a.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),a.push(...o.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(l=>l.filePath);else{const l=bi(r);a.push({id:l,onlyAssets:!1,eagerlyImported:!1}),i=[l]}return{clientEntries:i,clientDependencies:a}}function bi(e){return e?"@@vite-plugin-ssr/dist/esm/client/router/entry.js":"@@vite-plugin-ssr/dist/esm/client/entry.js"}function Ri(e,t){let n=ye(e,t);const r=lt(e,t),{isHtmlOnly:i,isClientRouting:o}=yi({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(u=>u.isEnv("CLIENT_ONLY")&&!W(u).includes("render")),n=Ei(n));const{clientEntries:a,clientDependencies:l}=vi({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:o});return{isHtmlOnly:i,isClientRouting:o,clientEntries:a,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function Pi(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=ye(e,t);await Promise.all(r.map(async i=>{var o;s(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((o=i.loadExportNames)===null||o===void 0?void 0:o.call(i))}))}function Ei(e){const t=[];for(const n of e)if(t.push(n),W(n).includes("overrideDefaultPages"))break;return t}function wi(e,t,n){var r;if(e){const i=(r=ri(e,"clientRouting","boolean"))!==null&&r!==void 0?r:!1,o=!!ce(e,"onRenderClient"),a=!!ce(e,"Page")&&e.configElements.Page.configEnv!=="server-only";return{isClientSideRenderable:o&&a,isClientRouting:i}}else{const{isHtmlOnly:i,isClientRouting:o}=Ri(t,n);return{isClientSideRenderable:!i,isClientRouting:o}}}async function Ct(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Tt(e);if(!t)return!1;await Pi(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=Rt(r,t),{isClientSideRenderable:o,isClientRouting:a}=wi(i,n,t);return o&&a}function xt(e){const t=e.getAttribute("href");return!!(t===null||t===""||ft(t)||Si(e)||Fi(t)||!_i(t)||!pe(t))}function Si(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function Fi(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function _i(e){const t=Ft();s(me(t));const{hasBaseServer:n}=V(e,t);return n}function Ti(e,t){let n=Ci(e,t);return n==="viewport"&&!e._isProduction&&(qe(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function Ci(e,t){{const n=xi(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(x(n),r);const i=Object.keys(n);g(i.length===1&&i[0]==="when",r);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const a=o.toLowerCase();return E(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${a}' instead`,{onlyOnce:!0,showStackTrace:!1}),a}g(!1,r)}return"hover"}function xi(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),E(!1,r,{showStackTrace:!1,onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";g(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const Ot=new Map;function kt(e){const t=jt(e);return Ot.has(t)}function $t(e){const t=jt(e);Ot.set(t,!0)}function jt(e){return hr(e)}N();const He=new Map;async function ie(e){if(g(Qe(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch"),g(!ft(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`),kt(e))return;$t(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Tt(e);if(t)try{await H(n,r,t)}catch(i){if(Pe(i))fe(i,!0);else throw i}}function Oi(e){$t(e.urlOriginal),[...document.getElementsByTagName("A")].forEach(async n=>{if(He.has(n))return;He.set(n,!0);const r=n.getAttribute("href");if(xt(n))return;s(r);try{if(!await Ct(r))return}catch{return}if(kt(r))return;const{prefetchStaticAssets:i}=Ti(e,n);if(i){if(i==="hover")n.addEventListener("mouseover",()=>ie(r)),n.addEventListener("touchstart",()=>ie(r),{passive:!0});else if(i==="viewport"){const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(ie(r),o.disconnect())})});o.observe(n)}}else return})}async function ki(e,t){const n=bt(e,t);let r=null,i;r=q(e,"render"),i="render";{const l=q(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=$i(e);if(e._pageConfigs.length>0)ji(e._pageId,e._pageConfigs,l);else{const u=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let c;u.length===0?c="No file `*.page.client.*` found for URL "+l:c="One of the following files should export a `render()` hook: "+u.map(h=>h.filePath).join(" "),g(!1,c)}}s(r);const o=r.hookFn;s(i);const a=await be(()=>o(n),i,r.hookFilePath);g(a===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function $i(e){let t;try{t=e.urlOriginal}catch{}return t=t??window.location.href,t}function ji(e,t,n){var r,i;const o=St(e,t);s(!(!((r=o.configElements.onRenderClient)===null||r===void 0)&&r.configValue)),s(((i=o.configElements.clientRouting)===null||i===void 0?void 0:i.configValue)===!0);let a=!1;t.forEach(l=>{const u=l.configElements.onRenderClient;u&&u.configValue&&(a=!0)}),g(!1,`No onRenderClient() hook defined${a?` for URL \`${n}\``:""}, but it's needed, see https://vite-plugin-ssr.com/onRenderClient`)}function At(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=Lt()),"scrollPosition"in e||(t=!0,e.scrollPosition=It()),Dt(e),t&&we(e)}function Ee(){const e=window.history.state||{};return Dt(e),e}function It(){return{x:window.scrollX,y:window.scrollY}}function Lt(){return new Date().getTime()}function Ve(){const e=It(),t=Ee();we({...t,scrollPosition:e})}function Ai(e,t){if(t)we(Ee(),e);else{const n=Lt();Ii({timestamp:n,scrollPosition:null},e)}}function Dt(e){if(s(w(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(d(t,"x","number")&&d(t,"y","number"))}}function we(e,t){window.history.replaceState(e,"",t??null)}function Ii(e,t){window.history.pushState(e,"",t)}N();const Li=O("navigate.ts",{});function Di(e){Li.navigate=e}const Nt="__isRenderErrorPageException";function ze(e){return Ni(e),typeof e=="object"&&e!==null&&Nt in e}function Bt({pageContext:e}={}){{const n=this;g(!(typeof n=="object"&&(n==null?void 0:n.constructor)===Bt),"Don't use the `new` operator: use `throw RenderErrorPage()` instead of `throw new RenderErrorPage()`.")}Re(e,{errorMessagePrefix:"The `pageContext` object provided by `throw RenderErrorPage({ pageContext })`",isRenderErrorPage:!0});const t=new Error("RenderErrorPage");return v(t,{pageContext:e,[Nt]:!0}),t}function Ni(e){g(e!==Bt,"Missing parentheses `()` in `throw RenderErrorPage`: it should be `throw RenderErrorPage()`.")}const S=O("useClientRouter.ts",{previousState:X()});Mi();At();function fe(e,t){s(Pe(e)),S.clientRoutingIsDisabled=!0,t&&console.log(e),qe(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Bi(){Ui(),Wi((i,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),Hi((i,o)=>{r({scrollTarget:i,isBackwardNavigation:o})}),Di(async(i,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:a=!1}={})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:i,overwriteLastHistoryEntry:a,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,url:o=U(),overwriteLastHistoryEntry:a=!1,isBackwardNavigation:l,checkClientSideRenderable:u}){var c;if(S.clientRoutingIsDisabled){K(o);return}if(u){let R;try{R=await Ct(o)}catch(_){if(ze(_))R=!0;else throw _}if(!R){K(o);return}}const h={urlOriginal:o,isBackwardNavigation:l},f=++e;s(f>=1),f>1&&n===!1&&((c=S.onPageTransitionStart)===null||c===void 0||c.call(S,h),n=!0);let y=!1;const m=()=>f===1&&y===!1?!1:f!==e,p=await _t(h);if(m())return;const P=f===1;v(p,{_isFirstRenderAttempt:P});let b;try{b=await si(p)}catch(R){if(console.error(R),Ge(R,p))return;ze(R)?(v(p,{is404:!0}),v(p,R.pageContext)):v(p,{is404:hi(R)});try{b=await li(p)}catch(_){if(Ge(_,p)||(P||setTimeout(()=>{window.location.pathname=o},0),mr(R,_)))return;throw _}}if(v(p,b),te(p,"onPageTransitionStart"),S.onPageTransitionStart=p.exports.onPageTransitionStart,p.exports.hydrationCanBeAborted?y=!0:E(!pr(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{showStackTrace:!1,onlyOnce:!0}),!m()&&(t&&await t,!m())){if(Vi(o,a),dt.markNavigationChange(),s(t===void 0),t=(async()=>{await ki(p,!0),Oi(p)})(),await t,t=void 0,p._isFirstRenderAttempt){te(p,"onHydrationEnd");const{onHydrationEnd:R}=p.exports;if(R){const _=p.exportsAll.onHydrationEnd[0].exportSource;s(_),await be(()=>R(p),"onHydrationEnd",_)}}else f===e&&(p.exports.onPageTransitionEnd&&(te(p,"onPageTransitionEnd"),p.exports.onPageTransitionEnd(p)),n=!1);Wt(i),Se(),S.initialRenderIsDone=!0}}}function Wi(e){document.addEventListener("click",t);return;async function t(i){if(!n(i))return;const o=r(i.target);if(!o)return;const a=o.getAttribute("href");if(xt(o))return;s(a),i.preventDefault();const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(a,{keepScrollPosition:l})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:o}=i;if(!o)return null;i=o}return i}}function Hi(e){window.addEventListener("popstate",()=>{const t=X(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===S.previousState.urlWithoutHash,i=!t.historyState.timestamp||!S.previousState.historyState.timestamp?null:t.historyState.timestamp<S.previousState.historyState.timestamp;S.previousState=t,r?window.history.state===null?(At(),S.previousState=X()):Wt(n):e(n,i)})}function Vi(e,t){U()!==e&&(Se(),Ai(e,t),S.previousState=X())}function X(){return{urlWithoutHash:U({withoutHash:!0}),historyState:Ee()}}function Wt(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Gi();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;zi(t)}function zi(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await yr(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function Ui(){window.addEventListener("scroll",vr(Ve,Math.ceil(1e3/3)),{passive:!0}),Ht(Ve)}function Gi(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function Mi(){Ue(),Ht(Ue),Yi(()=>S.initialRenderIsDone&&Se())}function Se(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function Ue(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function Ht(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Yi(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function Ge(e,t){return!!(w(e)&&e._abortRendering||Ji(e,t))}function Ji(e,t){if(!Pe(e))return!1;if(t._isFirstRenderAttempt)throw fe(e,!1),e;return fe(e,!0),K(t.urlOriginal),!0}N();Yt(!0);Bi();
