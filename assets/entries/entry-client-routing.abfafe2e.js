function Vt(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function pe(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return Vt()&&(n.stack=Ut(n.stack,t)),n}function Ut(e,t){if(!e)return e;const n=Gt(e);let r=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:r<t&&zt(o)?(r++,!1):!0).join(`
`)}function zt(e){return e.startsWith("    at ")}function Gt(e){return e.split(/\r?\n/)}function _(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function R(e){return typeof e=="object"&&e!==null}function me(e){return Array.from(new Set(e))}const T=_("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),Ye="Make sure your client-side code doesn't include(/bundle)",Mt=`The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ${Ye} both for a given page.`,Je=`Two vite-plugin-ssr client runtime instances are being loaded. ${Ye} vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)`;function Ke(){{const e=me(T.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;Kt(!1,t)}}T.checkSingleInstance&&T.instances.length>1&&le(!1,Je,{onlyOnce:!0,showStackTrace:!0})}function Yt(e){le(T.isClientRouting!==!1,Mt,{onlyOnce:!0,showStackTrace:!0}),le(T.isClientRouting===void 0,Je,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),Ke()}function Jt(e){T.instances.push(e),Ke()}function Kt(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function le(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=T,a=n===!0?i:n;if(o.has(a))return;o.add(a)}console.warn(r?new Error(i):i)}const qt="0.4.133",$={projectName:"vite-plugin-ssr",projectVersion:qt,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};Jt($.projectVersion);const S=_("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},colorer:e=>e,showStackTraceList:new WeakSet}),Xt=`[${$.npmPackageName}]`,Qt=`[${$.npmPackageName}@${$.projectVersion}]`,ye=2;function s(e,t){var n;if(e)return;const r=(()=>{if(!t)return null;const a=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${$.projectName} maintainers; you can ignore this): ${a}`})();let i=[`You stumbled upon a bug in ${$.projectName}'s source code.`,`Go to ${$.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,r].filter(Boolean).join(" ");i=V(i,"Bug"),i=U(i,!0);const o=pe(i,ye);throw(n=S.onBeforeLog)===null||n===void 0||n.call(S),o}function g(e,t,{showStackTrace:n}={}){var r;if(e)return;t=V(t,"Wrong Usage"),t=U(t);const i=pe(t,ye);throw n&&S.showStackTraceList.add(i),(r=S.onBeforeLog)===null||r===void 0||r.call(S),i}function qe(e){return e=V(e,"Error"),e=U(e),pe(e,ye)}function E(e,t,{onlyOnce:n=!0,showStackTrace:r}={}){var i;if(!e){if(t=V(t,"Warning"),t=U(t),n){const{alreadyLogged:o}=S,a=n===!0?t:n;if(o.has(a))return;o.add(a)}if((i=S.onBeforeLog)===null||i===void 0||i.call(S),r){const o=new Error(t);S.showStackTraceList.add(o),S.logger(o,"warn")}else S.logger(t,"warn")}}function Xe(e,t,{onlyOnce:n}){var r;if(!e){if(t=V(t,"Info"),t=U(t),n){const{alreadyLogged:i}=S,o=t;if(i.has(o))return;i.add(o)}(r=S.onBeforeLog)===null||r===void 0||r.call(S),S.logger(t,"info")}}function V(e,t){let n=`[${t}]`;const r=t==="Info"?"blue":t==="Warning"?"yellow":"red";n=S.colorer(n,r);const i=e.startsWith("[")?"":" ";return`${n}${i}${e}`}function U(e,t=!1){return`${t?Qt:Xt}${e}`}function D(){return typeof window<"u"&&typeof window.scrollY=="number"}const Qe=_("utils/assertRouterType.ts",{});function L(){Zt(Ze()),Qe.isClientRouting=!0}function Ze(){return Qe.isClientRouting!==!1}function Zt(e){g(D(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),E(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const en=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],et=["vue","svelte","marko","md","mdx"],tn=[...en,...et];function tt(e){const t=tn.some(n=>e.endsWith("."+n));return s(!nn(e)||t),t}function nn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function rn(e){return et.some(t=>e.endsWith("."+t))}function C(e,t,n){return typeof e=="string"?Te(e.split(""),t,n).join(""):Te(e,t,n)}function Te(e,t,n){const r=[];let i=t>=0?t:e.length+t;s(i>=0&&i<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(i===o||(i===e.length&&(i=0),i===o));){const a=e[i];s(a!==void 0),r.push(a),i++}return r}function ve(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function on(e,t){s(t.includes(" but ")),g(typeof e=="string",`${t} should be a string`),!ve(e)&&(!e.startsWith("/")&&!e.includes(":")?g(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):g(!1,`${t} isn't a valid URL`))}function z(e,t){s(ve(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...r]=e.split("#");s(n!==void 0);const i=["",...r].join("#")||null;s(i===null||i.startsWith("#"));const o=i===null?"":ue(i.slice(1)),[a,...l]=n.split("?");s(a!==void 0);const c=["",...l].join("?")||null;s(c===null||c.startsWith("?"),{url:e,searchOriginal:c});const u={},h={};Array.from(new URLSearchParams(c||"")).forEach(([b,P])=>{u[b]=P,h[b]=[...h[b]||[],P]});const{origin:f,pathnameResolved:m}=an(a,t);s(f===null||f===ue(f),{origin:f}),s(m.startsWith("/"),{url:e,pathnameResolved:m}),s(f===null||e.startsWith(f),{url:e,origin:f});const y=a.slice((f||"").length);{const b=`${f||""}${y}${c||""}${i||""}`;s(e===b,{url:e,urlRecreated:b})}let{pathname:p,hasBaseServer:F}=un(m,t);return p=sn(p),s(p.startsWith("/")),{origin:f,pathname:p,pathnameOriginal:y,hasBaseServer:F,search:u,searchAll:h,searchOriginal:c,hash:o,hashOriginal:i}}function ue(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function sn(e){return e.split("/").map(t=>ue(t).split("/").join("%2F")).join("/")}function an(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let r=!1;const i="tauri://",o="http://";e.startsWith(i)&&(r=!0,e=o+e.slice(i.length));let a,l;try{const c=new URL(e);a=c.origin,l=c.pathname}catch{a=null;let u=typeof window<"u"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);u=u||"http://fake.example.org"+t,l=new URL(e,u).pathname}return l||(l="/"),r&&(s(a),s(a.startsWith(o)),a=i+a.slice(o.length)),s(l.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:l}),s(l===l.split("?")[0].split("#")[0]),{origin:a,pathnameResolved:l}}function ln(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function un(e,t){ln(e),s(be(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===C(t,0,-1)&&(r=C(t,0,-1),s(n===r)),n.startsWith(r)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function be(e){return e.startsWith("/")}function v(e,t){Object.assign(e,t)}function j(e){return e instanceof Function||typeof e=="function"}function K(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function A(e){return(t,n)=>{const r=e(t),i=e(n);if(s([!0,!1,null].includes(r)),s([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;s(!1)}}function cn(e){return A(t=>{const n=e(t);return n===null?null:!n})}function d(e,t,n="unknown"){if(!R(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?R(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?j(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function k(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function fn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const dn=e=>e!=null;function Ce(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}const gn="\\";function nt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes(gn),t(e))}function ne(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function hn(e){return typeof e=="object"&&e!==null&&"then"in e&&j(e.then)}const pn=["$$registrations","_rerender_only"],mn=[".md",".mdx"];function yn(e,t){vn(e,t,!0)}function vn(e,t,n){const i=Object.keys(e).filter(l=>!pn.includes(l)),o=i.filter(l=>l!=="default"),a=i.includes("default");if(o.length===0){if(a)return;s(i.length===0),g(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!mn.some(l=>t.endsWith(l))){const l=o.join(", ");n?E(o.length===0,`${t} should only have a default export: remove \`export { ${l} }\``,{onlyOnce:!0}):E(o.length===0,`${t} replace \`export { ${l} }\` with \`export default { ${l} }\``,{onlyOnce:!0})}}function bn(e){return Object.entries(e)}const Pn=["clientRouting"];function Rn(e){Pn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;g(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),g(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const rt=["render","clientRouting","prerender","doNotPrerender"];function En(e,t){g(!rt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Sn(e,t){const n={},r={},i={};if(e.forEach(l=>{wn(l).forEach(({exportName:u,exportValue:h,isFromDefaultExport:f})=>{var m;s(u!=="default"),i[u]=(m=i[u])!==null&&m!==void 0?m:[],i[u].push({exportValue:h,exportSource:`${l.filePath} > ${f?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t){const{configValues:l}=t;bn(l).forEach(([c,u])=>{var h,f,m;const y=t.configElements[c];s(y);const{configDefinedByFile:p,configDefinedAt:F}=y;s(p),r[c]=(h=r[c])!==null&&h!==void 0?h:u,n[c]=(f=n[c])!==null&&f!==void 0?f:[],s(n[c].length===0),n[c].push({configValue:u,configDefinedAt:F,configDefinedByFile:p});const b=c;i[b]=(m=i[b])!==null&&m!==void 0?m:[],i[b].push({exportValue:u,exportSource:F,filePath:p,_filePath:p,_fileType:null,_isFromDefaultExport:null})})}const o=Fn(),a={};return Object.entries(i).forEach(([l,c])=>{c.forEach(({exportValue:u,_fileType:h,_isFromDefaultExport:f})=>{var m;a[l]=(m=a[l])!==null&&m!==void 0?m:u,h===".page"&&!f&&(l in o||(o[l]=u))})}),s(!("default"in a)),s(!("default"in i)),{config:r,configEntries:n,exports:a,exportsAll:i,pageExports:o}}function wn(e){const{filePath:t,fileExports:n}=e;s(n),s(tt(t));const r=[];return Object.entries(n).sort(cn(([i])=>i==="default")).forEach(([i,o])=>{let a=i==="default";if(a)if(rn(t))i="Page";else{g(R(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([l,c])=>{En(l,t),r.push({exportName:l,exportValue:c,isFromDefaultExport:a})});return}r.push({exportName:i,exportValue:o,isFromDefaultExport:a})}),r.forEach(({exportName:i,isFromDefaultExport:o})=>{s(!(o&&rt.includes(i)))}),r}function Fn(){return new Proxy({},{get(...e){return D()||E(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function _n(e){const t=".page.",n=C(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function I(e){nt(e)}function it(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(g(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=me(e.map(({pageId:r})=>r).filter(r=>G(r)));if(g(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return s(r),r}return null}function G(e,t){return s(!e.includes("\\")),e.includes("/_error")}function On(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return s(n),n.isErrorPage}else return G(e)}const Tn=[".page",".page.server",".page.route",".page.client",".css"];function Cn(e){if(nt(e),e.endsWith(".css"))return".css";s(tt(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(s(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";s(!1,e)}function ot(e){const t=o=>i.pageId===o||i.isDefaultPageFile&&(ke(i.filePath)||kn(o,i.filePath)),n=Cn(e),i={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:ce(e),isRendererPageFile:n!==".css"&&ce(e)&&ke(e),isErrorPageFile:G(e),pageId:_n(e)};return i}function ce(e){return I(e),G(e)?!1:e.includes("/_default")}function ke(e){return I(e),e.includes("/renderer/")}function kn(e,t){I(e),I(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(ce(t));const n=C(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function xn(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(R(t)),s(d(t,"pageId","string")),s(d(t,"routeFilesystem","string")||d(t,"routeFilesystem","null")),s(d(t,"routeFilesystemDefinedBy","string")||d(t,"routeFilesystemDefinedBy","null")),s(d(t,"loadCodeFiles","function")),s(d(t,"isErrorPage","boolean")),s(d(t,"configElements","object")),st(t.configElements,!1)})}function jn(e){st(e,!0)}function st(e,t){s(R(e)),Object.entries(e).forEach(([n,r])=>{if(s(R(r)||r===null),r===null){s(t);return}s(d(r,"configDefinedAt","string")),s(d(r,"plusConfigFilePath","string")||d(r,"plusConfigFilePath","null")),s(d(r,"configEnv","string")),s(d(r,"codeFilePath","string")||d(r,"codeFilePath","null")),s(d(r,"codeFileExport","string")||d(r,"codeFileExport","null")),s(d(r,"configValueSerialized","string")||d(r,"configValueSerialized","undefined")),(t||n==="route")&&s(d(r,"configValue")||d(r,"configValueSerialized"))})}const An=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function Z(e){const t=JSON.parse(e);return at(t)}function at(e){return typeof e=="string"?$n(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=at(n)}),e)}function $n(e){for(const{match:t,deserialize:n}of An)if(t(e))return n(e,Z);return e}function In(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,r])=>{Dn(r),n==="route"&&Ln(r)})})}function Dn(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=Z(t))}function Ln(e){s(d(e,"configValue"));const{configValue:t}=e,n=typeof t;g(n==="string"||j(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function Bn(e){s(d(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(d(e,"pageFilesLazy","object")),s(d(e,"pageFilesEager","object")),s(d(e,"pageFilesExportNamesLazy","object")),s(d(e,"pageFilesExportNamesEager","object")),s(d(e.pageFilesLazy,".page")),s(d(e.pageFilesLazy,".page.client")||d(e.pageFilesLazy,".page.server")),s(d(e,"pageFilesList","string[]")),s(d(e,"pageConfigs")),s(d(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;xn(t),In(t),jn(n);const r={};Y(e.pageFilesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{var c;a=r[o]=(c=r[o])!==null&&c!==void 0?c:a;const u=l;xe(u),a.loadFile=async()=>{"fileExports"in a||(a.fileExports=await u(),Rn(a))}}),Y(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{var c;a=r[o]=(c=r[o])!==null&&c!==void 0?c:a;const u=l;xe(u),a.loadExportNames=async()=>{if(!("exportNames"in a)){const h=await u();g("exportNames"in h,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(d(h,"exportNames","string[]"),a.filePath),a.exportNames=h.exportNames}}}),Y(e.pageFilesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{var c;a=r[o]=(c=r[o])!==null&&c!==void 0?c:a;const u=l;s(R(u)),a.fileExports=u}),Y(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{var c;a=r[o]=(c=r[o])!==null&&c!==void 0?c:a;const u=l;s(R(u)),s(d(u,"exportNames","string[]"),a.filePath),a.exportNames=u.exportNames}),e.pageFilesList.forEach(o=>{var a;r[o]=(a=r[o])!==null&&a!==void 0?a:ot(o)});const i=Object.values(r);return i.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function Y(e){const t=[];return Object.entries(e).forEach(([n,r])=>{s(Tn.includes(n)),s(R(r)),Object.entries(r).forEach(([i,o])=>{const a=ot(i);s(a.fileType===n),t.push({filePath:i,pageFile:a,globValue:o})})}),t}function xe(e){s(j(e))}const x=_("setPageFiles.ts",{});function Nn(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=Bn(e);x.pageFilesAll=t,x.pageConfigs=n,x.pageConfigGlobal=r}async function Wn(e,t){e?(s(!x.pageFilesGetter),s(t===void 0)):(s(x.pageFilesGetter),s(typeof t=="boolean"),(!x.pageFilesAll||!t)&&await x.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=x;s(n&&r&&i);const o=Hn(n,r);return{pageFilesAll:n,allPageIds:o,pageConfigs:r,pageConfigGlobal:i}}function Hn(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),r=me(n),i=t.map(o=>o.pageId);return[...r,...i]}function Pe(e,t){return ut(e,t,!0)}function lt(e,t){return ut(e,t,!1)}function ut(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(y=>y.isRelevant(t)&&y.fileType!==".page.route").sort(Vn(n,t)),o=y=>{const p=i.filter(b=>b.pageId===t&&b.isEnv(y?"CLIENT_AND_SERVER":r));g(p.length<=1,`Merge the following files into a single file: ${p.map(b=>b.filePath).join(" ")}`);const F=p[0];return s(F===void 0||!F.isDefaultPageFile),F},a=o(!1),l=o(!0),c=y=>i.filter(p=>p.isRendererPageFile&&p.isEnv(y?"CLIENT_AND_SERVER":r))[0],u=c(!1),h=c(!0),f=i.filter(y=>y.isDefaultPageFile&&!y.isRendererPageFile&&(y.isEnv(r)||y.isEnv("CLIENT_AND_SERVER")));return[a,l,...f,u,h].filter(dn)}function Vn(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,o=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;{const c=a.isRendererPageFile,u=l.isRendererPageFile;if(!c&&u)return r;if(!u&&c)return i;s(c===u)}{const c=je(t,a.filePath),u=je(t,l.filePath);if(c<u)return r;if(u<c)return i;s(c===u)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i}return o}}function je(e,t){I(e),I(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),o=r.split("/").length,a=i.split("/").length;return o+a}const Un="modulepreload",zn=function(e){return"/"+e},Ae={},$e=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=zn(o),o in Ae)return;Ae[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Un,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},Re={},ct={},Gn={},ee={},Mn=[],Yn={},Jn=!0,Kn=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await $e(()=>import("./pages_error.fd9386f4.js"),["assets/entries/pages_error.fd9386f4.js","assets/chunks/chunk-95d4f079.js","assets/static/LayoutDefault.294b5101.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/+onRenderHtml.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderHtml.js",codeFilePath:"vike-solid/renderer/+onRenderHtml.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/+onRenderClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderClient.js",codeFilePath:"vike-solid/renderer/+onRenderClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"client-only"},Page:{configDefinedAt:"/pages/_error/+Page.tsx > `export default`",configDefinedByFile:"/pages/_error/+Page.tsx",codeFilePath:"/pages/_error/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"vike-solid/renderer/+passToClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+passToClient.js",codeFilePath:"vike-solid/renderer/+passToClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},clientRouting:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { clientRouting }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.ts > `export default { title }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.ts > `export default { description }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},hasServerOnBeforeRender:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"false"}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await $e(()=>import("./pages_index.c0e5fbf0.js"),["assets/entries/pages_index.c0e5fbf0.js","assets/chunks/chunk-95d4f079.js","assets/static/LayoutDefault.294b5101.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/+onRenderHtml.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderHtml.js",codeFilePath:"vike-solid/renderer/+onRenderHtml.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/+onRenderClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+onRenderClient.js",codeFilePath:"vike-solid/renderer/+onRenderClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.tsx > `export default`",configDefinedByFile:"/pages/index/+Page.tsx",codeFilePath:"/pages/index/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"vike-solid/renderer/+passToClient.js > `export default`",configDefinedByFile:"vike-solid/renderer/+passToClient.js",codeFilePath:"vike-solid/renderer/+passToClient.js",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},clientRouting:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { clientRouting }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"vike-solid/renderer/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"vike-solid/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"vike-solid/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.ts > `export default { title }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.ts > `export default { description }",configDefinedByFile:"/pages/+config.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},hasServerOnBeforeRender:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"false"}}}],qn={onBeforeRoute:null},Xn=Object.assign({}),Qn={...Xn};Re[".page"]=Qn;const Zn=Object.assign({}),er={...Zn};ee[".page"]=er;const tr=Object.assign({}),nr={...tr};ee[".page.server"]=nr;const rr=Object.assign({}),ir={...rr};ct[".page.route"]=ir;const or=Object.assign({}),sr={...or};Re[".page.client"]=sr;const ar=Object.assign({}),lr={...ar};ee[".page.client"]=lr;const ur=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:Jn,neverLoaded:Yn,pageConfigGlobal:qn,pageConfigs:Kn,pageFilesEager:ct,pageFilesExportNamesEager:ee,pageFilesExportNamesLazy:Gn,pageFilesLazy:Re,pageFilesList:Mn},Symbol.toStringTag,{value:"Module"}));Nn(ur);function Ie(e){const t=e/1e3;if(t<120){const n=De(t);return`${n} second${Le(n)}`}{const n=t/60,r=De(n);return`${r} minute${Le(r)}`}}function De(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Le(e){return e==="1"?"":"s"}const cr=_("utils/executeHook.ts",{userHookErrors:new Map});function te(e,t,n){const{timeoutErr:r,timeoutWarn:i}=fr(t);let o,a;const l=new Promise((f,m)=>{o=y=>{c(),f(y)},a=y=>{c(),m(y)}}),c=()=>{clearTimeout(u),clearTimeout(h)},u=setTimeout(()=>{E(!1,`The ${t}() hook defined by ${n} is taking more than ${Ie(i)}`)},i),h=setTimeout(()=>{const f=qe(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ie(r)}`);a(f)},r);return(async()=>{try{const f=await e();o(f)}catch(f){R(f)&&cr.userHookErrors.set(f,{hookName:t,hookFilePath:n}),a(f)}})(),l}function fr(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function M(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=z(t,"/");let o;return e!=null&&e.withoutHash?o=`${i}${n||""}`:o=`${i}${n||""}${r||""}`,s(o.startsWith("/")),o}s(D());function dr(e){return z(e,"/").pathname}function gr(){var e,t,n,r;const i=!!(!((t=(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||e===void 0?void 0:e.renderers)===null||t===void 0)&&t.size),o=!!(!((r=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||n===void 0?void 0:n.rendererInterfaces)===null||r===void 0)&&r.size),a=!!window.__vite_plugin_react_preamble_installed__;return i||o||a}function ft(e,t){const n=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?n(e).length===n(t).length&&n(e).every(o=>ft(e[o],t[o])):e===t}function hr(e,t){return R(e)&&R(t)&&e.constructor===t.constructor&&ft({...e,stack:null},{...t,stack:null})&&t.message===t.message}function X(e){window.location.href=e}function pr(e){return new Promise(t=>setTimeout(t,e))}function mr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}s(D());L();const Be=_("navigationState.ts",{}),yr=M(),dt={markNavigationChange(){Be.navigationChanged=!0},get noNavigationChangeYet(){return!Be.navigationChanged&&this.isFirstUrl(M())},isFirstUrl(e){return e===yr}};function vr(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);g(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const r=Z(n);s(d(r,"pageContext","object"));const{pageContext:i}=r;return s(d(i,"_pageId","string")),v(i,{_pageContextRetrievedFromServer:{...i},_comesDirectlyFromServer:!0}),i}async function br(e,t){const r=lt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Pr(e,t){if(!k(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Rr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}D()&&L();function gt(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(ne(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:pt,enumerable:t,configurable:!0}),"url"in e&&s(ne(e,"url")),Object.defineProperty(e,"url",{get:Er,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(ne(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Sr,enumerable:t,configurable:!0})}function ht(e){let t=e._urlHandler;t||(t=i=>i);const n=t(e.urlOriginal),r=e._baseServer;return s(r.startsWith("/")),z(n,r)}function pt(){const{pathname:e}=ht(this),t=e;return s(t.startsWith("/")),t}function Er(){return E(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),pt.call(this)}function Sr(){const e=ht(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,hash:l,hashOriginal:c}=e,u={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,hash:l,hashOriginal:c,get hashString(){return E(!1,"`pageContext.urlParsed.hashString` has been renamed to `pageContext.urlParsed.hashOriginal`",{onlyOnce:!0,showStackTrace:!0}),c},get searchString(){return E(!1,"`pageContext.urlParsed.searchString` has been renamed to `pageContext.urlParsed.searchOriginal`",{onlyOnce:!0,showStackTrace:!0}),a}};return Ne(u,"hashString"),Ne(u,"searchString"),u}function Ne(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function wr(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(k(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const mt="@",fe=":";function Fr(e,t){g(e.startsWith("/")||e==="*",(()=>{t?t=t+" invalid":t="Invalid";const n=[`'${e}'`,e!==""?null:"(empty string)"].filter(Boolean).join(" ");return`${t} Route String ${n}: Route Strings should start with a leading slash '/' (or be '*')`})())}function de(e,t){Fr(e),s(t.startsWith("/"));const n=e.split("/"),r=t.split("/"),i={};_r(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,r.length);o++){const a=n[o],l=r[o];if(a==="*")return i["*"]=r.slice(Math.max(1,o)).join("/"),{routeParams:i};if(a&&q(a)){if(E(!a.startsWith(fe),`Outdated Route String \`${e}\`, use \`${e.split(fe).join(mt)}\` instead.`,{onlyOnce:!0}),!l)return null;i[a.slice(1)]=l}else if((a||"")!==(l||""))return null}return{routeParams:i}}function _r(e){const t=e.split("*").length-1;g(t<=1,`Invalid Route String '${e}': Route Strings are not allowed to contain more than one glob character '*'`),g(t===0||t===1&&e.endsWith("*"),`Invalid Route String '${e}': make sure your Route String ends with the glob character '*'`)}function B(e){const t=e.split("/").filter(a=>a!==""&&a!=="*");let n=0;for(const a of t){if(q(a))break;n++}const r=t.filter(a=>!q(a)).length,i=t.filter(a=>q(a)).length,o=e.endsWith("*");return{numberOfParameterSegments:i,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:r,isCatchAll:o}}function q(e){return e.startsWith(mt)||e.startsWith(fe)}function We(e){const n=de(e,e);return s(n),Object.keys(n.routeParams).length===0}function Or(e){e.sort(Tr).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(A(t=>t.routeType==="STRING"&&We(t.routeString)===!1)).sort(A(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(A(t=>t.routeType==="STRING"&&We(t.routeString)===!0)).sort(A(t=>t.routeType==="FILESYSTEM")).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Tr(e,t){var n,r;{const i=(n=e.precedence)!==null&&n!==void 0?n:0,o=(r=t.precedence)!==null&&r!==void 0?r:0;if(i!==o)return i>o?-1:1}if(!t.routeString||!e.routeString)return 0;{const o=K(a=>B(a).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(o!==0)return o}{const o=K(a=>B(a).numberOfStaticSegements)(e.routeString,t.routeString);if(o!==0)return o}{const o=K(a=>B(a).numberOfParameterSegments)(e.routeString,t.routeString);if(o!==0)return o}{if(B(t.routeString).isCatchAll)return-1;if(B(e.routeString).isCatchAll)return 1}return 0}async function Cr(e,t,n){wr(t);let r=e(t);if(yt(r,`The Route Function ${n}`),r=await r,r===!1)return null;if(r===!0&&(r={}),g(k(r),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${d(r,"constructor")?r.constructor:r}\`.`),"match"in r){const{match:a}=r;if(g(typeof a=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!a)return null}let i=null;"precedence"in r&&(i=r.precedence,g(typeof i=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),vt(r,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=r.routeParams||{};return g(!("pageContext"in r),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(k(o)),Object.keys(r).forEach(a=>{g(a==="match"||a==="routeParams"||a==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${a} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:i,routeParams:o}}function yt(e,t){E(!hn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function vt(e,t){s(t.endsWith(" should")),d(e,"routeParams")&&(s(t.endsWith(" should")),g(k(e.routeParams),`${t} be a plain JavaScript object.`),g(Rr(e.routeParams),`${t} only hold string values.`))}function Ee(e,{hook:t,errorMessagePrefix:n,isRenderErrorPage:r}){const i=(()=>{if(n)return n;{s(t);const{hookName:o,hookFilePath:a}=t;return s(!o.endsWith(")")),`The \`pageContext\` object provided by the ${o}() hook defined by ${a}`}})();g(R(e),`${i} should be an object instead of \`${typeof e}\``),g(!("_objectCreatedByVitePluginSsr"in e),`${i} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),E(!("_pageId"in e),`${i} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),r||g(!("is404"in e),`${i} sets \`pageContext.is404\` which is forbidden, use \`throw RenderErrorPage()\` instead, see https://vite-plugin-ssr.com/RenderErrorPage`)}async function kr(e,t){let n=e.onBeforeRoute(t);yt(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(n==null||Pr(n,["pageContext"])&&d(n,"pageContext"),`${r} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(g(d(n,"pageContext","object"),`${r} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),d(n.pageContext,"_pageId")&&!d(n.pageContext,"_pageId","null")){const o=`${r} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;g(d(n.pageContext,"_pageId","string"),`${o} a string or null`),g(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(a=>`'${a}'`).join(", ")}]\`.`)}d(n.pageContext,"routeParams")&&vt(n.pageContext,`${r} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const i={};return d(n.pageContext,"url")&&(E(!1,`${r} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),d(n.pageContext,"urlOriginal")&&(on(n.pageContext.urlOriginal,`${r} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),v(i,{_urlPristine:t.urlOriginal})),Ee(n.pageContext,{hook:{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}}),v(i,n.pageContext),i}var J;function He(...e){var t,n;J||(J=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),J&&J(...e)}D()&&L();async function bt(e){gt(e),He("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const a=await kr(e._onBeforeRouteHook,e);if(a){if(v(t,a),d(t,"_pageId","string")||d(t,"_pageId","null"))return d(t,"routeParams")?s(d(t,"routeParams","object")):v(t,{routeParams:{}}),v(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};v(e,t)}}v(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),g(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:r}=e;s(r.startsWith("/"));const i=[];await Promise.all(e._pageRoutes.map(async a=>{const{pageId:l,routeType:c}=a;if(a.routeType==="FILESYSTEM"){const{routeString:u}=a,h=de(u,r);if(h){const{routeParams:f}=h;i.push({pageId:l,routeParams:f,routeString:u,routeType:c})}return}if(a.routeType==="STRING"){const{routeString:u}=a,h=de(u,r);if(h){const{routeParams:f}=h;s(c==="STRING"),i.push({pageId:l,routeString:u,routeParams:f,routeType:c})}return}if(a.routeType==="FUNCTION"){const{routeFunction:u,routeDefinedAt:h}=a,f=await Cr(u,e,h);if(f){const{routeParams:m,precedence:y}=f;i.push({pageId:l,precedence:y,routeParams:m,routeType:c})}return}s(!1)})),Or(i);const o=i[0];if(He(`Route matches for URL \`${r}\` (in precedence order):`,i),v(t,{_routeMatches:i}),!o)return v(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:a}=o;s(k(a)),v(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function W(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];s(r.exportValue===n);const i=r.exportSource;return s(i),s(!t.endsWith(")")),g(j(n),`hook ${t}() defined by ${i} should be a function`),{hookFn:n,hookFilePath:i}}function re(e,t){W(e,t)}function xr(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>fn(n,r)).forEach(([n,r])=>{e[n]=r})}function jr(e){Ar(e),$r(e)}function Ar(e){On(e._pageId,e._pageConfigs)&&s(d(e,"is404","boolean"))}function $r(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!R(t)){E(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const ie=_("preparePageContextForUserConsumptionClientSide.ts",{});function Se(e,t){if(t){const i=e;s([!0,!1].includes(i.isHydration)),s([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;s(i.isHydration===!0),s(i.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(R(e.pageExports));const n=e.exports.Page;v(e,{Page:n}),Nr(e),xr(e),s([!0,!1].includes(e._comesDirectlyFromServer));const r=e._comesDirectlyFromServer?Lr(e):e;return jr(e),r}const Ir=["then","toJSON"],Dr=["_pageId"];function Lr(e){return new Proxy(e,{get:n});function t(r){return!(r in e||Ir.includes(r)||typeof r=="symbol"||typeof r!="string"||r.startsWith("__v_"))}function n(r,i){return ie.disableAssertPassToClient!==i&&Br(e._pageContextRetrievedFromServer,i,t(i)),ie.disableAssertPassToClient=i,window.setTimeout(()=>{ie.disableAssertPassToClient=void 0},0),e[i]}}function Br(e,t,n){if(!n||e===null)return;const r=Object.keys(e).filter(i=>!Dr.includes(i));g(!1,[`pageContext.${t} isn't available in the browser`,`('${t}' is missing in the passToClient list [${r.map(i=>`'${i}'`).join(", ")}]).`,`Did you forget to add '${t}' to the passToClient list?`,"See https://vite-plugin-ssr.com/passToClient"].join(" "))}function Nr(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Pt(e,t){var n;const r=e.filter(o=>o.pageId===t);return s(r.length<=1),(n=r[0])!==null&&n!==void 0?n:null}async function Wr(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(i=>{const{configName:o,codeFilePath:a}=i;let l;if(i.isPlusFile){const{codeFileExports:c}=i;o!=="client"&&yn(c,a),Object.entries(c).forEach(([u,h])=>{const f=u!=="default",m=f?u:i.configName,y=h;if(n[m]=y,f){const p=e.configElements[i.configName];s(p),e.configElements[m]={configValue:y,codeFileExport:u,codeFilePath:a,configDefinedByFile:a,configDefinedAt:`${a} > export { ${u} }`,configEnv:p.configEnv,plusConfigFilePath:null}}})}else l=i.codeFileExportValue,n[o]=l}),Object.entries(e.configElements).map(([i,o])=>{o.codeFilePath||(n[i]=o.configValue)}),v(e,{configValues:n})),e}const Rt="__whileFetchingAssets";async function H(e,t,n){const r=Pe(e,n),i=Pt(t,n);let o;try{o=(await Promise.all([i&&Wr(i,!1),...r.map(y=>{var p;return(p=y.loadFile)===null||p===void 0?void 0:p.call(y)})]))[0]}catch(m){throw Hr(m)&&Object.assign(m,{[Rt]:!0}),m}const{config:a,configEntries:l,exports:c,exportsAll:u,pageExports:h}=Sn(r,o);return{config:a,configEntries:l,exports:c,exportsAll:u,pageExports:h,_pageFilesLoaded:r}}function we(e){return e?e[Rt]===!0:!1}function Hr(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Ve=["urlPathname","urlParsed"],Vr=["Page","pageExports","exports"];function Et(e){[...Vr,...Ve].forEach(n=>{n in e&&(Ve.includes(n)?(s(n.startsWith("url")),E(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):E(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}const Ur="/";function zr(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:o}=z(e,Ur);e.startsWith("/")&&s(e===`${r}${i||""}${o||""}`,{url:e});const a=r.endsWith("/");let l;return n&&r!=="/"?(a?l=C(r,0,-1):l=r,s(!l.endsWith("/"),{url:e}),s(l!=="")):l=r+(a?"":"/")+"index",s(l),l=l+t,`${l}${i||""}${o||""}`}const Gr=".pageContext.json",Mr=!1;function Yr(e){return zr(e,Gr,Mr)}function ge(e,t,n){const r=e.configElements[t];if(!r||Jr(e,t))return null;const{configValue:i,configDefinedAt:o}=r;return g(typeof i===n,`${o} has an invalid type \`${typeof i}\`: is should be a ${n} instead`),i}function Jr(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:r,configValue:i}=n;return r?!1:i==null}function Kr(e,t){const n=t.find(r=>r.pageId===e);return s(t.length>0),s(n),n}function qr(e,t,n){s(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const o of i)t.includes(o)||r.push(o);g(r.length===0,[n,"returned an object with following unknown keys:",Ce(r)+".","Only following keys are allowed:",Ce(t)+"."].join(" "))}function Xr(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;g(k(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),qr(e,["pageContext"],n),e.pageContext&&Ee(e.pageContext,{hook:{hookName:"onBeforeRender",hookFilePath:t}})}function Qr(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(K(({filesystemRoot:o})=>o.length))[0];let i;if(r){const{filesystemRoot:o,urlRoot:a}=r,l={pageId:e,filesystemRoot:o,urlRoot:a};s(a.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),s(e.startsWith(o),l),o!=="/"?(s(!o.endsWith("/"),l),i=C(e,o.length,0)):i=e,s(i.startsWith("/"),l),i=a+(a.endsWith("/")?"":"/")+C(i,1,0)}else i=e;return s(i.startsWith("/")),i=i.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!i.includes(".page.")),s(!i.endsWith(".")),i.endsWith("/index")&&(i=C(i,0,-6)),i===""&&(i="/"),s(i.startsWith("/")),s(!i.endsWith("/")||i==="/"),i}async function Zr(e,t,n,r){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var c;return(c=l.loadFile)===null||c===void 0?void 0:c.call(l)}));const{onBeforeRouteHook:i,filesystemRoots:o}=ti(e,t,n);return{pageRoutes:ei(o,e,t,r),onBeforeRouteHook:i}}function ei(e,t,n,r){const i=[];let o=[...r];if(n.length>0){s(e===null);const a=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const c=l.pageId;o=ii(o,c);let u=null;{const h=l.configElements.route;if(h){s("configValue"in h);const f=h.configValue,m=h.configDefinedAt;if(s(m),typeof f=="string")u={pageId:c,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:m,routeType:"STRING"};else{s(j(f));{const y=l.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions;if(y){const p=y.configValue;s(typeof p=="boolean",`${y.configDefinedAt} should be a boolean`)}}u={pageId:c,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:m,routeType:"FUNCTION"}}}}if(!u){const{routeFilesystem:h,routeFilesystemDefinedBy:f}=l;s(h),s(h.startsWith("/")),s(f),u={pageId:c,routeFilesystemDefinedBy:f,comesFromV1PageConfig:a,routeString:h,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(u),i.push(u)})}if(n.length===0){s(e);const a=!1;o.filter(l=>!G(l)).forEach(l=>{const c=St(l,t);if(!c||!("default"in c.fileExports)){const u=Qr(l,e);s(u.startsWith("/")),s(!u.endsWith("/")||u==="/"),i.push({pageId:l,comesFromV1PageConfig:a,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:h}=c;if(s(h.default),d(h,"default","string")){const f=h.default;g(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:l,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:u,routeType:"STRING"});return}if(d(h,"default","function")){const f=h.default;{const m="iKnowThePerformanceRisksOfAsyncRouteFunctions";m in h&&g(d(h,m,"boolean"),`The export \`${m}\` of ${u} should be a boolean.`)}i.push({pageId:l,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:u,routeType:"FUNCTION"});return}g(!1,`The default export of ${u} should be a string or a function.`)}})}return i}function ti(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const a=n.onBeforeRoute.codeFilePath;return s(a),g(j(o),`The hook onBeforeRoute() defined by ${a} should be a function.`),{onBeforeRouteHook:{hookFilePath:a,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:a})=>{if(s(a),"onBeforeRoute"in a){g(d(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:l}=a;r={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in a&&(g(d(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),g(d(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:ri(o),urlRoot:a.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function St(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function ni(e,t){const n=St(e,t);if(!n)return null;const{filePath:r,fileExports:i}=n;s(i);const o=i.guard;if(!o)return null;const a=r;return g(j(o),`guard() defined by ${a} should be a function`),{hookFn:o,hookFilePath:a}}function ri(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=C(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function ii(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),s(e.length===n-1),e}async function oi(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=ni(e._pageId,e._pageFilesAll)):n=W(e,"guard"),!n)return;const r=n.hookFn;let i=e;const o=t(e);o&&(i=o);const a=await te(()=>r(i),"guard",n.hookFilePath);g(a===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}async function si(e){return e._isFirstRenderAttempt&&dt.isFirstUrl(e.urlOriginal)?(s(d(e,"_isFirstRenderAttempt","true")),ai(e)):(s(d(e,"_isFirstRenderAttempt","false")),ui(e))}async function ai(e){const t=vr();return Et(t),v(t,{isHydration:!0,_comesDirectlyFromServer:!0}),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}async function li(e){const t=it(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page");const n={isHydration:!1,_pageId:t,_pageContextRetrievedFromServer:null,_comesDirectlyFromServer:!1};return v(n,await H(e._pageFilesAll,e._pageConfigs,n._pageId)),n}async function ui(e){let t={};v(t,{isHydration:!1}),v(t,await di(e)),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),await oi({_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null,...e,...t},r=>Se(r,!0));const n=await ci({...e,...t});if(s([!0,!1].includes(n._comesDirectlyFromServer)),n._isError){t={},s(n._comesDirectlyFromServer===!0),s(d(n,"is404","boolean")),s(d(n,"pageProps","object")),s(d(n.pageProps,"is404","boolean")),s(!("serverSideError"in n));const r=it(e._pageFilesAll,e._pageConfigs);return s(r),v(t,{isHydration:!1,_pageId:r}),v(t,n),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}else return v(t,n),t}async function ci(e){const t=W(e,"onBeforeRender");if(t){const r=t.hookFn,i={_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null},o=Se({...e,...i},!0),a=await te(()=>r(o),"onBeforeRender",t.hookFilePath);Xr(a,t.hookFilePath);const l=a==null?void 0:a.pageContext;return v(i,l),i}if(await fi(e)){const r=await pi(e),i={};return Object.assign(i,r),v(i,{_comesDirectlyFromServer:!0,_pageContextRetrievedFromServer:r}),i}return{_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null}}async function fi(e){var t;if(e._pageConfigs.length>0){const n=Kr(e._pageId,e._pageConfigs);return(t=ge(n,"hasServerOnBeforeRender","boolean"))!==null&&t!==void 0?t:!1}else{const{hasOnBeforeRenderServerSideOnlyHook:n}=await br(e._pageFilesAll,e._pageId);return n}}async function di(e){const n=(await bt(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw gi(r),r}return s(d(n,"_pageId","string")),n}function gi(e){v(e,{_is404:!0})}function hi(e){return R(e)&&e._is404===!0}async function pi(e){var t;const n=Yr((t=e._urlPristine)!==null&&t!==void 0?t:e.urlOriginal),r=await fetch(n);{const l=r.headers.get("content-type"),c=l&&l.includes("application/json");if(!c&&r.status===404){X(e.urlOriginal);const u=new Error("Page doesn't exist");throw Object.assign(u,{_abortRendering:!0}),u}g(c,`Wrong HTTP Response Header \`content-type\` value for URL ${n} (it should be \`application/json\` but we got \`${l}\`). Make sure to use \`pageContext.httpResponse.contentType\`, see https://github.com/brillout/vite-plugin-ssr/issues/191`)}const i=await r.text(),o=Z(i);if("serverSideError"in o)throw qe("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");s(d(o,"pageContext"));const a=o.pageContext;return s(k(a)),s(d(a,"_pageId","string")),Et(a),a}function wt(){const e="/";return s(mi(e)),e}function mi(e){return e.startsWith("/")}const oe=_("createPageContext.ts",{});async function Ft(e){oe.pageFilesData||(oe.pageFilesData=await Wn(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=oe.pageFilesData,{pageRoutes:o,onBeforeRouteHook:a}=await Zr(t,r,i,n),l=wt();s(be(l));const c={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_baseServer:l,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:a};return v(c,e),gt(c),c}async function _t(e){const t=await Ft({urlOriginal:e}),n=await bt(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function N(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function yi({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(i(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&N(l).includes("render")))}function i(){const a=e.some(l=>N(l).includes("render"));g(a,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,c)=>` (${c+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>N(l).includes("clientRouting"))}}function vi({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const o=t.filter(l=>!e.includes(l)),a=[];if(a.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),a.push(...o.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(l=>l.filePath);else{const l=bi(r);a.push({id:l,onlyAssets:!1,eagerlyImported:!1}),i=[l]}return{clientEntries:i,clientDependencies:a}}function bi(e){return e?"@@vite-plugin-ssr/dist/esm/client/router/entry.js":"@@vite-plugin-ssr/dist/esm/client/entry.js"}function Pi(e,t){let n=Pe(e,t);const r=lt(e,t),{isHtmlOnly:i,isClientRouting:o}=yi({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(c=>c.isEnv("CLIENT_ONLY")&&!N(c).includes("render")),n=Ei(n));const{clientEntries:a,clientDependencies:l}=vi({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:o});return{isHtmlOnly:i,isClientRouting:o,clientEntries:a,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function Ri(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=Pe(e,t);await Promise.all(r.map(async i=>{var o;s(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((o=i.loadExportNames)===null||o===void 0?void 0:o.call(i))}))}function Ei(e){const t=[];for(const n of e)if(t.push(n),N(n).includes("overrideDefaultPages"))break;return t}function Si(e,t,n){var r,i;if(e){const o=(r=ge(e,"clientRouting","boolean"))!==null&&r!==void 0?r:!1;return{isClientSideRenderable:(i=ge(e,"isClientSideRenderable","boolean"))!==null&&i!==void 0?i:!1,isClientRouting:o}}else{const{isHtmlOnly:o,isClientRouting:a}=Pi(t,n);return{isClientSideRenderable:!o,isClientRouting:a}}}async function Ot(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await _t(e);if(!t)return!1;await Ri(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=Pt(r,t),{isClientSideRenderable:o,isClientRouting:a}=Si(i,n,t);return o&&a}function Tt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Ct(e){const t=e.getAttribute("href");return!!(t===null||t===""||Tt(t)||Fi(e)||_i(t)||!Oi(t)||!ve(t)||!wi(e))}function wi(e){if(Ki()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function Fi(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function _i(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function Oi(e){const t=wt();s(be(t));const{hasBaseServer:n}=z(e,t);return n}function Ti(e,t){let n=Ci(e,t);return n==="viewport"&&!e._isProduction&&(Xe(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function Ci(e,t){{const n=ki(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(k(n),r);const i=Object.keys(n);g(i.length===1&&i[0]==="when",r);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const a=o.toLowerCase();return E(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${a}' instead`,{onlyOnce:!0}),a}g(!1,r)}return"hover"}function ki(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),E(!1,r,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";g(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const kt=new Map;function xt(e){const t=At(e);return kt.has(t)}function jt(e){const t=At(e);kt.set(t,!0)}function At(e){return dr(e)}L();const Ue=new Map;async function se(e){if(g(Ze(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),g(!Tt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),xt(e))return;jt(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await _t(e);if(t)try{await H(n,r,t)}catch(i){if(we(i))he(i,!0);else throw i}}function xi(e){jt(e.urlOriginal),[...document.getElementsByTagName("A")].forEach(async n=>{if(Ue.has(n))return;Ue.set(n,!0);const r=n.getAttribute("href");if(Ct(n))return;s(r);try{if(!await Ot(r))return}catch{return}if(xt(r))return;const{prefetchStaticAssets:i}=Ti(e,n);if(i){if(i==="hover")n.addEventListener("mouseover",()=>se(r)),n.addEventListener("touchstart",()=>se(r),{passive:!0});else if(i==="viewport"){const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(se(r),o.disconnect())})});o.observe(n)}}else return})}async function ji(e,t){const n=Se(e,t);let r=null,i;r=W(e,"render"),i="render";{const l=W(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=Ai(e);if(e._pageConfigs.length>0)g(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const c=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+l:u="One of the following files should export a `render()` hook: "+c.map(h=>h.filePath).join(" "),g(!1,u)}}s(r);const o=r.hookFn;s(i);const a=await te(()=>o(n),i,r.hookFilePath);g(a===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function Ai(e){let t;try{t=e.urlOriginal}catch{}return t=t??window.location.href,t}function $t(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=Dt()),"scrollPosition"in e||(t=!0,e.scrollPosition=It()),Lt(e),t&&_e(e)}function Fe(){const e=window.history.state||{};return Lt(e),e}function It(){return{x:window.scrollX,y:window.scrollY}}function Dt(){return new Date().getTime()}function ze(){const e=It(),t=Fe();_e({...t,scrollPosition:e})}function $i(e,t){if(t)_e(Fe(),e);else{const n=Dt();Ii({timestamp:n,scrollPosition:null},e)}}function Lt(e){if(s(R(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(d(t,"x","number")&&d(t,"y","number"))}}function _e(e,t){window.history.replaceState(e,"",t??null)}function Ii(e,t){window.history.pushState(e,"",t)}L();const Di=_("navigate.ts",{});function Li(e){Di.navigate=e}const Bt="__isRenderErrorPageException";function ae(e){return Bi(e),typeof e=="object"&&e!==null&&Bt in e}function Nt({pageContext:e}={}){{const n=this;g(!(typeof n=="object"&&(n==null?void 0:n.constructor)===Nt),"Don't use the `new` operator: use `throw RenderErrorPage()` instead of `throw new RenderErrorPage()`.",{showStackTrace:!0})}e!==void 0&&Ee(e,{errorMessagePrefix:"The `pageContext` object provided by `throw RenderErrorPage({ pageContext })`",isRenderErrorPage:!0});const t=new Error("RenderErrorPage");return v(t,{pageContext:e,[Bt]:!0}),t}function Bi(e){g(e!==Nt,"Missing parentheses `()` in `throw RenderErrorPage`: it should be `throw RenderErrorPage()`.",{showStackTrace:!0})}const w=_("useClientRouter.ts",{previousState:Q()});Mi();$t();function he(e,t){s(we(e)),w.clientRoutingIsDisabled=!0,t&&console.log(e),Xe(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Ni(){zi(),Wi((i,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),Hi((i,o)=>{r({scrollTarget:i,isBackwardNavigation:o})}),Li(async(i,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:a=!1}={})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:i,overwriteLastHistoryEntry:a,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,url:o=M(),overwriteLastHistoryEntry:a=!1,isBackwardNavigation:l,checkClientSideRenderable:c}){var u;if(w.clientRoutingIsDisabled){X(o);return}if(c){let P;try{P=await Ot(o)}catch(O){if(ae(O))P=!0;else throw O}if(!P){X(o);return}}const h={urlOriginal:o,isBackwardNavigation:l},f=++e;s(f>=1),f>1&&n===!1&&((u=w.onPageTransitionStart)===null||u===void 0||u.call(w,h),n=!0);let m=!1;const y=()=>f===1&&m===!1?!1:f!==e,p=await Ft(h);if(y())return;const F=f===1;v(p,{_isFirstRenderAttempt:F});let b;try{b=await si(p)}catch(P){if(ae(P)||console.error(P),Me(P,p))return;ae(P)?(v(p,{is404:!0}),v(p,P.pageContext)):v(p,{is404:hi(P)});try{b=await li(p)}catch(O){if(Me(O,p)||(F||setTimeout(()=>{window.location.pathname=o},0),hr(P,O)))return;throw O}}if(v(p,b),re(p,"onPageTransitionStart"),w.onPageTransitionStart=p.exports.onPageTransitionStart,p.exports.hydrationCanBeAborted?m=!0:E(!gr(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!y()&&(t&&await t,!y())){if(Vi(o,a),dt.markNavigationChange(),s(t===void 0),t=(async()=>{await ji(p,!0),xi(p)})(),await t,t=void 0,p._isFirstRenderAttempt){re(p,"onHydrationEnd");const{onHydrationEnd:P}=p.exports;if(P){const O=p.exportsAll.onHydrationEnd[0].exportSource;s(O),await te(()=>P(p),"onHydrationEnd",O)}}else f===e&&(p.exports.onPageTransitionEnd&&(re(p,"onPageTransitionEnd"),p.exports.onPageTransitionEnd(p)),n=!1);Wt(i),Oe(),w.initialRenderIsDone=!0}}}function Wi(e){document.addEventListener("click",t);return;function t(i){if(!n(i))return;const o=r(i.target);if(!o)return;const a=o.getAttribute("href");if(Ct(o))return;s(a),i.preventDefault();const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(a,{keepScrollPosition:l})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:o}=i;if(!o)return null;i=o}return i}}function Hi(e){window.addEventListener("popstate",()=>{const t=Q(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===w.previousState.urlWithoutHash,i=!t.historyState.timestamp||!w.previousState.historyState.timestamp?null:t.historyState.timestamp<w.previousState.historyState.timestamp;w.previousState=t,r?window.history.state===null?($t(),w.previousState=Q()):Wt(n):e(n,i)})}function Vi(e,t){M()!==e&&(Oe(),$i(e,t),w.previousState=Q())}function Q(){return{urlWithoutHash:M({withoutHash:!0}),historyState:Fe()}}function Wt(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Gi();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;Ui(t)}function Ui(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await pr(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function zi(){window.addEventListener("scroll",mr(ze,Math.ceil(1e3/3)),{passive:!0}),Ht(ze)}function Gi(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function Mi(){Ge(),Ht(Ge),Yi(()=>w.initialRenderIsDone&&Oe())}function Oe(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function Ge(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function Ht(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Yi(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function Me(e,t){return!!(R(e)&&e._abortRendering||Ji(e,t))}function Ji(e,t){if(!we(e))return!1;if(t._isFirstRenderAttempt)throw he(e,!1),e;return he(e,!0),X(t.urlOriginal),!0}function Ki(){return!!window._disableAutomaticLinkInterception}L();Yt(!0);Ni();
