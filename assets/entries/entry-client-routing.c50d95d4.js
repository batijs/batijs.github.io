function on(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function Pe(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return on()&&(n.stack=an(n.stack,t)),n}function an(e,t){if(!e)return e;const n=un(e);let r=0;return n.filter(s=>s.includes(" (internal/")||s.includes(" (node:internal")?!1:r<t&&ln(s)?(r++,!1):!0).join(`
`)}function ln(e){return e.startsWith("    at ")}function un(e){return e.split(/\r?\n/)}function C(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function S(e){return typeof e=="object"&&e!==null}function Se(e){return Array.from(new Set(e))}const T=C("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),cn="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vite-plugin-ssr.com/client-runtimes-conflict",it="Two vite-plugin-ssr client runtime instances are being loaded. Make sure your client-side bundles don't include vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)";function st(){{const e=Se(T.instances);gn(e.length<=1,`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`)}T.checkSingleInstance&&T.instances.length>1&&me(!1,it,{onlyOnce:!0,showStackTrace:!0})}function fn(e){me(T.isClientRouting!==!1,cn,{onlyOnce:!0,showStackTrace:!0}),me(T.isClientRouting===void 0,it,{onlyOnce:!0,showStackTrace:!0}),T.isClientRouting=!0,e&&(T.checkSingleInstance=!0),st()}function dn(e){T.instances.push(e),st()}function gn(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function me(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:s}=T,o=n===!0?i:n;if(s.has(o))return;s.add(o)}console.warn(r?new Error(i):i)}const hn="0.4.141",L={projectName:"vite-plugin-ssr",projectVersion:hn,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};dn(L.projectVersion);const ot=new Proxy(e=>e,{get:()=>ot}),h=ot,P=C("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),pn=`[${L.npmPackageName}]`,mn=`[${L.npmPackageName}@${L.projectVersion}]`,Ee=2;function a(e,t){var o;if(e)return;const n=(()=>{if(!t)return null;const l=typeof t=="string"?t:JSON.stringify(t);return h.dim(`Debug info (this is for the ${L.projectName} maintainers; you can ignore this): ${l}`)})(),r=`${L.githubRepository}/issues/new`;let i=[`You stumbled upon a bug in ${L.projectName}'s source code.`,`Go to ${h.blue(r)} and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");i=J(i),i=le(i,"Bug"),i=M(i,!0);const s=Pe(i,Ee);throw(o=P.onBeforeLog)==null||o.call(P),s}function d(e,t,{showStackTrace:n}={}){var i;if(e)return;t=J(t),t=le(t,"Wrong Usage"),t=M(t);const r=Pe(t,Ee);throw n&&P.showStackTraceList.add(r),(i=P.onBeforeLog)==null||i.call(P),r}function at(e){return e=J(e),e=le(e,"Error"),e=M(e),Pe(e,Ee)}function R(e,t,{onlyOnce:n,showStackTrace:r}){var i;if(!e){if(t=J(t),t=le(t,"Warning"),t=M(t),n){const{alreadyLogged:s}=P,o=n===!0?t:n;if(s.has(o))return;s.add(o)}if((i=P.onBeforeLog)==null||i.call(P),r){const s=new Error(t);P.showStackTraceList.add(s),P.logger(s,"warn")}else P.logger(t,"warn")}}function _e(e,t,{onlyOnce:n}){var r;if(!e){if(t=J(t),t=M(t),n){const{alreadyLogged:i}=P,s=t;if(i.has(s))return;i.add(s)}(r=P.onBeforeLog)==null||r.call(P),P.logger(t,"info")}}function le(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=h.bold(h[r](n)),`${n}${e}`}function J(e){return e.startsWith("[")?e:` ${e}`}function M(e,t=!1){return`${t?mn:pn}${e}`}function N(){return typeof window<"u"&&typeof window.scrollY=="number"}const lt=C("utils/assertRouterType.ts",{});function U(){yn(ut()),lt.isClientRouting=!0}function ut(){return lt.isClientRouting!==!1}function yn(e){d(N(),`${h.cyan("import { something } from 'vite-plugin-ssr/client/router'")} is forbidden on the server-side`,{showStackTrace:!0}),R(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}const bn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ct=["vue","svelte","marko","md","mdx"],wn=[...bn,...ct];function ft(e){const t=wn.some(n=>e.endsWith("."+n));return a(!Rn(e)||t),t}function Rn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function vn(e){return ct.some(t=>e.endsWith("."+t))}function A(e,t,n){return typeof e=="string"?We(e.split(""),t,n).join(""):We(e,t,n)}function We(e,t,n){const r=[];let i=t>=0?t:e.length+t;a(i>=0&&i<=e.length);let s=n>=0?n:e.length+n;for(a(s>=0&&s<=e.length);!(i===s||(i===e.length&&(i=0),i===s));){const o=e[i];a(o!==void 0),r.push(o),i++}return r}function $e(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Pn(e,t){a(t.includes(" but ")),d(typeof e=="string",`${t} should be a string`),!$e(e)&&(!e.startsWith("/")&&!e.includes(":")?d(!1,`${t} is ${h.cyan(e)} and it should be /${h.cyan(e)} instead (URL pathnames should start with a leading slash)`):d(!1,`${t} isn't a valid URL`))}function K(e,t){a($e(e)),a(t.startsWith("/"));const[n,...r]=e.split("#");a(n!==void 0);const i=["",...r].join("#")||null;a(i===null||i.startsWith("#"));const s=i===null?"":ye(i.slice(1)),[o,...l]=n.split("?");a(o!==void 0);const c=["",...l].join("?")||null;a(c===null||c.startsWith("?"));const u={},g={};Array.from(new URLSearchParams(c||"")).forEach(([b,V])=>{u[b]=V,g[b]=[...g[b]||[],V]});const{origin:f,pathnameResolved:v}=En(o,t);a(f===null||f===ye(f)),a(v.startsWith("/")),a(f===null||e.startsWith(f));const m=o.slice((f||"").length);On(e,f,m,c,i);let{pathname:w,hasBaseServer:O}=$n(v,t);return w=Sn(w),a(w.startsWith("/")),{origin:f,pathname:w,pathnameOriginal:m,hasBaseServer:O,search:u,searchAll:g,searchOriginal:c,hash:s,hashOriginal:i}}function ye(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function Sn(e){return e.split("/").map(t=>ye(t).split("/").join("%2F")).join("/")}function En(e,t){var l;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let n=!1;const r="tauri://",i="http://";e.startsWith(r)&&(n=!0,e=i+e.slice(r.length));let s,o;try{const c=new URL(e);s=c.origin,o=c.pathname}catch{s=null;let u=typeof window<"u"&&((l=window==null?void 0:window.document)==null?void 0:l.baseURI);u=u||"http://fake.example.org"+t,o=new URL(e,u).pathname}return o||(o="/"),n&&(a(s),a(s.startsWith(i)),s=r+s.slice(i.length)),a(o.startsWith("/")),a(o===o.split("?")[0].split("#")[0]),{origin:s,pathnameResolved:o}}function _n(e){a(e.startsWith("/")),a(!e.includes("?")),a(!e.includes("#"))}function $n(e,t){_n(e),a(Oe(t));let n=e;if(a(n.startsWith("/")),a(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===A(t,0,-1)&&(r=A(t,0,-1),a(n===r)),n.startsWith(r)?(a(n.startsWith("/")||n.startsWith("http")),a(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),a(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Oe(e){return e.startsWith("/")}function On(e,t,n,r,i){const s=Cn(t,n,r,i);a(e===s)}function Cn(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function y(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function W(e){return e instanceof Function||typeof e=="function"}function ne(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function j(e){return(t,n)=>{const r=e(t),i=e(n);if(a([!0,!1,null].includes(r)),a([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;a(!1)}}function Fn(e){return j(t=>{const n=e(t);return n===null?null:!n})}function p(e,t,n="unknown"){if(!S(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?S(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?W(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function x(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function In(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const Tn=e=>e!=null;function Be(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function dt(e){const t=n=>`Not a posix path: ${n}`;a(e!==null,t("null")),a(typeof e=="string",t(`typeof path === ${JSON.stringify(typeof e)}`)),a(e!=="",t("(empty string)")),a(e),a(!e.includes("\\"),t(e))}function fe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function An(e){return typeof e=="object"&&e!==null&&"then"in e&&W(e.then)}const kn=["$$registrations","_rerender_only"],xn=[".md",".mdx"];function jn(e,t){Ln(e,t,!0)}function Ln(e,t,n){const i=Object.keys(e).filter(l=>!kn.includes(l)),s=i.filter(l=>l!=="default"),o=i.includes("default");if(s.length===0){if(o)return;a(i.length===0),d(!1,`${t} doesn't export any value, but it should have a ${h.cyan("export default")} instead`)}else if(!xn.some(l=>t.endsWith(l)))if(n)s.forEach(l=>{R(s.length===0,`${t} should only have a default export: move ${h.cyan(`export { ${l} }`)} to +config.h.js or its own +${s}.js`,{onlyOnce:!0})});else{const l=s.join(", ");R(s.length===0,`${t} replace ${h.cyan(`export { ${l} }`)} with ${h.cyan(`export default { ${l} }`)}`,{onlyOnce:!0})}}function Nn(e){return[null,void 0].includes(e)?String(e):["undefined","boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}const Wn=["clientRouting"];function Bn(e){Wn.forEach(t=>{if(a(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;d(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),d(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const gt=["render","clientRouting","prerender","doNotPrerender"];function Hn(e,t){d(!gt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Dn(e){let t="",n="",[r,...i]=e;return r?r==="*"?(a(i.length===0),"export *"):(r==="default"?t="export default":(t="export",i=[r,...i]),i.forEach(o=>{t=`${t} { ${o}`,n=` }${n}`}),t+n):null}function H(e,t,n){const r=ht(e,t);if(r===null)return null;const{value:i,definedAtInfo:s}=r;return n&&Vn(i,n,t,s),{value:i}}function Un(e,t){const n=ht(e,t);a(n);const{definedAtInfo:r}=n;return a(r),r}function ht(e,t){const n=e.configValues[t];if(!n)return null;const{value:r,definedAtInfo:i}=n;return r===null?null:{value:r,definedAtInfo:i}}function pt(e,t){const n=t.find(r=>r.pageId===e);return a(t.length>0),a(n),n}function Vn(e,t,n,r){a(e!==null);const i=typeof e;if(i===t)return;const s=Nn(e),o=s!==null?`value ${h.cyan(s)}`:`type ${h.cyan(i)}`,l=mt(n,{definedAtInfo:r},!0);d(!1,`${l} has an invalid ${o}: is should be a ${h.cyan(t)} instead`)}function mt(e,{definedAtInfo:t},n,r){let i=`${n?"Config":"config"} ${h.cyan(e)}`;return t!==null&&(i=`${i} defined at ${yt(t,r)}`),i}function yt(e,t){const{filePath:n,fileExportPath:r}=e;let i=n;const s=Dn(r);return s&&(i=`${i} > ${h.cyan(s)}`),t&&(i=`${i} > (${h.blue(t)})`),i}function zn(e,t){const n={},r={},i={};e.forEach(l=>{Gn(l).forEach(({exportName:u,exportValue:g,isFromDefaultExport:f})=>{a(u!=="default"),i[u]=i[u]??[],i[u].push({exportValue:g,exportSource:`${l.filePath} > ${f?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t&&Object.entries(t.configValues).forEach(([l,c])=>{const{value:u,definedAtInfo:g}=c;let f=null;g&&(f=g.filePath);const v=mt(l,c,!0);r[l]=r[l]??u,n[l]=n[l]??[],a(n[l].length===0),n[l].push({configValue:u,configDefinedAt:v,configDefinedByFile:f});const m=l;i[m]=i[m]??[],i[m].push({exportValue:u,exportSource:v,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})});const s=Yn(),o={};return Object.entries(i).forEach(([l,c])=>{c.forEach(({exportValue:u,_fileType:g,_isFromDefaultExport:f})=>{o[l]=o[l]??u,g===".page"&&!f&&(l in s||(s[l]=u))})}),a(!("default"in o)),a(!("default"in i)),{config:r,configEntries:n,exports:o,exportsAll:i,pageExports:s}}function Gn(e){const{filePath:t,fileExports:n}=e;a(n),a(ft(t));const r=[];return Object.entries(n).sort(Fn(([i])=>i==="default")).forEach(([i,s])=>{let o=i==="default";if(o)if(vn(t))i="Page";else{d(S(s),`The ${h.cyan("export default")} of ${t} should be an object.`),Object.entries(s).forEach(([l,c])=>{Hn(l,t),r.push({exportName:l,exportValue:c,isFromDefaultExport:o})});return}r.push({exportName:i,exportValue:s,isFromDefaultExport:o})}),r.forEach(({exportName:i,isFromDefaultExport:s})=>{a(!(s&&gt.includes(i)))}),r}function Yn(){return new Proxy({},{get(...e){return N()||R(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function Jn(e){const t=".page.",n=A(e.split(t),0,-1).join(t);return a(!n.includes("\\")),n}function D(e){dt(e)}function bt(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(d(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=Se(e.map(({pageId:r})=>r).filter(r=>q(r)));if(d(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return a(r),r}return null}function q(e,t){return a(!e.includes("\\")),e.includes("/_error")}function Mn(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return a(n),n.isErrorPage}else return q(e)}const Kn=[".page",".page.server",".page.route",".page.client",".css"];function qn(e){if(dt(e),e.endsWith(".css"))return".css";a(ft(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(a(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";a(!1,e)}function wt(e){const t=s=>i.pageId===s||i.isDefaultPageFile&&(He(i.filePath)||Xn(s,i.filePath)),n=qn(e),i={filePath:e,fileType:n,isEnv:s=>{if(a(n!==".page.route"),s==="CLIENT_ONLY")return n===".page.client"||n===".css";if(s==="SERVER_ONLY")return n===".page.server";if(s==="CLIENT_AND_SERVER")return n===".page";a(!1)},isRelevant:t,isDefaultPageFile:be(e),isRendererPageFile:n!==".css"&&be(e)&&He(e),isErrorPageFile:q(e),pageId:Jn(e)};return i}function be(e){return D(e),q(e)?!1:e.includes("/_default")}function He(e){return D(e),e.includes("/renderer/")}function Xn(e,t){D(e),D(t),a(!e.endsWith("/")),a(!t.endsWith("/")),a(be(t));const n=A(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function Qn(e){a(Array.isArray(e)||e===null),a(e!==null),e.forEach(t=>{a(S(t)),a(p(t,"pageId","string")),a(p(t,"routeFilesystem","string")||p(t,"routeFilesystem","null")),a(p(t,"routeFilesystemDefinedBy","string")||p(t,"routeFilesystemDefinedBy","null")),a(p(t,"loadCodeFiles","function")),a(p(t,"isErrorPage","boolean"))})}function Zn(e){a(p(e,"isGeneratedFile")),a(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),a(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),a(p(e,"pageFilesLazy","object")),a(p(e,"pageFilesEager","object")),a(p(e,"pageFilesExportNamesLazy","object")),a(p(e,"pageFilesExportNamesEager","object")),a(p(e.pageFilesLazy,".page")),a(p(e.pageFilesLazy,".page.client")||p(e.pageFilesLazy,".page.server")),a(p(e,"pageFilesList","string[]")),a(p(e,"pageConfigs")),a(p(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;Qn(t);const r={};Z(e.pageFilesLazy).forEach(({filePath:s,pageFile:o,globValue:l})=>{o=r[s]=r[s]??o;const c=l;De(c),o.loadFile=async()=>{"fileExports"in o||(o.fileExports=await c(),Bn(o))}}),Z(e.pageFilesExportNamesLazy).forEach(({filePath:s,pageFile:o,globValue:l})=>{o=r[s]=r[s]??o;const c=l;De(c),o.loadExportNames=async()=>{if(!("exportNames"in o)){const u=await c();d("exportNames"in u,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),a(p(u,"exportNames","string[]"),o.filePath),o.exportNames=u.exportNames}}}),Z(e.pageFilesEager).forEach(({filePath:s,pageFile:o,globValue:l})=>{o=r[s]=r[s]??o;const c=l;a(S(c)),o.fileExports=c}),Z(e.pageFilesExportNamesEager).forEach(({filePath:s,pageFile:o,globValue:l})=>{o=r[s]=r[s]??o;const c=l;a(S(c)),a(p(c,"exportNames","string[]"),o.filePath),o.exportNames=c.exportNames}),e.pageFilesList.forEach(s=>{r[s]=r[s]??wt(s)});const i=Object.values(r);return i.forEach(({filePath:s})=>{a(!s.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function Z(e){const t=[];return Object.entries(e).forEach(([n,r])=>{a(Kn.includes(n)),a(S(r)),Object.entries(r).forEach(([i,s])=>{const o=wt(i);a(o.fileType===n),t.push({filePath:i,pageFile:o,globValue:s})})}),t}function De(e){a(W(e))}const k=C("setPageFiles.ts",{});function er(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=Zn(e);k.pageFilesAll=t,k.pageConfigs=n,k.pageConfigGlobal=r}async function tr(e,t){e?(a(!k.pageFilesGetter),a(t===void 0)):(a(k.pageFilesGetter),a(typeof t=="boolean"),(!k.pageFilesAll||!t)&&await k.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=k;a(n&&r&&i);const s=nr(n,r);return{pageFilesAll:n,allPageIds:s,pageConfigs:r,pageConfigGlobal:i}}function nr(e,t){const n=e.filter(({isDefaultPageFile:s})=>!s).map(({pageId:s})=>s),r=Se(n),i=t.map(s=>s.pageId);return[...r,...i]}function Ce(e,t){return vt(e,t,!0)}function Rt(e,t){return vt(e,t,!1)}function vt(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(m=>m.isRelevant(t)&&m.fileType!==".page.route").sort(rr(n,t)),s=m=>{const w=i.filter(b=>b.pageId===t&&b.isEnv(m?"CLIENT_AND_SERVER":r));d(w.length<=1,`Merge the following files into a single file: ${w.map(b=>b.filePath).join(" ")}`);const O=w[0];return a(O===void 0||!O.isDefaultPageFile),O},o=s(!1),l=s(!0),c=m=>i.filter(w=>w.isRendererPageFile&&w.isEnv(m?"CLIENT_AND_SERVER":r))[0],u=c(!1),g=c(!0),f=i.filter(m=>m.isDefaultPageFile&&!m.isRendererPageFile&&(m.isEnv(r)||m.isEnv("CLIENT_AND_SERVER")));return[o,l,...f,u,g].filter(Tn)}function rr(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,s=0;return(o,l)=>{if(!o.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&o.isDefaultPageFile)return i;{const c=o.isRendererPageFile,u=l.isRendererPageFile;if(!c&&u)return r;if(!u&&c)return i;a(c===u)}{const c=Ue(t,o.filePath),u=Ue(t,l.filePath);if(c<u)return r;if(u<c)return i;a(c===u)}{if(o.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&o.isEnv("CLIENT_AND_SERVER"))return i}return s}}function Ue(e,t){D(e),D(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),s=r.split("/").length,o=i.split("/").length;return s+o}const ir="modulepreload",sr=function(e){return"/"+e},Ve={},ze=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=sr(s),s in Ve)return;Ve[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let g=i.length-1;g>=0;g--){const f=i[g];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":ir,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((g,f)=>{u.addEventListener("load",g),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Fe={},Pt={},or={},ue={},ar=[],St={},lr=!0,ur=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await ze(()=>import("./pages_error.d1d15a93.js"),["assets/entries/pages_error.d1d15a93.js","assets/chunks/chunk-fa9d5433.js","assets/static/LayoutDefault.b77cc984.css"])).default,configValues:{clientRouting:{value:!0,definedAtInfo:{filePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.141/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","clientRouting"]}},hydrationCanBeAborted:{value:!0,definedAtInfo:{filePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.141/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","hydrationCanBeAborted"]}},title:{value:"Bati",definedAtInfo:{filePath:"/pages/+config.h.ts",fileExportPath:["default","title"]}},isClientSideRenderable:{value:!0,definedAtInfo:null},onBeforeRenderEnv:{value:null,definedAtInfo:null}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await ze(()=>import("./pages_index.591f6f6d.js"),["assets/entries/pages_index.591f6f6d.js","assets/chunks/chunk-fa9d5433.js","assets/static/LayoutDefault.b77cc984.css"])).default,configValues:{clientRouting:{value:!0,definedAtInfo:{filePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.141/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","clientRouting"]}},hydrationCanBeAborted:{value:!0,definedAtInfo:{filePath:"/node_modules/.pnpm/vike-solid@0.1.1_solid-js@1.7.11_vite-plugin-ssr@0.4.141/node_modules/vike-solid/dist/+config.js",fileExportPath:["default","hydrationCanBeAborted"]}},title:{value:"Bati",definedAtInfo:{filePath:"/pages/+config.h.ts",fileExportPath:["default","title"]}},isClientSideRenderable:{value:!0,definedAtInfo:null},onBeforeRenderEnv:{value:null,definedAtInfo:null}}}],cr={onBeforeRoute:null},fr=Object.assign({}),dr={...fr};Fe[".page"]=dr;const gr=Object.assign({}),hr={...gr};ue[".page"]=hr;const pr=Object.assign({}),mr={...pr};ue[".page.server"]=mr;const yr=Object.assign({}),br={...yr};Pt[".page.route"]=br;const wr=Object.assign({}),Rr={...wr};Fe[".page.client"]=Rr;const vr=Object.assign({}),Pr={...vr};ue[".page.client"]=Pr;const Sr=Object.assign({}),Er={...Sr};St[".page.server"]=Er;const _r=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:lr,neverLoaded:St,pageConfigGlobal:cr,pageConfigs:ur,pageFilesEager:Pt,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:or,pageFilesLazy:Fe,pageFilesList:ar},Symbol.toStringTag,{value:"Module"}));er(_r);function Et(){a(N())}function $r(){Et(),U()}function Or(){Et()}function Ge(e){const t=e/1e3;if(t<120){const n=Ye(t);return`${n} second${Je(n)}`}{const n=t/60,r=Ye(n);return`${r} minute${Je(r)}`}}function Ye(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Je(e){return e==="1"?"":"s"}const Cr=C("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:r,timeoutWarn:i}=Fr(t);let s,o;const l=new Promise((f,v)=>{s=m=>{c(),f(m)},o=m=>{c(),v(m)}}),c=()=>{clearTimeout(u),clearTimeout(g)},u=setTimeout(()=>{R(!1,`The ${t}() hook defined by ${n} is taking more than ${Ge(i)}`,{onlyOnce:!1})},i),g=setTimeout(()=>{const f=at(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ge(r)}`);o(f)},r);return(async()=>{try{const f=await e();s(f)}catch(f){S(f)&&Cr.userHookErrors.set(f,{hookName:t,hookFilePath:n}),o(f)}})(),l}function Fr(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function X(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=K(t,"/");let s;return e!=null&&e.withoutHash?s=`${i}${n||""}`:s=`${i}${n||""}${r||""}`,a(s.startsWith("/")),s}Or();function Ir(){var r,i,s,o;const e=!!((i=(r=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:r.renderers)!=null&&i.size),t=!!((o=(s=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:s.rendererInterfaces)!=null&&o.size),n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function _t(e,t){const n=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?n(e).length===n(t).length&&n(e).every(s=>_t(e[s],t[s])):e===t}function Tr(e,t){return S(e)&&S(t)&&e.constructor===t.constructor&&_t({...e,stack:null},{...t,stack:null})&&t.message===t.message}function ie(e){window.location.href=e}function Ar(e){return new Promise(t=>setTimeout(t,e))}function kr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}$r();const Me=C("navigationState.ts",{}),xr=X(),$t={markNavigationChange(){Me.navigationChanged=!0},get noNavigationChangeYet(){return!Me.navigationChanged&&this.isFirstUrl(X())},isFirstUrl(e){return e===xr}},jr=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function Ie(e){const t=JSON.parse(e);return Ot(t)}function Ot(e){return typeof e=="string"?Lr(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=Ot(n)}),e)}function Lr(e){for(const{match:t,deserialize:n}of jr)if(t(e))return n(e,Ie);return e}function Nr(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);d(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;a(n);const r=Ie(n);return a(p(r,"_pageId","string")),y(r,{_hasPageContextFromServer:!0}),r}async function Wr(e,t){const r=Rt(e,t).filter(s=>s.fileType===".page.server");return await Promise.all(r.map(async s=>{s.exportNames||(a(s.loadExportNames,t),await s.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:s})=>(a(s),s.includes("onBeforeRender")))}}function Br(e,t){if(!x(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Hr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Dr(e,t){if(a(e.length>0),e.length===1)return e[0];const n=e.slice(0,e.length-1),r=e[e.length-1];return n.join(", ")+` ${t} `+r}N()&&U();function Ct(e,t=!0){a(e.urlOriginal),"urlPathname"in e&&a(fe(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:It,enumerable:t,configurable:!0}),"url"in e&&a(fe(e,"url")),Object.defineProperty(e,"url",{get:Ur,enumerable:!1,configurable:!0}),"urlParsed"in e&&a(fe(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Vr,enumerable:t,configurable:!0})}function Ft(e){let t=e._urlHandler;t||(t=s=>s);const n=e._urlRewrite??e.urlOriginal;a(n&&typeof n=="string");const r=t(n),i=e._baseServer;return a(i.startsWith("/")),K(r,i)}function It(){const{pathname:e}=Ft(this),t=e;return a(t.startsWith("/")),t}function Ur(){return R(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),It.call(this)}function Vr(){const e=Ft(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:s,searchOriginal:o,hash:l,hashOriginal:c}=e,u=N(),g=v=>{R(u,`pageContext.urlParsed.${v} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:s,searchOriginal:o,get hash(){return g("hash"),l},get hashOriginal(){return g("hashOriginal"),c},get hashString(){return R(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),g("hashString"),c},get searchString(){return R(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),o}};return ee(f,"hashString"),ee(f,"searchString"),u||(ee(f,"hash"),ee(f,"hashOriginal")),f}function ee(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function zr(e){a(typeof e.urlOriginal=="string"),a(typeof e.urlPathname=="string"),a(x(e.urlParsed)),a(e.urlPathname===e.urlParsed.pathname)}const Tt="@",we=":";function Gr(e,t="Invalid"){a(t.endsWith("Invalid")||t.endsWith("invalid")),d(e!=="",`${t} Route String ${I(e)} (empty string): set it to ${I("/")} instead`),d(e.startsWith("/")||e==="*",`${t} Route String ${I(e)}: Route Strings should start with a leading slash ${I("/")} (or be ${I("*")})`)}function Re(e,t){Gr(e),a(t.startsWith("/"));const n=e.split("/"),r=t.split("/"),i={};Yr(e),e==="*"&&(e="/*");for(let s=0;s<Math.max(n.length,r.length);s++){const o=n[s],l=r[s];if(o==="*")return i["*"]=r.slice(Math.max(1,s)).join("/"),{routeParams:i};if(o&&re(o)){if(R(!o.startsWith(we),`Outdated Route String ${h.cyan(e)}, use ${h.cyan(e.split(we).join(Tt))} instead.`,{onlyOnce:!0}),!l)return null;i[o.slice(1)]=l}else if((o||"")!==(l||""))return null}return{routeParams:i}}function Yr(e){const t=e.split("*").length-1;d(t<=1,`Invalid Route String ${I(e)}: Route Strings aren't allowed to contain more than one glob ${I("*")} (use a Route Function instead)`),d(t===0||t===1&&e.endsWith("*"),`Invalid Route String ${I(e)}: make sure it ends with ${I("*")} or use a Route Function`)}function z(e){const t=e.split("/").filter(o=>o!==""&&o!=="*");let n=0;for(const o of t){if(re(o))break;n++}const r=t.filter(o=>!re(o)).length,i=t.filter(o=>re(o)).length,s=e.endsWith("*");return{numberOfParameterSegments:i,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:r,isCatchAll:s}}function re(e){return e.startsWith(Tt)||e.startsWith(we)}function Ke(e){const n=Re(e,e);return a(n),Object.keys(n.routeParams).length===0}function I(e){return N()?`'${e}'`:(e===""&&(e="''"),h.cyan(e))}function Jr(e){e.sort(Mr).sort(j(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(j(t=>t.routeType==="STRING"&&Ke(t.routeString)===!1)).sort(j(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(j(t=>t.routeType==="STRING"&&Ke(t.routeString)===!0)).sort(j(t=>t.routeType==="FILESYSTEM")).sort(j(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Mr(e,t){{const n=e.precedence??0,r=t.precedence??0;if(n!==r)return n>r?-1:1}if(!t.routeString||!e.routeString)return 0;{const r=ne(i=>z(i).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>z(i).numberOfStaticSegements)(e.routeString,t.routeString);if(r!==0)return r}{const r=ne(i=>z(i).numberOfParameterSegments)(e.routeString,t.routeString);if(r!==0)return r}{if(z(t.routeString).isCatchAll)return-1;if(z(e.routeString).isCatchAll)return 1}return 0}async function Kr(e,t,n){zr(t);let r=e(t);if(At(r,`The Route Function ${n}`),r=await r,r===!1)return null;if(r===!0&&(r={}),d(x(r),`The Route Function ${n} should return a boolean or a plain JavaScript object (but it's ${h.cyan(`typeof result === ${JSON.stringify(typeof r)}`)} instead)`),"match"in r){const{match:o}=r;if(d(typeof o=="boolean",`The ${h.cyan("match")} value returned by the Route Function ${n} should be a boolean.`),!o)return null}let i=null;"precedence"in r&&(i=r.precedence,d(typeof i=="number",`The ${h.cyan("precedence")} value returned by the Route Function ${n} should be a number.`)),kt(r,`The ${h.cyan("routeParams")} object returned by the Route Function ${n} should`);const s=r.routeParams||{};return d(!("pageContext"in r),`Providing ${h.cyan("pageContext")} in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext`),a(x(s)),Object.keys(r).forEach(o=>{d(o==="match"||o==="routeParams"||o==="precedence",`The Route Function ${n} returned an object with an unknown property ${h.cyan(o)} (the known properties are ${h.cyan("match")}, ${h.cyan("routeParams")}, and ${h.cyan("precedence")})`)}),{precedence:i,routeParams:s}}function At(e,t){R(!An(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function qe(){const e=h.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");R(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function kt(e,t){a(t.endsWith(" should")),p(e,"routeParams")&&(a(t.endsWith(" should")),d(x(e.routeParams),`${t} be a plain JavaScript object.`),d(Hr(e.routeParams),`${t} only hold string values.`))}function xt(e,{hookName:t,hookFilePath:n}){if(e==null)return;a(!t.endsWith(")"));const r=`The ${h.cyan("pageContext")} object provided by the ${t}() hook defined by ${n}`;d(S(e),`${r} should be an object (but it's ${h.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),d(!("_objectCreatedByVitePluginSsr"in e),`${r} shouldn't be the whole ${h.cyan("pageContext")} object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),R(!("_pageId"in e),`${r} sets ${h.cyan("pageContext._pageId")} which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),d(!("is404"in e),`${r} sets ${h.cyan("pageContext.is404")} which is forbidden, use ${h.cyan("throw render()")} instead, see https://vite-plugin-ssr.com/render`)}async function qr(e,t){let n=e.onBeforeRoute(t);At(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(d(n==null||Br(n,["pageContext"])&&p(n,"pageContext"),`${r} should return ${h.cyan("null")}, ${h.cyan("undefined")}, or a plain JavaScript object ${h.cyan("{ pageContext: { /* ... */ } }")}`),n==null)return null;if(d(p(n,"pageContext","object"),`${r} returned ${h.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),p(n.pageContext,"_pageId")&&!p(n.pageContext,"_pageId","null")){const s=`${r} returned ${h.cyan("{ pageContext: { _pageId } }")} but ${h.cyan("_pageId")} should be`;d(p(n.pageContext,"_pageId","string"),`${s} a string or null`),d(t._allPageIds.includes(n.pageContext._pageId),`${s} ${Dr(t._allPageIds.map(o=>h.cyan(o)),"or")}`)}p(n.pageContext,"routeParams")&&kt(n.pageContext,`${r} returned ${h.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const i={};return p(n.pageContext,"url")&&(R(!1,`${r} returned ${h.cyan("{ pageContext: { url } }")} but ${h.cyan("pageContext.url")} has been renamed to ${h.cyan("pageContext.urlOriginal")}. Return ${h.cyan("{ pageContext: { urlOriginal } }")} instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),p(n.pageContext,"urlOriginal")&&(Pn(n.pageContext.urlOriginal,`${r} returned ${h.cyan("{ pageContext: { urlOriginal } }")} but ${h.cyan("urlOriginal")}`),y(i,{_urlOriginalPristine:t.urlOriginal})),xt(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),y(i,n.pageContext),i}var te;function Xe(...e){var t;te||(te=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vps:routing")),te&&te(...e)}N()&&U();async function jt(e){Ct(e),Xe("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const o=await qr(e._onBeforeRouteHook,e);if(o){if(y(t,o),p(t,"_pageId","string")||p(t,"_pageId","null"))return p(t,"routeParams")?a(p(t,"routeParams","object")):y(t,{routeParams:{}}),y(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};y(e,t)}}y(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;a(n.length>=0),d(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),d(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:r}=e;a(r.startsWith("/"));const i=[];await Promise.all(e._pageRoutes.map(async o=>{const{pageId:l,routeType:c}=o;if(o.routeType==="FILESYSTEM"){const{routeString:u}=o,g=Re(u,r);if(g){const{routeParams:f}=g;i.push({pageId:l,routeParams:f,routeString:u,routeType:c})}return}if(o.routeType==="STRING"){const{routeString:u}=o,g=Re(u,r);if(g){const{routeParams:f}=g;a(c==="STRING"),i.push({pageId:l,routeString:u,routeParams:f,routeType:c})}return}if(o.routeType==="FUNCTION"){const{routeFunction:u,routeDefinedAt:g}=o,f=await Kr(u,e,g);if(f){const{routeParams:v,precedence:m}=f;i.push({pageId:l,precedence:m,routeParams:v,routeType:c})}return}a(!1)})),Jr(i);const s=i[0];if(Xe(`Route matches for URL ${h.cyan(r)} (in precedence order):`,i),y(t,{_routeMatches:i}),!s)return y(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:o}=s;a(x(o)),y(t,{_pageId:s.pageId,routeParams:s.routeParams})}return{pageContextAddendum:t}}function Y(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(a(r.exportValue===n),n===null)return null;const i=r.exportSource;return Xr(n,{hookName:t,hookFilePath:i}),{hookFn:n,hookName:t,hookFilePath:i}}function de(e,t){Y(e,t)}function Xr(e,{hookName:t,hookFilePath:n}){a(t&&n),a(!t.endsWith(")")),d(W(e),`hook ${t}() defined by ${n} should be a function`)}function Qr(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>In(n,r)).forEach(([n,r])=>{e[n]=r})}function Zr(e){ei(e),ti(e)}function ei(e){Mn(e._pageId,e._pageConfigs)&&a(p(e,"is404","boolean"))}function ti(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!S(t)){R(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const ni="not-serializable",se=C("getPageContextProxyForUser.ts",{});function ri(e){return a([!0,!1].includes(e._hasPageContextFromServer)),a([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],i=JSON.stringify(n);return d(r!==ni,`pageContext[${i}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),ii(e,n,`pageContext[${i}] isn't available on the client-side because ${i} is missing in passToClient, see https://vite-plugin-ssr.com/passToClient`),r}})}function ii(e,t,n){se.prev===t||se.prev==="__v_raw"||(ai(t),!(t in e)&&(oi(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&d(!1,n)))}const si=["then","toJSON"];function oi(e){return!!(si.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function ai(e){se.prev=e,window.setTimeout(()=>{se.prev=void 0},0)}function Te(e,t){if(t){const i=e;a([!0,!1].includes(i.isHydration)),a([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;a(i.isHydration===!0),a(i.isBackwardNavigation===null)}a("config"in e),a("configEntries"in e),a("exports"in e),a("exportsAll"in e),a("pageExports"in e),a(S(e.pageExports));const n=e.exports.Page;y(e,{Page:n}),li(e),Qr(e);const r=ri(e);return Zr(e),r}function li(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function Lt(e,t){const n=e.filter(i=>i.pageId===t);return a(n.length<=1),n[0]??null}async function ui(e,t){if(e.isLoaded&&!t)return e;const n=await e.loadCodeFiles(),r=(i,s,o,l)=>{e.configValues[i]={value:s,definedAtInfo:{filePath:o,fileExportPath:[l]}},ci(s,i,o)};return n.forEach(i=>{if(i.isPlusFile){const{codeFileExports:s,codeFilePath:o}=i;i.configName!=="client"&&jn(s,o),Object.entries(s).forEach(([l,c])=>{const u=l!=="default",g=u?l:i.configName;u&&g in e.configValues||r(g,c,o,l)})}else{const{configName:s,codeFilePath:o,codeFileExportValue:l,codeFileExportName:c}=i;r(s,l,o,c)}}),y(e,{isLoaded:!0}),e}function ci(e,t,n){a(!n.includes("+config.")),d(e!==null,`Set ${h.cyan(t)} to ${h.cyan("null")} in a +config.h.js file instead of ${n}`)}const Nt="__whileFetchingAssets";async function oe(e,t,n){const r=Ce(e,n),i=Lt(t,n);let s;const o=!1;try{s=(await Promise.all([i&&ui(i,o),...r.map(w=>{var O;return(O=w.loadFile)==null?void 0:O.call(w)})]))[0]}catch(m){throw fi(m)&&Object.assign(m,{[Nt]:!0}),m}const{config:l,configEntries:c,exports:u,exportsAll:g,pageExports:f}=zn(r,s);return{config:l,configEntries:c,exports:u,exportsAll:g,pageExports:f,_pageFilesLoaded:r}}function Ae(e){return e?e[Nt]===!0:!1}function fi(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Qe=["urlPathname","urlParsed"],di=["Page","pageExports","exports"];function Wt(e){[...di,...Qe].forEach(n=>{n in e&&(Qe.includes(n)?(a(n.startsWith("url")),R(!1,`pageContext.${n} is already available in the browser when using Client Routing; adding '${n}' to passToClient has no effect`,{onlyOnce:!0})):R(!1,`pageContext.${n} is a built-in that cannot be overriden; adding '${n}' to passToClient has no effect`,{onlyOnce:!0}),delete e[n])})}const gi="/";function hi(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:s}=K(e,gi);e.startsWith("/")&&a(e===`${r}${i||""}${s||""}`,{url:e});const o=r.endsWith("/");let l;return n&&r!=="/"?(o?l=A(r,0,-1):l=r,a(!l.endsWith("/"),{url:e}),a(l!=="")):l=r+(o?"":"/")+"index",a(l),l=l+t,`${l}${i||""}${s||""}`}const pi=".pageContext.json",mi=!1;function yi(e){return hi(e,pi,mi)}function bi(e,t,n){a(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const s of i)t.includes(s)||r.push(s);d(r.length===0,[n,"returned an object with following unknown keys:",Be(r)+".","Only following keys are allowed:",Be(t)+"."].join(" "))}function wi(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;d(x(e),`${n} should return a plain JavaScript object, ${h.cyan("undefined")}, or ${h.cyan("null")}`),bi(e,["pageContext"],n),e.pageContext&&xt(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}async function Ri(e,t){let n;if(e._pageFilesAll.length>0?(a(e._pageConfigs.length===0),n=vi(e._pageId,e._pageFilesAll)):n=Y(e,"guard"),!n)return;const r=n.hookFn;let i=e;const s=t(e);s&&(i=s);const o=await ce(()=>r(i),"guard",n.hookFilePath);d(o===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function vi(e,t){const n=t.find(l=>l.pageId===e&&l.fileType===".page.route");if(!n)return null;const{filePath:r,fileExports:i}=n;a(i);const s=i.guard;if(!s)return null;const o=r;return d(W(s),`guard() defined by ${o} should be a function`),{hookFn:s,hookName:"guard",hookFilePath:o}}function Pi(e){const t=new Error("AbortRender");return y(t,{_pageContextAbort:e,[Bt]:!0}),t}const Bt="_isAbortError";function ge(e){return typeof e=="object"&&e!==null&&Bt in e}function Si(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(a(p(e,"_abortCall","string")),!0):!1}function Ei(e,t,n){if(t)return;const r=n._urlRewrite??n.urlOriginal;a(r);const i=e._pageContextAbort._abortCall;_e(!1,`${h.cyan(i)} intercepted while rendering ${h.cyan(r)}`,{onlyOnce:!1})}function _i(e){$i(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function $i(e){const t=[];e.forEach(n=>{const r=n._urlRewrite;{const i=t.indexOf(r);if(i!==-1){const s=[...t.slice(i),r].map(o=>`render('${o}')`).join(" => ");d(!1,`Infinite loop of render() calls: ${s}`)}}t.push(r)})}function Oi(e,t){const n=[e>0&&h.cyan("throw render('/some-url')"),t>0&&h.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");d(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const Ht=C("router/getPageContext.ts",{});async function Ci(e){if(e._isFirstRenderAttempt&&$t.isFirstUrl(e.urlOriginal)){a(p(e,"_isFirstRenderAttempt","true"));const t=await Fi(e);return Ze(t),t}else{a(p(e,"_isFirstRenderAttempt","false"));const t=await Ti(e);return Ze(t),t}}async function Fi(e){const t=Nr();Wt(t),y(t,{isHydration:!0,_hasPageContextFromClient:!1}),y(t,await oe(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await xi(n)){const r=await Ut(n);y(t,r)}}return t}async function Ii(e){const t=bt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return y(n,await Dt({...e,...n},!0)),n}async function Ti(e){const t={isHydration:!1};return y(t,await ji(e)),y(t,await Dt({...e,...t},!1)),t}async function Dt(e,t){let n={};if(y(n,await oe(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await Ai({...e,...n})){const r=await Wi(e);if(!r._isError)y(n,r);else{const i=bt(e._pageFilesAll,e._pageConfigs);a(i),n={},y(n,{isHydration:!1,_pageId:i}),y(n,await oe(e._pageFilesAll,e._pageConfigs,n._pageId)),a(p(r,"is404","boolean")),a(p(r,"pageProps","object")),a(p(r.pageProps,"is404","boolean")),a(!("serverSideError"in r)),y(n,r)}}else y(n,{_hasPageContextFromServer:!1}),t||await Ri({_hasPageContextFromClient:!1,...e,...n},r=>Te(r,!0));{const r=await Ut({...e,...n});y(n,r)}return n}async function Ut(e){const t=Y(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,r={_hasPageContextFromClient:!0},i=Te({...e,...r},!0),s=await ce(()=>n(i),"onBeforeRender",t.hookFilePath);wi(s,t.hookFilePath);const o=s==null?void 0:s.pageContext;return y(r,o),r}async function Ai(e){return!!Ht.pageContextInitHasClientData||await ki(e)}function Ze(e){e._pageContextInitHasClientData&&(Ht.pageContextInitHasClientData=!0)}async function ki(e){var t;if(e._pageConfigs.length>0){const n=pt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:n}=await Wr(e._pageFilesAll,e._pageId);return n}}async function xi(e){var t;if(e._pageConfigs.length>0){const n=pt(e._pageId,e._pageConfigs);return((t=H(n,"onBeforeRenderEnv"))==null?void 0:t.value)==="client-only"}else return!1}async function ji(e){const n=(await jt(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw Li(r),r}return a(p(n,"_pageId","string")),n}function Li(e){y(e,{_is404:!0})}function Ni(e){return S(e)&&e._is404===!0}async function Wi(e){const t=e._urlRewrite??e._urlOriginalPristine??e.urlOriginal,n=yi(t),r=await fetch(n);{const o=r.headers.get("content-type"),l="application/json",c=o&&o.includes(l);if(!c&&r.status===404)throw ie(e.urlOriginal),Hi();d(c,`Wrong Content-Type for ${n}: it should be ${l} but it's ${o} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vite-plugin-ssr.com/renderPage`)}const i=await r.text(),s=Ie(i);if(a(S(s)),"serverSideError"in s)throw at("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Si(s))throw Pi(s);return a(p(s,"_pageId","string")),Wt(s),y(s,{_hasPageContextFromServer:!0}),s}function Bi(e){return S(e)&&!!e._alreadyServerSideRouted}function Hi(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Di(e,t){const r=t.filter(({filesystemRoot:s})=>e.startsWith(s)).sort(ne(({filesystemRoot:s})=>s.length))[0];let i;if(r){const{filesystemRoot:s,urlRoot:o}=r,l={pageId:e,filesystemRoot:s,urlRoot:o};a(o.startsWith("/")&&e.startsWith("/")&&s.startsWith("/"),l),a(e.startsWith(s),l),s!=="/"?(a(!s.endsWith("/"),l),i=A(e,s.length,0)):i=e,a(i.startsWith("/"),l),i=o+(o.endsWith("/")?"":"/")+A(i,1,0)}else i=e;return a(i.startsWith("/")),i=i.split("/").filter(s=>s!=="pages"&&s!=="src"&&s!=="index").join("/"),a(!i.includes(".page.")),a(!i.endsWith(".")),i.endsWith("/index")&&(i=A(i,0,-6)),i===""&&(i="/"),a(i.startsWith("/")),a(!i.endsWith("/")||i==="/"),i}async function Ui(e,t,n,r){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var c;return(c=l.loadFile)==null?void 0:c.call(l)}));const{onBeforeRouteHook:i,filesystemRoots:s}=zi(e,t,n);return{pageRoutes:Vi(s,e,t,r),onBeforeRouteHook:i}}function Vi(e,t,n,r){const i=[];let s=[...r];if(n.length>0){a(e===null);const o=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const c=l.pageId;s=Yi(s,c);let u=null;{const g="route",f=H(l,g);if(f){const v=Un(l,g),m=f.value,w=yt(v);typeof m=="string"?u={pageId:c,comesFromV1PageConfig:o,routeString:m,routeDefinedAt:w,routeType:"STRING"}:(a(W(m)),H(l,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&qe(),u={pageId:c,comesFromV1PageConfig:o,routeFunction:m,routeDefinedAt:w,routeType:"FUNCTION"})}}if(!u){const{routeFilesystem:g,routeFilesystemDefinedBy:f}=l;a(g),a(g.startsWith("/")),a(f),u={pageId:c,routeFilesystemDefinedBy:f,comesFromV1PageConfig:o,routeString:g,routeDefinedAt:null,routeType:"FILESYSTEM"}}a(u),i.push(u)})}if(n.length===0){a(e);const o=!1;s.filter(l=>!q(l)).forEach(l=>{const c=t.find(u=>u.pageId===l&&u.fileType===".page.route");if(!c||!("default"in c.fileExports)){const u=Di(l,e);a(u.startsWith("/")),a(!u.endsWith("/")||u==="/"),i.push({pageId:l,comesFromV1PageConfig:o,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:g}=c;if(a(g.default),p(g,"default","string")){const f=g.default;d(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:l,comesFromV1PageConfig:o,routeString:f,routeDefinedAt:u,routeType:"STRING"});return}if(p(g,"default","function")){const f=g.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in g&&qe(),i.push({pageId:l,comesFromV1PageConfig:o,routeFunction:f,routeDefinedAt:u,routeType:"FUNCTION"});return}d(!1,`The default export of ${u} should be a string or a function.`)}})}return i}function zi(e,t,n){if(t.length>0){if(n.onBeforeRoute){const s=n.onBeforeRoute.value;if(s){a(!n.onBeforeRoute.isComputed);const o=n.onBeforeRoute.definedAtInfo.filePath;return a(o),d(W(s),`The hook onBeforeRoute() defined by ${o} should be a function.`),{onBeforeRouteHook:{hookFilePath:o,onBeforeRoute:s},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(s=>s.fileType===".page.route"&&s.isDefaultPageFile).forEach(({filePath:s,fileExports:o})=>{if(a(o),"onBeforeRoute"in o){d(p(o,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${s} should be a function.`);const{onBeforeRoute:l}=o;r={hookFilePath:`${s} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in o&&(d(p(o,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} should be a string.`),d(p(o,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} is \`'${o.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:Gi(s),urlRoot:o.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function Gi(e){a(e.startsWith("/")),a(!e.endsWith("/"));const t=e.split("/"),n=A(t,0,-1).join("/")||"/";return a(n.startsWith("/")),a(!n.endsWith("/")||n==="/"),n}function Yi(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),a(e.length===n-1),e}function Vt(){const e="/";return a(Ji(e)),e}function Ji(e){return e.startsWith("/")}const he=C("createPageContext.ts",{});async function zt(e){he.pageFilesData||(he.pageFilesData=await tr(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=he.pageFilesData,{pageRoutes:s,onBeforeRouteHook:o}=await Ui(t,r,i,n),l=Vt();a(Oe(l));const u={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_urlRewrite:null,_baseServer:l,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n,_pageRoutes:s,_onBeforeRouteHook:o};return y(u,e),Ct(u),u}async function Gt(e){const t=await zt({urlOriginal:e}),n=await jt(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const s=n.pageContextAddendum._pageId;return s?{pageId:s,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function G(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(a(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Mi({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:s()};function r(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(i(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&G(l).includes("render")))}function i(){const o=e.some(l=>G(l).includes("render"));d(o,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,c)=>` (${c+1}): ${l.filePath}`)].join(`
`)].join(" "))}function s(){return e.some(l=>G(l).includes("clientRouting"))}}function Ki({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const s=t.filter(l=>!e.includes(l)),o=[];if(o.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),o.push(...s.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(l=>l.filePath);else{const l=qi(r);o.push({id:l,onlyAssets:!1,eagerlyImported:!1}),i=[l]}return{clientEntries:i,clientDependencies:o}}function qi(e){return e?"@@vite-plugin-ssr/dist/esm/client/client-routing-runtime/entry.js":"@@vite-plugin-ssr/dist/esm/client/server-routing-runtime/entry.js"}function Xi(e,t){let n=Ce(e,t);const r=Rt(e,t),{isHtmlOnly:i,isClientRouting:s}=Mi({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(c=>c.isEnv("CLIENT_ONLY")&&!G(c).includes("render")),n=Zi(n));const{clientEntries:o,clientDependencies:l}=Ki({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:s});return{isHtmlOnly:i,isClientRouting:s,clientEntries:o,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function Qi(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=Ce(e,t);await Promise.all(r.map(async i=>{var s;a(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((s=i.loadExportNames)==null?void 0:s.call(i))}))}function Zi(e){const t=[];for(const n of e)if(t.push(n),G(n).includes("overrideDefaultPages"))break;return t}function es(e,t,n){var r,i;if(e){const s=((r=H(e,"clientRouting","boolean"))==null?void 0:r.value)??!1;return{isClientSideRenderable:((i=H(e,"isClientSideRenderable","boolean"))==null?void 0:i.value)??!1,isClientRouting:s}}else{const{isHtmlOnly:s,isClientRouting:o}=Xi(t,n);return{isClientSideRenderable:!s,isClientRouting:o}}}async function Yt(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Gt(e);if(!t)return!1;await Qi(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=Lt(r,t),{isClientSideRenderable:s,isClientRouting:o}=es(i,n,t);return s&&o}function Jt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Mt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Jt(t)||ns(e)||rs(t)||!is(t)||!$e(t)||!ts(e))}function ts(e){if($s()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function ns(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function rs(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function is(e){const t=Vt();a(Oe(t));const{hasBaseServer:n}=K(e,t);return n}function ss(e,t){let n=os(e,t);return n==="viewport"&&!e._isProduction&&(_e(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function os(e,t){{const n=as(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&d(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";d(x(n),r);const i=Object.keys(n);d(i.length===1&&i[0]==="when",r);const{when:s}=n;if(s==="HOVER"||s==="VIEWPORT"){const o=s.toLowerCase();return R(!1,`prefetchStaticAssets value \`{ when: '${s}' }\` is outdated: set prefetchStaticAssets to '${o}' instead`,{onlyOnce:!0}),o}d(!1,r)}return"hover"}function as(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(d(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;d(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(a(!t),R(!1,r,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";d(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}a(!1)}const Kt=new Map;function qt(e){const t=Qt(e);return Kt.has(t)}function Xt(e){const t=Qt(e);Kt.set(t,!0)}function Qt(e){return K(e,"/").pathname}U();const et=new Map;async function ls(e){if(d(ut(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),d(!Jt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),qt(e))return;Xt(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Gt(e);if(t)try{await oe(n,r,t)}catch(i){if(Ae(i))ve(i,!0);else throw i}}function us(e){Xt(e.urlPathname),[...document.getElementsByTagName("A")].forEach(n=>{if(et.has(n))return;et.set(n,!0);const r=n.getAttribute("href");if(Mt(n)||(a(r),qt(r)))return;const{prefetchStaticAssets:i}=ss(e,n);if(i&&(i==="hover"&&(n.addEventListener("mouseover",()=>{pe(r)}),n.addEventListener("touchstart",()=>{pe(r)},{passive:!0})),i==="viewport")){const s=new IntersectionObserver(o=>{o.forEach(l=>{l.isIntersecting&&(pe(r),s.disconnect())})});s.observe(n)}})}async function pe(e){try{if(!await Yt(e))return}catch{return}await ls(e)}async function cs(e,t){const n=Te(e,t);let r=null,i;r=Y(e,"render"),i="render";{const l=Y(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=fs(e);if(e._pageConfigs.length>0)d(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const c=e._pageFilesLoaded.filter(g=>g.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+l:u="One of the following files should export a `render()` hook: "+c.map(g=>g.filePath).join(" "),d(!1,u)}}a(r);const s=r.hookFn;a(i);const o=await ce(()=>s(n),i,r.hookFilePath);d(o===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function fs(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}function Zt(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=tn()),"scrollPosition"in e||(t=!0,e.scrollPosition=en()),nn(e),t&&xe(e)}function ke(){const e=window.history.state||{};return nn(e),e}function en(){return{x:window.scrollX,y:window.scrollY}}function tn(){return new Date().getTime()}function tt(){const e=en(),t=ke();xe({...t,scrollPosition:e})}function ds(e,t){if(t)xe(ke(),e);else{const n=tn();gs({timestamp:n,scrollPosition:null},e)}}function nn(e){if(a(S(e)),"timestamp"in e){const{timestamp:t}=e;a(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&a(p(t,"x","number")&&p(t,"y","number"))}}function xe(e,t){window.history.replaceState(e,"",t??null)}function gs(e,t){window.history.pushState(e,"",t)}U();const hs=C("navigate.ts",{});function ps(e){hs.navigate=e}const _=C("useClientRouter.ts",{previousState:ae()});Ss();Zt();function ve(e,t){a(Ae(e)),_.clientRoutingIsDisabled=!0,t&&console.log(e),_e(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function ms(){vs(),ys((i,{keepScrollPosition:s})=>{r({scrollTarget:s?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),bs((i,s)=>{r({scrollTarget:i,isBackwardNavigation:s})}),ps(async(i,{keepScrollPosition:s=!1,overwriteLastHistoryEntry:o=!1}={})=>{await r({scrollTarget:s?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,overwriteLastHistoryEntry:o,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,urlOriginal:s=X(),overwriteLastHistoryEntry:o=!1,isBackwardNavigation:l,checkClientSideRenderable:c,pageContextsFromRewrite:u=[],redirectCount:g=0}){var Ne;if(Oi(u.length,g),_.clientRoutingIsDisabled){ie(s);return}const f=_i(u);if(c){const $=f._urlRewrite??s;let E;try{E=await Yt($)}catch(B){if(ge(B))E=!0;else throw B}if(!E){ie(s);return}}const v={urlOriginal:s,isBackwardNavigation:l,...f},m=++e;a(m>=1),m>1&&n===!1&&((Ne=_.onPageTransitionStart)==null||Ne.call(_,v),n=!0);let w=!1;const O=()=>m===1&&w===!1?!1:m!==e,b=await zt(v);if(O())return;const V=m===1;y(b,{_isFirstRenderAttempt:V});let Q,F,Le=!1;try{Q=await Ci(b)}catch($){Le=!0,F=$}if(Le){if(ge(F)||console.error(F),rt(F,b))return;if(ge(F)){const $=F;Ei(F,b._isProduction,b);const E=$._pageContextAbort;if(E._urlRewrite){await r({scrollTarget:i,urlOriginal:s,overwriteLastHistoryEntry:o,isBackwardNavigation:l,pageContextsFromRewrite:[...u,E],redirectCount:g});return}if(E._urlRedirect){const B=E._urlRedirect.url;if(B.startsWith("http")){window.location.href=B;return}else await r({scrollTarget:"scroll-to-top-or-hash",urlOriginal:B,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:u,redirectCount:g++});return}a(E.abortStatusCode),y(b,E),E.abortStatusCode===404&&y(b,{is404:!0})}else y(b,{is404:Ni(F)});try{Q=await Ii(b)}catch($){if(rt($,b)||(V||setTimeout(()=>{window.location.pathname=s},0),Tr(F,$)))return;throw $}}if(a(Q),y(b,Q),de(b,"onPageTransitionStart"),_.onPageTransitionStart=b.exports.onPageTransitionStart,b.exports.hydrationCanBeAborted?w=!0:R(!Ir(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!O()&&(t&&await t,!O())){if(ws(s,o),$t.markNavigationChange(),a(t===void 0),t=(async()=>{await cs(b,!0),us(b)})(),await t,t=void 0,b._isFirstRenderAttempt){de(b,"onHydrationEnd");const{onHydrationEnd:$}=b.exports;if($){const E=b.exportsAll.onHydrationEnd[0].exportSource;a(E),await ce(()=>$(b),"onHydrationEnd",E)}}else m===e&&(b.exports.onPageTransitionEnd&&(de(b,"onPageTransitionEnd"),b.exports.onPageTransitionEnd(b)),n=!1);rn(i),je(),_.initialRenderIsDone=!0}}}function ys(e){document.addEventListener("click",t);return;function t(i){if(!n(i))return;const s=r(i.target);if(!s)return;const o=s.getAttribute("href");if(Mt(s))return;a(o),i.preventDefault();const l=![null,"false"].includes(s.getAttribute("keep-scroll-position"));e(o,{keepScrollPosition:l})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:s}=i;if(!s)return null;i=s}return i}}function bs(e){window.addEventListener("popstate",()=>{const t=ae(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===_.previousState.urlWithoutHash,i=!t.historyState.timestamp||!_.previousState.historyState.timestamp?null:t.historyState.timestamp<_.previousState.historyState.timestamp;_.previousState=t,r?window.history.state===null?(Zt(),_.previousState=ae()):rn(n):e(n,i)})}function ws(e,t){X()!==e&&(je(),ds(e,t),_.previousState=ae())}function ae(){return{urlWithoutHash:X({withoutHash:!0}),historyState:ke()}}function rn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Ps();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else a("x"in e&&"y"in e),t=e;Rs(t)}function Rs(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await Ar(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function vs(){window.addEventListener("scroll",kr(tt,Math.ceil(1e3/3)),{passive:!0}),sn(tt)}function Ps(){let{hash:e}=window.location;return e===""?null:(a(e.startsWith("#")),e=e.slice(1),e)}function Ss(){nt(),sn(nt),Es(()=>_.initialRenderIsDone&&je())}function je(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function nt(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function sn(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Es(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function rt(e,t){return!!(Bi(e)||_s(e,t))}function _s(e,t){if(!Ae(e))return!1;if(t._isFirstRenderAttempt)throw ve(e,!1),e;return ve(e,!0),ie(t.urlOriginal),!0}function $s(){return!!window._disableAutomaticLinkInterception}U();const Os=!0;fn(Os);ms();
