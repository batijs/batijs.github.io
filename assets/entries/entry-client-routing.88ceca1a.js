function Vt(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function pe(e,t){let n;{var i=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=i}return Vt()&&(n.stack=Ut(n.stack,t)),n}function Ut(e,t){if(!e)return e;const n=Gt(e);let i=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:i<t&&zt(o)?(i++,!1):!0).join(`
`)}function zt(e){return e.startsWith("    at ")}function Gt(e){return e.split(/\r?\n/)}function w(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function P(e){return typeof e=="object"&&e!==null}function me(e){return Array.from(new Set(e))}const O=w("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),Ye="Make sure your client-side code doesn't include(/bundle)",Mt=`The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ${Ye} both for a given page.`,Je=`Two vite-plugin-ssr client runtime instances are being loaded. ${Ye} vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)`;function Ke(){{const e=me(O.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;Kt(!1,t)}}O.checkSingleInstance&&O.instances.length>1&&ae(!1,Je,{onlyOnce:!0,showStackTrace:!0})}function Yt(e){ae(O.isClientRouting!==!1,Mt,{onlyOnce:!0,showStackTrace:!0}),ae(O.isClientRouting===void 0,Je,{onlyOnce:!0,showStackTrace:!0}),O.isClientRouting=!0,e&&(O.checkSingleInstance=!0),Ke()}function Jt(e){O.instances.push(e),Ke()}function Kt(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function ae(e,t,{onlyOnce:n,showStackTrace:i}){if(e)return;const r=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=O,l=n===!0?r:n;if(o.has(l))return;o.add(l)}console.warn(i?new Error(r):r)}const qt="0.4.133",$={projectName:"vite-plugin-ssr",projectVersion:qt,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};Jt($.projectVersion);const E=w("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},colorer:e=>e,showStackTraceList:new WeakSet}),Xt=`[${$.npmPackageName}]`,Qt=`[${$.npmPackageName}@${$.projectVersion}]`,ye=2;function s(e,t){var n;if(e)return;const i=(()=>{if(!t)return null;const l=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${$.projectName} maintainers; you can ignore this): ${l}`})();let r=[`You stumbled upon a bug in ${$.projectName}'s source code.`,`Go to ${$.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,i].filter(Boolean).join(" ");r=V(r,"Bug"),r=U(r,!0);const o=pe(r,ye);throw(n=E.onBeforeLog)===null||n===void 0||n.call(E),o}function g(e,t,{showStackTrace:n}={}){var i;if(e)return;t=V(t,"Wrong Usage"),t=U(t);const r=pe(t,ye);throw n&&E.showStackTraceList.add(r),(i=E.onBeforeLog)===null||i===void 0||i.call(E),r}function qe(e){return e=V(e,"Error"),e=U(e),pe(e,ye)}function R(e,t,{onlyOnce:n=!0,showStackTrace:i}={}){var r;if(!e){if(t=V(t,"Warning"),t=U(t),n){const{alreadyLogged:o}=E,l=n===!0?t:n;if(o.has(l))return;o.add(l)}if((r=E.onBeforeLog)===null||r===void 0||r.call(E),i){const o=new Error(t);E.showStackTraceList.add(o),E.logger(o,"warn")}else E.logger(t,"warn")}}function Xe(e,t,{onlyOnce:n}){var i;if(!e){if(t=V(t,"Info"),t=U(t),n){const{alreadyLogged:r}=E,o=t;if(r.has(o))return;r.add(o)}(i=E.onBeforeLog)===null||i===void 0||i.call(E),E.logger(t,"info")}}function V(e,t){let n=`[${t}]`;const i=t==="Info"?"blue":t==="Warning"?"yellow":"red";n=E.colorer(n,i);const r=e.startsWith("[")?"":" ";return`${n}${r}${e}`}function U(e,t=!1){return`${t?Qt:Xt}${e}`}function D(){return typeof window<"u"&&typeof window.scrollY=="number"}const Qe=w("utils/assertRouterType.ts",{});function L(){Zt(Ze()),Qe.isClientRouting=!0}function Ze(){return Qe.isClientRouting!==!1}function Zt(e){g(D(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),R(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const en=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],et=["vue","svelte","marko","md","mdx"],tn=[...en,...et];function tt(e){const t=tn.some(n=>e.endsWith("."+n));return s(!nn(e)||t),t}function nn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function rn(e){return et.some(t=>e.endsWith("."+t))}function T(e,t,n){return typeof e=="string"?Oe(e.split(""),t,n).join(""):Oe(e,t,n)}function Oe(e,t,n){const i=[];let r=t>=0?t:e.length+t;s(r>=0&&r<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(r===o||(r===e.length&&(r=0),r===o));){const l=e[r];s(l!==void 0),i.push(l),r++}return i}function ve(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function on(e,t){s(t.includes(" but ")),g(typeof e=="string",`${t} should be a string`),!ve(e)&&(!e.startsWith("/")&&!e.includes(":")?g(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):g(!1,`${t} isn't a valid URL`))}function z(e,t){s(ve(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...i]=e.split("#");s(n!==void 0);const r=["",...i].join("#")||null;s(r===null||r.startsWith("#"));const o=r===null?"":ue(r.slice(1)),[l,...a]=n.split("?");s(l!==void 0);const c=["",...a].join("?")||null;s(c===null||c.startsWith("?"),{url:e,searchOriginal:c});const u={},h={};Array.from(new URLSearchParams(c||"")).forEach(([_,b])=>{u[_]=b,h[_]=[...h[_]||[],b]});const{origin:f,pathnameResolved:m}=ln(l,t);s(f===null||f===ue(f),{origin:f}),s(m.startsWith("/"),{url:e,pathnameResolved:m}),s(f===null||e.startsWith(f),{url:e,origin:f});const y=l.slice((f||"").length);{const _=`${f||""}${y}${c||""}${r||""}`;s(e===_,{url:e,urlRecreated:_})}let{pathname:p,hasBaseServer:F}=un(m,t);return p=sn(p),s(p.startsWith("/")),{origin:f,pathname:p,pathnameOriginal:y,hasBaseServer:F,search:u,searchAll:h,searchOriginal:c,hash:o,hashOriginal:r}}function ue(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function sn(e){return e.split("/").map(t=>ue(t).split("/").join("%2F")).join("/")}function ln(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let i=!1;const r="tauri://",o="http://";e.startsWith(r)&&(i=!0,e=o+e.slice(r.length));let l,a;try{const c=new URL(e);l=c.origin,a=c.pathname}catch{l=null;let u=typeof window<"u"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);u=u||"http://fake.example.org"+t,a=new URL(e,u).pathname}return a||(a="/"),i&&(s(l),s(l.startsWith(o)),l=r+l.slice(o.length)),s(a.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:a}),s(a===a.split("?")[0].split("#")[0]),{origin:l,pathnameResolved:a}}function an(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function un(e,t){an(e),s(_e(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let i=t;return t.endsWith("/")&&n===T(t,0,-1)&&(i=T(t,0,-1),s(n===i)),n.startsWith(i)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(i)),n=n.slice(i.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function _e(e){return e.startsWith("/")}function v(e,t){Object.assign(e,t)}function j(e){return e instanceof Function||typeof e=="function"}function K(e){return(t,n)=>{const i=e(t),r=e(n);return i===r?0:i>r?-1:1}}function A(e){return(t,n)=>{const i=e(t),r=e(n);if(s([!0,!1,null].includes(i)),s([!0,!1,null].includes(r)),i===r)return 0;if(i===!0||r===!1)return-1;if(r===!0||i===!1)return 1;s(!1)}}function cn(e){return A(t=>{const n=e(t);return n===null?null:!n})}function d(e,t,n="unknown"){if(!P(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const i=e[t];return n==="array"?Array.isArray(i):n==="object"?P(i):n==="string[]"?Array.isArray(i)&&i.every(r=>typeof r=="string"):n==="function"?j(i):Array.isArray(n)?typeof i=="string"&&n.includes(i):n==="null"?i===null:n==="undefined"?i===void 0:n==="true"?i===!0:n==="false"?i===!1:typeof i===n}function x(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function fn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const dn=e=>e!=null;function Te(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}const gn="\\";function nt(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes(gn),t(e))}function ne(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function hn(e){return typeof e=="object"&&e!==null&&"then"in e&&j(e.then)}const pn=["$$registrations","_rerender_only"],mn=[".md",".mdx"];function yn(e,t){vn(e,t,!0)}function vn(e,t,n){const r=Object.keys(e).filter(a=>!pn.includes(a)),o=r.filter(a=>a!=="default"),l=r.includes("default");if(o.length===0){if(l)return;s(r.length===0),g(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!mn.some(a=>t.endsWith(a))){const a=o.join(", ");n?R(o.length===0,`${t} should only have a default export: remove \`export { ${a} }\``,{onlyOnce:!0}):R(o.length===0,`${t} replace \`export { ${a} }\` with \`export default { ${a} }\``,{onlyOnce:!0})}}function _n(e){return Object.entries(e)}const bn=["clientRouting"];function Pn(e){bn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;g(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),g(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const it=["render","clientRouting","prerender","doNotPrerender"];function Rn(e,t){g(!it.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function En(e,t){const n={},i={},r={};if(e.forEach(a=>{Sn(a).forEach(({exportName:u,exportValue:h,isFromDefaultExport:f})=>{var m;s(u!=="default"),r[u]=(m=r[u])!==null&&m!==void 0?m:[],r[u].push({exportValue:h,exportSource:`${a.filePath} > ${f?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:a.filePath,_filePath:a.filePath,_fileType:a.fileType,_isFromDefaultExport:f})})}),t){const{configValues:a}=t;_n(a).forEach(([c,u])=>{var h,f,m;const y=t.configElements[c];s(y);const{configDefinedByFile:p,configDefinedAt:F}=y;s(p),i[c]=(h=i[c])!==null&&h!==void 0?h:u,n[c]=(f=n[c])!==null&&f!==void 0?f:[],s(n[c].length===0),n[c].push({configValue:u,configDefinedAt:F,configDefinedByFile:p});const _=c;r[_]=(m=r[_])!==null&&m!==void 0?m:[],r[_].push({exportValue:u,exportSource:F,filePath:p,_filePath:p,_fileType:null,_isFromDefaultExport:null})})}const o=Fn(),l={};return Object.entries(r).forEach(([a,c])=>{c.forEach(({exportValue:u,_fileType:h,_isFromDefaultExport:f})=>{var m;l[a]=(m=l[a])!==null&&m!==void 0?m:u,h===".page"&&!f&&(a in o||(o[a]=u))})}),s(!("default"in l)),s(!("default"in r)),{config:i,configEntries:n,exports:l,exportsAll:r,pageExports:o}}function Sn(e){const{filePath:t,fileExports:n}=e;s(n),s(tt(t));const i=[];return Object.entries(n).sort(cn(([r])=>r==="default")).forEach(([r,o])=>{let l=r==="default";if(l)if(rn(t))r="Page";else{g(P(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([a,c])=>{Rn(a,t),i.push({exportName:a,exportValue:c,isFromDefaultExport:l})});return}i.push({exportName:r,exportValue:o,isFromDefaultExport:l})}),i.forEach(({exportName:r,isFromDefaultExport:o})=>{s(!(o&&it.includes(r)))}),i}function Fn(){return new Proxy({},{get(...e){return D()||R(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function wn(e){const t=".page.",n=T(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function I(e){nt(e)}function rt(e,t){if(t.length>0){const i=t.filter(r=>r.isErrorPage);return i.length===0?null:(g(i.length===1,"Only one error page can be defined"),i[0].pageId)}const n=me(e.map(({pageId:i})=>i).filter(i=>G(i)));if(g(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const i=n[0];return s(i),i}return null}function G(e,t){return s(!e.includes("\\")),e.includes("/_error")}function kn(e,t){if(t.length>0){const n=t.find(i=>i.pageId===e);return s(n),n.isErrorPage}else return G(e)}const On=[".page",".page.server",".page.route",".page.client",".css"];function Tn(e){if(nt(e),e.endsWith(".css"))return".css";s(tt(e),e);const n=e.split("/").slice(-1)[0].split("."),i=n.slice(-3)[0],r=n.slice(-2)[0];if(r==="page")return".page";if(s(i==="page",e),r==="server")return".page.server";if(r==="client")return".page.client";if(r==="route")return".page.route";s(!1,e)}function ot(e){const t=o=>r.pageId===o||r.isDefaultPageFile&&(xe(r.filePath)||xn(o,r.filePath)),n=Tn(e),r={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:ce(e),isRendererPageFile:n!==".css"&&ce(e)&&xe(e),isErrorPageFile:G(e),pageId:wn(e)};return r}function ce(e){return I(e),G(e)?!1:e.includes("/_default")}function xe(e){return I(e),e.includes("/renderer/")}function xn(e,t){I(e),I(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(ce(t));const n=T(t.split("/"),0,-1).filter(i=>i!=="_default").join("/");return e.startsWith(n)}function Cn(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(P(t)),s(d(t,"pageId","string")),s(d(t,"routeFilesystem","string")||d(t,"routeFilesystem","null")),s(d(t,"routeFilesystemDefinedBy","string")||d(t,"routeFilesystemDefinedBy","null")),s(d(t,"loadCodeFiles","function")),s(d(t,"isErrorPage","boolean")),s(d(t,"configElements","object")),st(t.configElements,!1)})}function jn(e){st(e,!0)}function st(e,t){s(P(e)),Object.entries(e).forEach(([n,i])=>{if(s(P(i)||i===null),i===null){s(t);return}s(d(i,"configDefinedAt","string")),s(d(i,"plusConfigFilePath","string")||d(i,"plusConfigFilePath","null")),s(d(i,"configEnv","string")),s(d(i,"codeFilePath","string")||d(i,"codeFilePath","null")),s(d(i,"codeFileExport","string")||d(i,"codeFileExport","null")),s(d(i,"configValueSerialized","string")||d(i,"configValueSerialized","undefined")),(t||n==="route")&&s(d(i,"configValue")||d(i,"configValueSerialized"))})}const An=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],i=t[2];return new RegExp(n,i)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function Z(e){const t=JSON.parse(e);return lt(t)}function lt(e){return typeof e=="string"?$n(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=lt(n)}),e)}function $n(e){for(const{match:t,deserialize:n}of An)if(t(e))return n(e,Z);return e}function In(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,i])=>{Dn(i),n==="route"&&Ln(i)})})}function Dn(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=Z(t))}function Ln(e){s(d(e,"configValue"));const{configValue:t}=e,n=typeof t;g(n==="string"||j(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function Bn(e){s(d(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(d(e,"pageFilesLazy","object")),s(d(e,"pageFilesEager","object")),s(d(e,"pageFilesExportNamesLazy","object")),s(d(e,"pageFilesExportNamesEager","object")),s(d(e.pageFilesLazy,".page")),s(d(e.pageFilesLazy,".page.client")||d(e.pageFilesLazy,".page.server")),s(d(e,"pageFilesList","string[]")),s(d(e,"pageConfigs")),s(d(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;Cn(t),In(t),jn(n);const i={};Y(e.pageFilesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;Ce(u),l.loadFile=async()=>{"fileExports"in l||(l.fileExports=await u(),Pn(l))}}),Y(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;Ce(u),l.loadExportNames=async()=>{if(!("exportNames"in l)){const h=await u();g("exportNames"in h,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(d(h,"exportNames","string[]"),l.filePath),l.exportNames=h.exportNames}}}),Y(e.pageFilesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;s(P(u)),l.fileExports=u}),Y(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var c;l=i[o]=(c=i[o])!==null&&c!==void 0?c:l;const u=a;s(P(u)),s(d(u,"exportNames","string[]"),l.filePath),l.exportNames=u.exportNames}),e.pageFilesList.forEach(o=>{var l;i[o]=(l=i[o])!==null&&l!==void 0?l:ot(o)});const r=Object.values(i);return r.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:r,pageConfigs:t,pageConfigGlobal:n}}function Y(e){const t=[];return Object.entries(e).forEach(([n,i])=>{s(On.includes(n)),s(P(i)),Object.entries(i).forEach(([r,o])=>{const l=ot(r);s(l.fileType===n),t.push({filePath:r,pageFile:l,globValue:o})})}),t}function Ce(e){s(j(e))}const C=w("setPageFiles.ts",{});function Nn(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:i}=Bn(e);C.pageFilesAll=t,C.pageConfigs=n,C.pageConfigGlobal=i}async function Wn(e,t){e?(s(!C.pageFilesGetter),s(t===void 0)):(s(C.pageFilesGetter),s(typeof t=="boolean"),(!C.pageFilesAll||!t)&&await C.pageFilesGetter());const{pageFilesAll:n,pageConfigs:i,pageConfigGlobal:r}=C;s(n&&i&&r);const o=Hn(n,i);return{pageFilesAll:n,allPageIds:o,pageConfigs:i,pageConfigGlobal:r}}function Hn(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),i=me(n),r=t.map(o=>o.pageId);return[...i,...r]}function be(e,t){return ut(e,t,!0)}function at(e,t){return ut(e,t,!1)}function ut(e,t,n){const i=n?"CLIENT_ONLY":"SERVER_ONLY",r=e.filter(y=>y.isRelevant(t)&&y.fileType!==".page.route").sort(Vn(n,t)),o=y=>{const p=r.filter(_=>_.pageId===t&&_.isEnv(y?"CLIENT_AND_SERVER":i));g(p.length<=1,`Merge the following files into a single file: ${p.map(_=>_.filePath).join(" ")}`);const F=p[0];return s(F===void 0||!F.isDefaultPageFile),F},l=o(!1),a=o(!0),c=y=>r.filter(p=>p.isRendererPageFile&&p.isEnv(y?"CLIENT_AND_SERVER":i))[0],u=c(!1),h=c(!0),f=r.filter(y=>y.isDefaultPageFile&&!y.isRendererPageFile&&(y.isEnv(i)||y.isEnv("CLIENT_AND_SERVER")));return[l,a,...f,u,h].filter(dn)}function Vn(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",i=-1,r=1,o=0;return(l,a)=>{if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;{const c=l.isRendererPageFile,u=a.isRendererPageFile;if(!c&&u)return i;if(!u&&c)return r;s(c===u)}{const c=je(t,l.filePath),u=je(t,a.filePath);if(c<u)return i;if(u<c)return r;s(c===u)}{if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i;if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r}return o}}function je(e,t){I(e),I(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const i=e.slice(n),r=t.slice(n),o=i.split("/").length,l=r.split("/").length;return o+l}const Un="modulepreload",zn=function(e){return"/"+e},Ae={},$e=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=zn(o),o in Ae)return;Ae[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Un,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},Pe={},ct={},Gn={},ee={},Mn=[],Yn={},Jn=!0,Kn=[{pageId:"/pages/_error",isErrorPage:!0,routeFilesystem:null,routeFilesystemDefinedBy:null,loadCodeFiles:async()=>(await $e(()=>import("./pages_error.27b0c9d7.js"),["assets/entries/pages_error.27b0c9d7.js","assets/chunks/chunk-d4275d65.js","assets/static/LayoutDefault.83e12484.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/_error/+Page.tsx > `export default`",configDefinedByFile:"/pages/_error/+Page.tsx",codeFilePath:"/pages/_error/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { passToClient }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { clientRouting }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx > `export default`",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.h.ts > `export default { title }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.h.ts > `export default { description }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},hasServerOnBeforeRender:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"false"}}},{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await $e(()=>import("./pages_index.00460653.js"),["assets/entries/pages_index.00460653.js","assets/chunks/chunk-d4275d65.js","assets/static/LayoutDefault.83e12484.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"vike-solid/renderer/onRenderHtml > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderHtml",codeFilePath:"vike-solid/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"vike-solid/renderer/onRenderClient > `export default`",configDefinedByFile:"vike-solid/renderer/onRenderClient",codeFilePath:"vike-solid/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.tsx > `export default`",configDefinedByFile:"/pages/index/+Page.tsx",codeFilePath:"/pages/index/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { passToClient }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-only",configValueSerialized:'["pageProps","title"]'},clientRouting:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { clientRouting }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js > `export default { hydrationCanBeAborted }",configDefinedByFile:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/node_modules/.pnpm/vike-solid@0.0.8_solid-js@1.7.8/node_modules/vike-solid/dist/+config.js",configEnv:"client-only",configValueSerialized:"true"},Head:{configDefinedAt:"/layouts/Head.tsx > `export default`",configDefinedByFile:"/layouts/Head.tsx",codeFilePath:"/layouts/Head.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only"},Layout:{configDefinedAt:"/layouts/LayoutDefault.tsx > `export default`",configDefinedByFile:"/layouts/LayoutDefault.tsx",codeFilePath:"/layouts/LayoutDefault.tsx",codeFileExport:"default",plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client"},title:{configDefinedAt:"/pages/+config.h.ts > `export default { title }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-and-client",configValueSerialized:'"Bati"'},description:{configDefinedAt:"/pages/+config.h.ts > `export default { description }",configDefinedByFile:"/pages/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.ts",configEnv:"server-only",configValueSerialized:'"Bati"'},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},hasServerOnBeforeRender:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"false"}}}],qn={onBeforeRoute:null},Xn=Object.assign({}),Qn={...Xn};Pe[".page"]=Qn;const Zn=Object.assign({}),ei={...Zn};ee[".page"]=ei;const ti=Object.assign({}),ni={...ti};ee[".page.server"]=ni;const ii=Object.assign({}),ri={...ii};ct[".page.route"]=ri;const oi=Object.assign({}),si={...oi};Pe[".page.client"]=si;const li=Object.assign({}),ai={...li};ee[".page.client"]=ai;const ui=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:Jn,neverLoaded:Yn,pageConfigGlobal:qn,pageConfigs:Kn,pageFilesEager:ct,pageFilesExportNamesEager:ee,pageFilesExportNamesLazy:Gn,pageFilesLazy:Pe,pageFilesList:Mn},Symbol.toStringTag,{value:"Module"}));Nn(ui);function Ie(e){const t=e/1e3;if(t<120){const n=De(t);return`${n} second${Le(n)}`}{const n=t/60,i=De(n);return`${i} minute${Le(i)}`}}function De(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Le(e){return e==="1"?"":"s"}const ci=w("utils/executeHook.ts",{userHookErrors:new Map});function te(e,t,n){const{timeoutErr:i,timeoutWarn:r}=fi(t);let o,l;const a=new Promise((f,m)=>{o=y=>{c(),f(y)},l=y=>{c(),m(y)}}),c=()=>{clearTimeout(u),clearTimeout(h)},u=setTimeout(()=>{R(!1,`The ${t}() hook defined by ${n} is taking more than ${Ie(r)}`)},r),h=setTimeout(()=>{const f=qe(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ie(i)}`);l(f)},i);return(async()=>{try{const f=await e();o(f)}catch(f){P(f)&&ci.userHookErrors.set(f,{hookName:t,hookFilePath:n}),l(f)}})(),a}function fi(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function M(e){const t=window.location.href,{searchOriginal:n,hashOriginal:i,pathname:r}=z(t,"/");let o;return e!=null&&e.withoutHash?o=`${r}${n||""}`:o=`${r}${n||""}${i||""}`,s(o.startsWith("/")),o}s(D());function di(e){return z(e,"/").pathname}function gi(){var e,t,n,i;const r=!!(!((t=(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||e===void 0?void 0:e.renderers)===null||t===void 0)&&t.size),o=!!(!((i=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)===null||n===void 0?void 0:n.rendererInterfaces)===null||i===void 0)&&i.size),l=!!window.__vite_plugin_react_preamble_installed__;return r||o||l}function ft(e,t){const n=Object.keys,i=typeof e;return e&&t&&i==="object"&&i===typeof t?n(e).length===n(t).length&&n(e).every(o=>ft(e[o],t[o])):e===t}function hi(e,t){return P(e)&&P(t)&&e.constructor===t.constructor&&ft({...e,stack:null},{...t,stack:null})&&t.message===t.message}function X(e){window.location.href=e}function pi(e){return new Promise(t=>setTimeout(t,e))}function mi(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}s(D());L();const Be=w("navigationState.ts",{}),yi=M(),dt={markNavigationChange(){Be.navigationChanged=!0},get noNavigationChangeYet(){return!Be.navigationChanged&&this.isFirstUrl(M())},isFirstUrl(e){return e===yi}};function vi(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);g(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const i=Z(n);s(d(i,"pageContext","object"));const{pageContext:r}=i;return s(d(r,"_pageId","string")),v(r,{_pageContextRetrievedFromServer:{...r},_comesDirectlyFromServer:!0}),r}async function _i(e,t){const i=at(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(i.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:i.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function bi(e,t){if(!x(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Pi(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}D()&&L();function gt(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(ne(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:pt,enumerable:t,configurable:!0}),"url"in e&&s(ne(e,"url")),Object.defineProperty(e,"url",{get:Ri,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(ne(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Ei,enumerable:t,configurable:!0})}function ht(e){let t=e._urlHandler;t||(t=r=>r);const n=t(e.urlOriginal),i=e._baseServer;return s(i.startsWith("/")),z(n,i)}function pt(){const{pathname:e}=ht(this),t=e;return s(t.startsWith("/")),t}function Ri(){return R(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),pt.call(this)}function Ei(){const e=ht(this),{origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:l,hash:a,hashOriginal:c}=e,u={origin:t,pathname:n,pathnameOriginal:i,search:r,searchAll:o,searchOriginal:l,hash:a,hashOriginal:c,get hashString(){return R(!1,"`pageContext.urlParsed.hashString` has been renamed to `pageContext.urlParsed.hashOriginal`",{onlyOnce:!0,showStackTrace:!0}),c},get searchString(){return R(!1,"`pageContext.urlParsed.searchString` has been renamed to `pageContext.urlParsed.searchOriginal`",{onlyOnce:!0,showStackTrace:!0}),l}};return Ne(u,"hashString"),Ne(u,"searchString"),u}function Ne(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function Si(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(x(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const mt="@",fe=":";function Fi(e,t){g(e.startsWith("/")||e==="*",(()=>{t?t=t+" invalid":t="Invalid";const n=[`'${e}'`,e!==""?null:"(empty string)"].filter(Boolean).join(" ");return`${t} Route String ${n}: Route Strings should start with a leading slash '/' (or be '*')`})())}function de(e,t){Fi(e),s(t.startsWith("/"));const n=e.split("/"),i=t.split("/"),r={};wi(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,i.length);o++){const l=n[o],a=i[o];if(l==="*")return r["*"]=i.slice(Math.max(1,o)).join("/"),{routeParams:r};if(l&&q(l)){if(R(!l.startsWith(fe),`Outdated Route String \`${e}\`, use \`${e.split(fe).join(mt)}\` instead.`,{onlyOnce:!0}),!a)return null;r[l.slice(1)]=a}else if((l||"")!==(a||""))return null}return{routeParams:r}}function wi(e){const t=e.split("*").length-1;g(t<=1,`Invalid Route String '${e}': Route Strings are not allowed to contain more than one glob character '*'`),g(t===0||t===1&&e.endsWith("*"),`Invalid Route String '${e}': make sure your Route String ends with the glob character '*'`)}function B(e){const t=e.split("/").filter(l=>l!==""&&l!=="*");let n=0;for(const l of t){if(q(l))break;n++}const i=t.filter(l=>!q(l)).length,r=t.filter(l=>q(l)).length,o=e.endsWith("*");return{numberOfParameterSegments:r,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:i,isCatchAll:o}}function q(e){return e.startsWith(mt)||e.startsWith(fe)}function We(e){const n=de(e,e);return s(n),Object.keys(n.routeParams).length===0}function ki(e){e.sort(Oi).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(A(t=>t.routeType==="STRING"&&We(t.routeString)===!1)).sort(A(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(A(t=>t.routeType==="STRING"&&We(t.routeString)===!0)).sort(A(t=>t.routeType==="FILESYSTEM")).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Oi(e,t){var n,i;{const r=(n=e.precedence)!==null&&n!==void 0?n:0,o=(i=t.precedence)!==null&&i!==void 0?i:0;if(r!==o)return r>o?-1:1}if(!t.routeString||!e.routeString)return 0;{const o=K(l=>B(l).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(o!==0)return o}{const o=K(l=>B(l).numberOfStaticSegements)(e.routeString,t.routeString);if(o!==0)return o}{const o=K(l=>B(l).numberOfParameterSegments)(e.routeString,t.routeString);if(o!==0)return o}{if(B(t.routeString).isCatchAll)return-1;if(B(e.routeString).isCatchAll)return 1}return 0}async function Ti(e,t,n){Si(t);let i=e(t);if(yt(i,`The Route Function ${n}`),i=await i,i===!1)return null;if(i===!0&&(i={}),g(x(i),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${d(i,"constructor")?i.constructor:i}\`.`),"match"in i){const{match:l}=i;if(g(typeof l=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!l)return null}let r=null;"precedence"in i&&(r=i.precedence,g(typeof r=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),vt(i,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=i.routeParams||{};return g(!("pageContext"in i),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(x(o)),Object.keys(i).forEach(l=>{g(l==="match"||l==="routeParams"||l==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${l} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:r,routeParams:o}}function yt(e,t){R(!hn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function vt(e,t){s(t.endsWith(" should")),d(e,"routeParams")&&(s(t.endsWith(" should")),g(x(e.routeParams),`${t} be a plain JavaScript object.`),g(Pi(e.routeParams),`${t} only hold string values.`))}function Re(e,{hook:t,errorMessagePrefix:n,isRenderErrorPage:i}){const r=(()=>{if(n)return n;{s(t);const{hookName:o,hookFilePath:l}=t;return s(!o.endsWith(")")),`The \`pageContext\` object provided by the ${o}() hook defined by ${l}`}})();g(P(e),`${r} should be an object instead of \`${typeof e}\``),g(!("_objectCreatedByVitePluginSsr"in e),`${r} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),R(!("_pageId"in e),`${r} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),i||g(!("is404"in e),`${r} sets \`pageContext.is404\` which is forbidden, use \`throw RenderErrorPage()\` instead, see https://vite-plugin-ssr.com/RenderErrorPage`)}async function xi(e,t){let n=e.onBeforeRoute(t);yt(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const i=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(n==null||bi(n,["pageContext"])&&d(n,"pageContext"),`${i} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(g(d(n,"pageContext","object"),`${i} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),d(n.pageContext,"_pageId")&&!d(n.pageContext,"_pageId","null")){const o=`${i} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;g(d(n.pageContext,"_pageId","string"),`${o} a string or null`),g(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(l=>`'${l}'`).join(", ")}]\`.`)}d(n.pageContext,"routeParams")&&vt(n.pageContext,`${i} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const r={};return d(n.pageContext,"url")&&(R(!1,`${i} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),d(n.pageContext,"urlOriginal")&&(on(n.pageContext.urlOriginal,`${i} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),v(r,{_urlPristine:t.urlOriginal})),Re(n.pageContext,{hook:{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}}),v(r,n.pageContext),r}var J;function He(...e){var t,n;J||(J=(n=(t=globalThis).__brillout_debug_createDebugger)===null||n===void 0?void 0:n.call(t,"vps:routing")),J&&J(...e)}D()&&L();async function _t(e){gt(e),He("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const l=await xi(e._onBeforeRouteHook,e);if(l){if(v(t,l),d(t,"_pageId","string")||d(t,"_pageId","null"))return d(t,"routeParams")?s(d(t,"routeParams","object")):v(t,{routeParams:{}}),v(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};v(e,t)}}v(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),g(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:i}=e;s(i.startsWith("/"));const r=[];await Promise.all(e._pageRoutes.map(async l=>{const{pageId:a,routeType:c}=l;if(l.routeType==="FILESYSTEM"){const{routeString:u}=l,h=de(u,i);if(h){const{routeParams:f}=h;r.push({pageId:a,routeParams:f,routeString:u,routeType:c})}return}if(l.routeType==="STRING"){const{routeString:u}=l,h=de(u,i);if(h){const{routeParams:f}=h;s(c==="STRING"),r.push({pageId:a,routeString:u,routeParams:f,routeType:c})}return}if(l.routeType==="FUNCTION"){const{routeFunction:u,routeDefinedAt:h}=l,f=await Ti(u,e,h);if(f){const{routeParams:m,precedence:y}=f;r.push({pageId:a,precedence:y,routeParams:m,routeType:c})}return}s(!1)})),ki(r);const o=r[0];if(He(`Route matches for URL \`${i}\` (in precedence order):`,r),v(t,{_routeMatches:r}),!o)return v(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:l}=o;s(x(l)),v(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function W(e,t){if(!(t in e.exports))return null;const n=e.exports[t],i=e.exportsAll[t][0];s(i.exportValue===n);const r=i.exportSource;return s(r),s(!t.endsWith(")")),g(j(n),`hook ${t}() defined by ${r} should be a function`),{hookFn:n,hookFilePath:r}}function ie(e,t){W(e,t)}function Ci(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[i])=>fn(n,i)).forEach(([n,i])=>{e[n]=i})}function ji(e){Ai(e),$i(e)}function Ai(e){kn(e._pageId,e._pageConfigs)&&s(d(e,"is404","boolean"))}function $i(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!P(t)){R(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const re=w("preparePageContextForUserConsumptionClientSide.ts",{});function Ee(e,t){if(t){const r=e;s([!0,!1].includes(r.isHydration)),s([!0,!1,null].includes(r.isBackwardNavigation))}else{const r=e;s(r.isHydration===!0),s(r.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(P(e.pageExports));const n=e.exports.Page;v(e,{Page:n}),Ni(e),Ci(e),s([!0,!1].includes(e._comesDirectlyFromServer));const i=e._comesDirectlyFromServer?Li(e):e;return ji(e),i}const Ii=["then","toJSON"],Di=["_pageId"];function Li(e){return new Proxy(e,{get:n});function t(i){return!(i in e||Ii.includes(i)||typeof i=="symbol"||typeof i!="string"||i.startsWith("__v_"))}function n(i,r){return re.disableAssertPassToClient!==r&&Bi(e._pageContextRetrievedFromServer,r,t(r)),re.disableAssertPassToClient=r,window.setTimeout(()=>{re.disableAssertPassToClient=void 0},0),e[r]}}function Bi(e,t,n){if(!n||e===null)return;const i=Object.keys(e).filter(r=>!Di.includes(r));g(!1,[`pageContext.${t} isn't available in the browser`,`('${t}' is missing in the passToClient list [${i.map(r=>`'${r}'`).join(", ")}]).`,`Did you forget to add '${t}' to the passToClient list?`,"See https://vite-plugin-ssr.com/passToClient"].join(" "))}function Ni(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function bt(e,t){var n;const i=e.filter(o=>o.pageId===t);return s(i.length<=1),(n=i[0])!==null&&n!==void 0?n:null}async function Wi(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(r=>{const{configName:o,codeFilePath:l}=r;let a;if(r.isPlusFile){const{codeFileExports:c}=r;o!=="client"&&yn(c,l),Object.entries(c).forEach(([u,h])=>{const f=u!=="default",m=f?u:r.configName,y=h;if(n[m]=y,f){const p=e.configElements[r.configName];s(p),e.configElements[m]={configValue:y,codeFileExport:u,codeFilePath:l,configDefinedByFile:l,configDefinedAt:`${l} > export { ${u} }`,configEnv:p.configEnv,plusConfigFilePath:null}}})}else a=r.codeFileExportValue,n[o]=a}),Object.entries(e.configElements).map(([r,o])=>{o.codeFilePath||(n[r]=o.configValue)}),v(e,{configValues:n})),e}const Pt="__whileFetchingAssets";async function H(e,t,n){const i=be(e,n),r=bt(t,n);let o;try{o=(await Promise.all([r&&Wi(r,!1),...i.map(y=>{var p;return(p=y.loadFile)===null||p===void 0?void 0:p.call(y)})]))[0]}catch(m){throw Hi(m)&&Object.assign(m,{[Pt]:!0}),m}const{config:l,configEntries:a,exports:c,exportsAll:u,pageExports:h}=En(i,o);return{config:l,configEntries:a,exports:c,exportsAll:u,pageExports:h,_pageFilesLoaded:i}}function Se(e){return e?e[Pt]===!0:!1}function Hi(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const Ve=["urlPathname","urlParsed"],Vi=["Page","pageExports","exports"];function Rt(e){[...Vi,...Ve].forEach(n=>{n in e&&(Ve.includes(n)?(s(n.startsWith("url")),R(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):R(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}const Ui="/";function zi(e,t,n){const{pathnameOriginal:i,searchOriginal:r,hashOriginal:o}=z(e,Ui);e.startsWith("/")&&s(e===`${i}${r||""}${o||""}`,{url:e});const l=i.endsWith("/");let a;return n&&i!=="/"?(l?a=T(i,0,-1):a=i,s(!a.endsWith("/"),{url:e}),s(a!=="")):a=i+(l?"":"/")+"index",s(a),a=a+t,`${a}${r||""}${o||""}`}const Gi=".pageContext.json",Mi=!1;function Yi(e){return zi(e,Gi,Mi)}function ge(e,t,n){const i=e.configElements[t];if(!i||Ji(e,t))return null;const{configValue:r,configDefinedAt:o}=i;return g(typeof r===n,`${o} has an invalid type \`${typeof r}\`: is should be a ${n} instead`),r}function Ji(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:i,configValue:r}=n;return i?!1:r==null}function Ki(e,t){const n=t.find(i=>i.pageId===e);return s(t.length>0),s(n),n}function qi(e,t,n){s(!n.endsWith(" "));const i=[],r=Object.keys(e);for(const o of r)t.includes(o)||i.push(o);g(i.length===0,[n,"returned an object with following unknown keys:",Te(i)+".","Only following keys are allowed:",Te(t)+"."].join(" "))}function Xi(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;g(x(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),qi(e,["pageContext"],n),e.pageContext&&Re(e.pageContext,{hook:{hookName:"onBeforeRender",hookFilePath:t}})}function Qi(e,t){const i=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(K(({filesystemRoot:o})=>o.length))[0];let r;if(i){const{filesystemRoot:o,urlRoot:l}=i,a={pageId:e,filesystemRoot:o,urlRoot:l};s(l.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),a),s(e.startsWith(o),a),o!=="/"?(s(!o.endsWith("/"),a),r=T(e,o.length,0)):r=e,s(r.startsWith("/"),a),r=l+(l.endsWith("/")?"":"/")+T(r,1,0)}else r=e;return s(r.startsWith("/")),r=r.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!r.includes(".page.")),s(!r.endsWith(".")),r.endsWith("/index")&&(r=T(r,0,-6)),r===""&&(r="/"),s(r.startsWith("/")),s(!r.endsWith("/")||r==="/"),r}async function Zi(e,t,n,i){await Promise.all(e.filter(a=>a.fileType===".page.route").map(a=>{var c;return(c=a.loadFile)===null||c===void 0?void 0:c.call(a)}));const{onBeforeRouteHook:r,filesystemRoots:o}=tr(e,t,n);return{pageRoutes:er(o,e,t,i),onBeforeRouteHook:r}}function er(e,t,n,i){const r=[];let o=[...i];if(n.length>0){s(e===null);const l=!0;n.filter(a=>!a.isErrorPage).forEach(a=>{const c=a.pageId;o=rr(o,c);let u=null;{const h=a.configElements.route;if(h){s("configValue"in h);const f=h.configValue,m=h.configDefinedAt;if(s(m),typeof f=="string")u={pageId:c,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:m,routeType:"STRING"};else{s(j(f));{const y=a.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions;if(y){const p=y.configValue;s(typeof p=="boolean",`${y.configDefinedAt} should be a boolean`)}}u={pageId:c,comesFromV1PageConfig:l,routeFunction:f,routeDefinedAt:m,routeType:"FUNCTION"}}}}if(!u){const{routeFilesystem:h,routeFilesystemDefinedBy:f}=a;s(h),s(h.startsWith("/")),s(f),u={pageId:c,routeFilesystemDefinedBy:f,comesFromV1PageConfig:l,routeString:h,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(u),r.push(u)})}if(n.length===0){s(e);const l=!1;o.filter(a=>!G(a)).forEach(a=>{const c=Et(a,t);if(!c||!("default"in c.fileExports)){const u=Qi(a,e);s(u.startsWith("/")),s(!u.endsWith("/")||u==="/"),r.push({pageId:a,comesFromV1PageConfig:l,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${a}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:h}=c;if(s(h.default),d(h,"default","string")){const f=h.default;g(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),r.push({pageId:a,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:u,routeType:"STRING"});return}if(d(h,"default","function")){const f=h.default;{const m="iKnowThePerformanceRisksOfAsyncRouteFunctions";m in h&&g(d(h,m,"boolean"),`The export \`${m}\` of ${u} should be a boolean.`)}r.push({pageId:a,comesFromV1PageConfig:l,routeFunction:f,routeDefinedAt:u,routeType:"FUNCTION"});return}g(!1,`The default export of ${u} should be a string or a function.`)}})}return r}function tr(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const l=n.onBeforeRoute.codeFilePath;return s(l),g(j(o),`The hook onBeforeRoute() defined by ${l} should be a function.`),{onBeforeRouteHook:{hookFilePath:l,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let i=null;const r=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:l})=>{if(s(l),"onBeforeRoute"in l){g(d(l,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:a}=l;i={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:a}}"filesystemRoutingRoot"in l&&(g(d(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),g(d(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${l.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),r.push({filesystemRoot:ir(o),urlRoot:l.filesystemRoutingRoot}))}),{onBeforeRouteHook:i,filesystemRoots:r}}function Et(e,t){return t.find(n=>n.pageId===e&&n.fileType===".page.route")}function nr(e,t){const n=Et(e,t);if(!n)return null;const{filePath:i,fileExports:r}=n;s(r);const o=r.guard;if(!o)return null;const l=i;return g(j(o),`guard() defined by ${l} should be a function`),{hookFn:o,hookFilePath:l}}function ir(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=T(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function rr(e,t){const{length:n}=e;return e=e.filter(i=>i!==t),s(e.length===n-1),e}async function or(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=nr(e._pageId,e._pageFilesAll)):n=W(e,"guard"),!n)return;const i=n.hookFn;let r=e;const o=t(e);o&&(r=o);const l=await te(()=>i(r),"guard",n.hookFilePath);g(l===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}async function sr(e){return e._isFirstRenderAttempt&&dt.isFirstUrl(e.urlOriginal)?(s(d(e,"_isFirstRenderAttempt","true")),lr(e)):(s(d(e,"_isFirstRenderAttempt","false")),ur(e))}async function lr(e){const t=vi();return Rt(t),v(t,{isHydration:!0,_comesDirectlyFromServer:!0}),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}async function ar(e){const t=rt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page");const n={isHydration:!1,_pageId:t,_pageContextRetrievedFromServer:null,_comesDirectlyFromServer:!1};return v(n,await H(e._pageFilesAll,e._pageConfigs,n._pageId)),n}async function ur(e){let t={};v(t,{isHydration:!1}),v(t,await dr(e)),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),await or({_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null,...e,...t},i=>Ee(i,!0));const n=await cr({...e,...t});if(s([!0,!1].includes(n._comesDirectlyFromServer)),n._isError){t={},s(n._comesDirectlyFromServer===!0),s(d(n,"is404","boolean")),s(d(n,"pageProps","object")),s(d(n.pageProps,"is404","boolean")),s(!("serverSideError"in n));const i=rt(e._pageFilesAll,e._pageConfigs);return s(i),v(t,{isHydration:!1,_pageId:i}),v(t,n),v(t,await H(e._pageFilesAll,e._pageConfigs,t._pageId)),t}else return v(t,n),t}async function cr(e){const t=W(e,"onBeforeRender");if(t){const i=t.hookFn,r={_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null},o=Ee({...e,...r},!0),l=await te(()=>i(o),"onBeforeRender",t.hookFilePath);Xi(l,t.hookFilePath);const a=l==null?void 0:l.pageContext;return v(r,a),r}if(await fr(e)){const i=await pr(e),r={};return Object.assign(r,i),v(r,{_comesDirectlyFromServer:!0,_pageContextRetrievedFromServer:i}),r}return{_comesDirectlyFromServer:!1,_pageContextRetrievedFromServer:null}}async function fr(e){var t;if(e._pageConfigs.length>0){const n=Ki(e._pageId,e._pageConfigs);return(t=ge(n,"hasServerOnBeforeRender","boolean"))!==null&&t!==void 0?t:!1}else{const{hasOnBeforeRenderServerSideOnlyHook:n}=await _i(e._pageFilesAll,e._pageId);return n}}async function dr(e){const n=(await _t(e)).pageContextAddendum;if(!n._pageId){const i=new Error("No routing match");throw gr(i),i}return s(d(n,"_pageId","string")),n}function gr(e){v(e,{_is404:!0})}function hr(e){return P(e)&&e._is404===!0}async function pr(e){var t;const n=Yi((t=e._urlPristine)!==null&&t!==void 0?t:e.urlOriginal),i=await fetch(n);{const a=i.headers.get("content-type"),c=a&&a.includes("application/json");if(!c&&i.status===404){X(e.urlOriginal);const u=new Error("Page doesn't exist");throw Object.assign(u,{_abortRendering:!0}),u}g(c,`Wrong HTTP Response Header \`content-type\` value for URL ${n} (it should be \`application/json\` but we got \`${a}\`). Make sure to use \`pageContext.httpResponse.contentType\`, see https://github.com/brillout/vite-plugin-ssr/issues/191`)}const r=await i.text(),o=Z(r);if("serverSideError"in o)throw qe("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");s(d(o,"pageContext"));const l=o.pageContext;return s(x(l)),s(d(l,"_pageId","string")),Rt(l),l}function St(){const e="/";return s(mr(e)),e}function mr(e){return e.startsWith("/")}const oe=w("createPageContext.ts",{});async function Ft(e){oe.pageFilesData||(oe.pageFilesData=await Wn(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:i,pageConfigGlobal:r}=oe.pageFilesData,{pageRoutes:o,onBeforeRouteHook:l}=await Zi(t,i,r,n),a=St();s(_e(a));const c={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_baseServer:a,_isProduction:!0,_pageFilesAll:t,_pageConfigs:i,_pageConfigGlobal:r,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:l};return v(c,e),gt(c),c}async function wt(e){const t=await Ft({urlOriginal:e}),n=await _t(t),i=t._pageFilesAll,r=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:i,pageConfigs:r};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:i,pageConfigs:r}:{pageId:null,pageFilesAll:i,pageConfigs:r}}function N(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function yr({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:i(),isClientRouting:o()};function i(){return t.some(a=>a.pageId===n&&a.fileType===".page")?(r(),!1):!(!t.some(a=>a.pageId===n&&a.fileType===".page.server")||e.some(a=>a.pageId===n&&a.fileType===".page.client"&&N(a).includes("render")))}function r(){const l=e.some(a=>N(a).includes("render"));g(l,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((a,c)=>` (${c+1}): ${a.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(a=>N(a).includes("clientRouting"))}}function vr({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:i}){let r=[];const o=t.filter(a=>!e.includes(a)),l=[];if(l.push(...e.map(a=>({id:a.filePath,onlyAssets:!1,eagerlyImported:!1}))),l.push(...o.map(a=>({id:a.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)r=e.map(a=>a.filePath);else{const a=_r(i);l.push({id:a,onlyAssets:!1,eagerlyImported:!1}),r=[a]}return{clientEntries:r,clientDependencies:l}}function _r(e){return e?"@@vite-plugin-ssr/dist/esm/client/router/entry.js":"@@vite-plugin-ssr/dist/esm/client/entry.js"}function br(e,t){let n=be(e,t);const i=at(e,t),{isHtmlOnly:r,isClientRouting:o}=yr({pageFilesClientSide:n,pageFilesServerSide:i,pageId:t});r&&(n=n.filter(c=>c.isEnv("CLIENT_ONLY")&&!N(c).includes("render")),n=Rr(n));const{clientEntries:l,clientDependencies:a}=vr({pageFilesClientSide:n,pageFilesServerSide:i,isHtmlOnly:r,isClientRouting:o});return{isHtmlOnly:r,isClientRouting:o,clientEntries:l,clientDependencies:a,pageFilesClientSide:n,pageFilesServerSide:i}}async function Pr(e,t,{sharedPageFilesAlreadyLoaded:n}){const i=be(e,t);await Promise.all(i.map(async r=>{var o;s(r.isEnv("CLIENT_ONLY")||r.isEnv("CLIENT_AND_SERVER")),!(n&&r.isEnv("CLIENT_AND_SERVER"))&&await((o=r.loadExportNames)===null||o===void 0?void 0:o.call(r))}))}function Rr(e){const t=[];for(const n of e)if(t.push(n),N(n).includes("overrideDefaultPages"))break;return t}function Er(e,t,n){var i,r;if(e){const o=(i=ge(e,"clientRouting","boolean"))!==null&&i!==void 0?i:!1;return{isClientSideRenderable:(r=ge(e,"isClientSideRenderable","boolean"))!==null&&r!==void 0?r:!1,isClientRouting:o}}else{const{isHtmlOnly:o,isClientRouting:l}=br(t,n);return{isClientSideRenderable:!o,isClientRouting:l}}}async function kt(e){const{pageId:t,pageFilesAll:n,pageConfigs:i}=await wt(e);if(!t)return!1;await Pr(n,t,{sharedPageFilesAlreadyLoaded:!1});const r=bt(i,t),{isClientSideRenderable:o,isClientRouting:l}=Er(r,n,t);return o&&l}function Ot(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Tt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Ot(t)||Fr(e)||wr(t)||!kr(t)||!ve(t)||!Sr(e))}function Sr(e){if(Kr()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function Fr(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function wr(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function kr(e){const t=St();s(_e(t));const{hasBaseServer:n}=z(e,t);return n}function Or(e,t){let n=Tr(e,t);return n==="viewport"&&!e._isProduction&&(Xe(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function Tr(e,t){{const n=xr(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const i="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(x(n),i);const r=Object.keys(n);g(r.length===1&&r[0]==="when",i);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const l=o.toLowerCase();return R(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${l}' instead`,{onlyOnce:!0}),l}g(!1,i)}return"hover"}function xr(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const i="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(n===null,i),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),R(!1,i,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";g(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const xt=new Map;function Ct(e){const t=At(e);return xt.has(t)}function jt(e){const t=At(e);xt.set(t,!0)}function At(e){return di(e)}L();const Ue=new Map;async function se(e){if(g(Ze(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),g(!Ot(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),Ct(e))return;jt(e);const{pageId:t,pageFilesAll:n,pageConfigs:i}=await wt(e);if(t)try{await H(n,i,t)}catch(r){if(Se(r))he(r,!0);else throw r}}function Cr(e){jt(e.urlOriginal),[...document.getElementsByTagName("A")].forEach(async n=>{if(Ue.has(n))return;Ue.set(n,!0);const i=n.getAttribute("href");if(Tt(n))return;s(i);try{if(!await kt(i))return}catch{return}if(Ct(i))return;const{prefetchStaticAssets:r}=Or(e,n);if(r){if(r==="hover")n.addEventListener("mouseover",()=>se(i)),n.addEventListener("touchstart",()=>se(i),{passive:!0});else if(r==="viewport"){const o=new IntersectionObserver(l=>{l.forEach(a=>{a.isIntersecting&&(se(i),o.disconnect())})});o.observe(n)}}else return})}async function jr(e,t){const n=Ee(e,t);let i=null,r;i=W(e,"render"),r="render";{const a=W(e,"onRenderClient");a&&(i=a,r="onRenderClient")}if(!i){const a=Ar(e);if(e._pageConfigs.length>0)g(!1,`No onRenderClient() hook defined for URL '${a}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const c=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+a:u="One of the following files should export a `render()` hook: "+c.map(h=>h.filePath).join(" "),g(!1,u)}}s(i);const o=i.hookFn;s(r);const l=await te(()=>o(n),r,i.hookFilePath);g(l===void 0,`The ${r}() hook defined by ${i.hookFilePath} isn't allowed to return a value`)}function Ar(e){let t;try{t=e.urlOriginal}catch{}return t=t??window.location.href,t}function $t(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=Dt()),"scrollPosition"in e||(t=!0,e.scrollPosition=It()),Lt(e),t&&we(e)}function Fe(){const e=window.history.state||{};return Lt(e),e}function It(){return{x:window.scrollX,y:window.scrollY}}function Dt(){return new Date().getTime()}function ze(){const e=It(),t=Fe();we({...t,scrollPosition:e})}function $r(e,t){if(t)we(Fe(),e);else{const n=Dt();Ir({timestamp:n,scrollPosition:null},e)}}function Lt(e){if(s(P(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(d(t,"x","number")&&d(t,"y","number"))}}function we(e,t){window.history.replaceState(e,"",t??null)}function Ir(e,t){window.history.pushState(e,"",t)}L();const Dr=w("navigate.ts",{});function Lr(e){Dr.navigate=e}const Bt="__isRenderErrorPageException";function le(e){return Br(e),typeof e=="object"&&e!==null&&Bt in e}function Nt({pageContext:e}={}){{const n=this;g(!(typeof n=="object"&&(n==null?void 0:n.constructor)===Nt),"Don't use the `new` operator: use `throw RenderErrorPage()` instead of `throw new RenderErrorPage()`.",{showStackTrace:!0})}e!==void 0&&Re(e,{errorMessagePrefix:"The `pageContext` object provided by `throw RenderErrorPage({ pageContext })`",isRenderErrorPage:!0});const t=new Error("RenderErrorPage");return v(t,{pageContext:e,[Bt]:!0}),t}function Br(e){g(e!==Nt,"Missing parentheses `()` in `throw RenderErrorPage`: it should be `throw RenderErrorPage()`.",{showStackTrace:!0})}const S=w("useClientRouter.ts",{previousState:Q()});Mr();$t();function he(e,t){s(Se(e)),S.clientRoutingIsDisabled=!0,t&&console.log(e),Xe(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Nr(){zr(),Wr((r,{keepScrollPosition:o})=>{i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:r,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),Hr((r,o)=>{i({scrollTarget:r,isBackwardNavigation:o})}),Lr(async(r,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:l=!1}={})=>{await i({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",url:r,overwriteLastHistoryEntry:l,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;i({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function i({scrollTarget:r,url:o=M(),overwriteLastHistoryEntry:l=!1,isBackwardNavigation:a,checkClientSideRenderable:c}){var u;if(S.clientRoutingIsDisabled){X(o);return}if(c){let b;try{b=await kt(o)}catch(k){if(le(k))b=!0;else throw k}if(!b){X(o);return}}const h={urlOriginal:o,isBackwardNavigation:a},f=++e;s(f>=1),f>1&&n===!1&&((u=S.onPageTransitionStart)===null||u===void 0||u.call(S,h),n=!0);let m=!1;const y=()=>f===1&&m===!1?!1:f!==e,p=await Ft(h);if(y())return;const F=f===1;v(p,{_isFirstRenderAttempt:F});let _;try{_=await sr(p)}catch(b){if(le(b)||console.error(b),Me(b,p))return;le(b)?(v(p,{is404:!0}),v(p,b.pageContext)):v(p,{is404:hr(b)});try{_=await ar(p)}catch(k){if(Me(k,p)||(F||setTimeout(()=>{window.location.pathname=o},0),hi(b,k)))return;throw k}}if(v(p,_),ie(p,"onPageTransitionStart"),S.onPageTransitionStart=p.exports.onPageTransitionStart,p.exports.hydrationCanBeAborted?m=!0:R(!gi(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!y()&&(t&&await t,!y())){if(Vr(o,l),dt.markNavigationChange(),s(t===void 0),t=(async()=>{await jr(p,!0),Cr(p)})(),await t,t=void 0,p._isFirstRenderAttempt){ie(p,"onHydrationEnd");const{onHydrationEnd:b}=p.exports;if(b){const k=p.exportsAll.onHydrationEnd[0].exportSource;s(k),await te(()=>b(p),"onHydrationEnd",k)}}else f===e&&(p.exports.onPageTransitionEnd&&(ie(p,"onPageTransitionEnd"),p.exports.onPageTransitionEnd(p)),n=!1);Wt(r),ke(),S.initialRenderIsDone=!0}}}function Wr(e){document.addEventListener("click",t);return;function t(r){if(!n(r))return;const o=i(r.target);if(!o)return;const l=o.getAttribute("href");if(Tt(o))return;s(l),r.preventDefault();const a=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(l,{keepScrollPosition:a})}function n(r){return r.button===0&&!r.ctrlKey&&!r.shiftKey&&!r.altKey&&!r.metaKey}function i(r){for(;r.tagName!=="A";){const{parentNode:o}=r;if(!o)return null;r=o}return r}}function Hr(e){window.addEventListener("popstate",()=>{const t=Q(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",i=t.urlWithoutHash===S.previousState.urlWithoutHash,r=!t.historyState.timestamp||!S.previousState.historyState.timestamp?null:t.historyState.timestamp<S.previousState.historyState.timestamp;S.previousState=t,i?window.history.state===null?($t(),S.previousState=Q()):Wt(n):e(n,r)})}function Vr(e,t){M()!==e&&(ke(),$r(e,t),S.previousState=Q())}function Q(){return{urlWithoutHash:M({withoutHash:!0}),historyState:Fe()}}function Wt(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Gr();if(n&&n!=="top"){const i=document.getElementById(n)||document.getElementsByName(n)[0];if(i){i.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;Ur(t)}function Ur(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const i=new Date().getTime();for(;;)if(await pi(10),t(),n()||new Date().getTime()-i>100)return},0)}))}function zr(){window.addEventListener("scroll",mi(ze,Math.ceil(1e3/3)),{passive:!0}),Ht(ze)}function Gr(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function Mr(){Ge(),Ht(Ge),Yr(()=>S.initialRenderIsDone&&ke())}function ke(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function Ge(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function Ht(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Yr(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function Me(e,t){return!!(P(e)&&e._abortRendering||Jr(e,t))}function Jr(e,t){if(!Se(e))return!1;if(t._isFirstRenderAttempt)throw he(e,!1),e;return he(e,!0),X(t.urlOriginal),!0}function Kr(){return!!window._disableAutomaticLinkInterception}L();Yt(!0);Nr();
